/* balacodewriter.c generated by balac, the Bala compiler
 * generated from balacodewriter.bala, do not modify */

/* balacodewriter.bala
 *
 * Copyright (C) 2006-2014  Jürg Billeter
 * Copyright (C) 2006-2008  Raffaele Sandrini
 * Copyright (C) 2014       Richard Wiedenhöft
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.

 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Jürg Billeter <j@bitron.ch>
 *	Raffaele Sandrini <raffaele@sandrini.ch>
 */

#include "bala.h"
#include <stdio.h>
#include <glib.h>
#include <stdlib.h>
#include <string.h>
#include <glib/gstdio.h>
#include <balagee.h>
#include <glib-object.h>

#define _bala_code_context_unref0(var) ((var == NULL) ? NULL : (var = (bala_code_context_unref (var), NULL)))
#define _fclose0(var) ((var == NULL) ? NULL : (var = (fclose (var), NULL)))
#define _bala_scope_unref0(var) ((var == NULL) ? NULL : (var = (bala_scope_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_mapped_file_unref0(var) ((var == NULL) ? NULL : (var = (g_mapped_file_unref (var), NULL)))
#define _bala_code_node_unref0(var) ((var == NULL) ? NULL : (var = (bala_code_node_unref (var), NULL)))
#define _bala_source_reference_unref0(var) ((var == NULL) ? NULL : (var = (bala_source_reference_unref (var), NULL)))
#define _bala_comment_unref0(var) ((var == NULL) ? NULL : (var = (bala_comment_unref (var), NULL)))
#define _bala_iterable_unref0(var) ((var == NULL) ? NULL : (var = (bala_iterable_unref (var), NULL)))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _bala_iterator_unref0(var) ((var == NULL) ? NULL : (var = (bala_iterator_unref (var), NULL)))
#define _g_sequence_free0(var) ((var == NULL) ? NULL : (var = (g_sequence_free (var), NULL)))

struct _BalaCodeWriterPrivate {
	BalaCodeContext* context;
	FILE* stream;
	gint indent;
	gboolean bol;
	BalaScope* current_scope;
	BalaCodeWriterType type;
	gchar* override_header;
	gchar* header_to_override;
};

static gint BalaCodeWriter_private_offset;
static gpointer bala_code_writer_parent_class = NULL;
static GRegex* bala_code_writer_fix_indent_regex;
static GRegex* bala_code_writer_fix_indent_regex = NULL;

static void bala_code_writer_write_string (BalaCodeWriter* self,
                                    const gchar* s);
static void bala_code_writer_write_newline (BalaCodeWriter* self);
static void bala_code_writer_real_visit_using_directive (BalaCodeVisitor* base,
                                                  BalaUsingDirective* ns);
static void _bala_code_node_unref0_ (gpointer var);
static inline void _g_list_free__bala_code_node_unref0_ (GList* self);
static void bala_code_writer_real_visit_namespace (BalaCodeVisitor* base,
                                            BalaNamespace* ns);
static void bala_code_writer_write_comment (BalaCodeWriter* self,
                                     BalaComment* comment);
static void bala_code_writer_write_attributes (BalaCodeWriter* self,
                                        BalaCodeNode* node);
static void bala_code_writer_write_indent (BalaCodeWriter* self);
static void bala_code_writer_write_identifier (BalaCodeWriter* self,
                                        const gchar* s);
static void bala_code_writer_write_begin_block (BalaCodeWriter* self);
static void bala_code_writer_visit_sorted (BalaCodeWriter* self,
                                    BalaList* symbols);
static void bala_code_writer_write_end_block (BalaCodeWriter* self);
static gchar* bala_code_writer_get_cheaders (BalaCodeWriter* self,
                                      BalaSymbol* sym);
static void bala_code_writer_real_visit_class (BalaCodeVisitor* base,
                                        BalaClass* cl);
static gboolean bala_code_writer_check_accessibility (BalaCodeWriter* self,
                                               BalaSymbol* sym);
static void bala_code_writer_write_accessibility (BalaCodeWriter* self,
                                           BalaSymbol* sym);
static void bala_code_writer_write_type_parameters (BalaCodeWriter* self,
                                             BalaList* type_params);
static void bala_code_writer_write_type (BalaCodeWriter* self,
                                  BalaDataType* type);
static gint __lambda7_ (BalaCodeWriter* self,
                 BalaSymbol* a,
                 BalaSymbol* b);
static gint ___lambda7__gcompare_data_func (gconstpointer a,
                                     gconstpointer b,
                                     gpointer self);
static void bala_code_writer_real_visit_struct (BalaCodeVisitor* base,
                                         BalaStruct* st);
static void bala_code_writer_real_visit_interface (BalaCodeVisitor* base,
                                            BalaInterface* iface);
static void bala_code_writer_real_visit_enum (BalaCodeVisitor* base,
                                       BalaEnum* en);
static void bala_code_writer_real_visit_error_domain (BalaCodeVisitor* base,
                                               BalaErrorDomain* edomain);
static void bala_code_writer_real_visit_constant (BalaCodeVisitor* base,
                                           BalaConstant* c);
static void bala_code_writer_write_type_suffix (BalaCodeWriter* self,
                                         BalaDataType* type);
static void bala_code_writer_real_visit_field (BalaCodeVisitor* base,
                                        BalaField* f);
static void bala_code_writer_write_error_domains (BalaCodeWriter* self,
                                           BalaList* error_domains);
static void bala_code_writer_write_params (BalaCodeWriter* self,
                                    BalaList* params);
static void bala_code_writer_real_visit_delegate (BalaCodeVisitor* base,
                                           BalaDelegate* cb);
static void bala_code_writer_write_return_type (BalaCodeWriter* self,
                                         BalaDataType* type);
static void bala_code_writer_real_visit_constructor (BalaCodeVisitor* base,
                                              BalaConstructor* c);
static void bala_code_writer_write_code_block (BalaCodeWriter* self,
                                        BalaBlock* block);
static void bala_code_writer_real_visit_destructor (BalaCodeVisitor* base,
                                             BalaDestructor* d);
static void bala_code_writer_real_visit_method (BalaCodeVisitor* base,
                                         BalaMethod* m);
static void bala_code_writer_real_visit_creation_method (BalaCodeVisitor* base,
                                                  BalaCreationMethod* m);
static void bala_code_writer_real_visit_property (BalaCodeVisitor* base,
                                           BalaProperty* prop);
static void bala_code_writer_write_property_accessor_accessibility (BalaCodeWriter* self,
                                                             BalaSymbol* sym);
static void bala_code_writer_real_visit_signal (BalaCodeVisitor* base,
                                         BalaSignal* sig);
static void bala_code_writer_real_visit_block (BalaCodeVisitor* base,
                                        BalaBlock* b);
static void bala_code_writer_real_visit_empty_statement (BalaCodeVisitor* base,
                                                  BalaEmptyStatement* stmt);
static void bala_code_writer_real_visit_declaration_statement (BalaCodeVisitor* base,
                                                        BalaDeclarationStatement* stmt);
static void bala_code_writer_real_visit_local_variable (BalaCodeVisitor* base,
                                                 BalaLocalVariable* local);
static void bala_code_writer_real_visit_initializer_list (BalaCodeVisitor* base,
                                                   BalaInitializerList* list);
static void bala_code_writer_real_visit_expression_statement (BalaCodeVisitor* base,
                                                       BalaExpressionStatement* stmt);
static void bala_code_writer_real_visit_if_statement (BalaCodeVisitor* base,
                                               BalaIfStatement* stmt);
static void bala_code_writer_real_visit_switch_statement (BalaCodeVisitor* base,
                                                   BalaSwitchStatement* stmt);
static void bala_code_writer_real_visit_switch_section (BalaCodeVisitor* base,
                                                 BalaSwitchSection* section);
static void bala_code_writer_real_visit_switch_label (BalaCodeVisitor* base,
                                               BalaSwitchLabel* label);
static void bala_code_writer_real_visit_loop (BalaCodeVisitor* base,
                                       BalaLoop* stmt);
static void bala_code_writer_real_visit_while_statement (BalaCodeVisitor* base,
                                                  BalaWhileStatement* stmt);
static void bala_code_writer_real_visit_do_statement (BalaCodeVisitor* base,
                                               BalaDoStatement* stmt);
static void bala_code_writer_real_visit_for_statement (BalaCodeVisitor* base,
                                                BalaForStatement* stmt);
static void bala_code_writer_real_visit_foreach_statement (BalaCodeVisitor* base,
                                                    BalaForeachStatement* stmt);
static void bala_code_writer_real_visit_break_statement (BalaCodeVisitor* base,
                                                  BalaBreakStatement* stmt);
static void bala_code_writer_real_visit_continue_statement (BalaCodeVisitor* base,
                                                     BalaContinueStatement* stmt);
static void bala_code_writer_real_visit_return_statement (BalaCodeVisitor* base,
                                                   BalaReturnStatement* stmt);
static void bala_code_writer_real_visit_yield_statement (BalaCodeVisitor* base,
                                                  BalaYieldStatement* y);
static void bala_code_writer_real_visit_throw_statement (BalaCodeVisitor* base,
                                                  BalaThrowStatement* stmt);
static void bala_code_writer_real_visit_try_statement (BalaCodeVisitor* base,
                                                BalaTryStatement* stmt);
static void bala_code_writer_real_visit_catch_clause (BalaCodeVisitor* base,
                                               BalaCatchClause* clause);
static void bala_code_writer_real_visit_lock_statement (BalaCodeVisitor* base,
                                                 BalaLockStatement* stmt);
static void bala_code_writer_real_visit_unlock_statement (BalaCodeVisitor* base,
                                                   BalaUnlockStatement* stmt);
static void bala_code_writer_real_visit_delete_statement (BalaCodeVisitor* base,
                                                   BalaDeleteStatement* stmt);
static void bala_code_writer_real_visit_array_creation_expression (BalaCodeVisitor* base,
                                                            BalaArrayCreationExpression* expr);
static void bala_code_writer_real_visit_boolean_literal (BalaCodeVisitor* base,
                                                  BalaBooleanLiteral* lit);
static void bala_code_writer_real_visit_character_literal (BalaCodeVisitor* base,
                                                    BalaCharacterLiteral* lit);
static void bala_code_writer_real_visit_integer_literal (BalaCodeVisitor* base,
                                                  BalaIntegerLiteral* lit);
static void bala_code_writer_real_visit_real_literal (BalaCodeVisitor* base,
                                               BalaRealLiteral* lit);
static void bala_code_writer_real_visit_string_literal (BalaCodeVisitor* base,
                                                 BalaStringLiteral* lit);
static void bala_code_writer_real_visit_null_literal (BalaCodeVisitor* base,
                                               BalaNullLiteral* lit);
static void bala_code_writer_real_visit_member_access (BalaCodeVisitor* base,
                                                BalaMemberAccess* expr);
static void bala_code_writer_real_visit_method_call (BalaCodeVisitor* base,
                                              BalaMethodCall* expr);
static void bala_code_writer_real_visit_element_access (BalaCodeVisitor* base,
                                                 BalaElementAccess* expr);
static void bala_code_writer_real_visit_slice_expression (BalaCodeVisitor* base,
                                                   BalaSliceExpression* expr);
static void bala_code_writer_real_visit_base_access (BalaCodeVisitor* base,
                                              BalaBaseAccess* expr);
static void bala_code_writer_real_visit_postfix_expression (BalaCodeVisitor* base,
                                                     BalaPostfixExpression* expr);
static void bala_code_writer_real_visit_object_creation_expression (BalaCodeVisitor* base,
                                                             BalaObjectCreationExpression* expr);
static void bala_code_writer_real_visit_sizeof_expression (BalaCodeVisitor* base,
                                                    BalaSizeofExpression* expr);
static void bala_code_writer_real_visit_typeof_expression (BalaCodeVisitor* base,
                                                    BalaTypeofExpression* expr);
static void bala_code_writer_real_visit_unary_expression (BalaCodeVisitor* base,
                                                   BalaUnaryExpression* expr);
static void bala_code_writer_real_visit_cast_expression (BalaCodeVisitor* base,
                                                  BalaCastExpression* expr);
static void bala_code_writer_real_visit_pointer_indirection (BalaCodeVisitor* base,
                                                      BalaPointerIndirection* expr);
static void bala_code_writer_real_visit_addressof_expression (BalaCodeVisitor* base,
                                                       BalaAddressofExpression* expr);
static void bala_code_writer_real_visit_reference_transfer_expression (BalaCodeVisitor* base,
                                                                BalaReferenceTransferExpression* expr);
static void bala_code_writer_real_visit_binary_expression (BalaCodeVisitor* base,
                                                    BalaBinaryExpression* expr);
static void bala_code_writer_real_visit_type_check (BalaCodeVisitor* base,
                                             BalaTypeCheck* expr);
static void bala_code_writer_real_visit_conditional_expression (BalaCodeVisitor* base,
                                                         BalaConditionalExpression* expr);
static void bala_code_writer_real_visit_lambda_expression (BalaCodeVisitor* base,
                                                    BalaLambdaExpression* expr);
static void bala_code_writer_real_visit_assignment (BalaCodeVisitor* base,
                                             BalaAssignment* a);
static gboolean bala_code_writer_skip_since_tag_check (BalaCodeWriter* self,
                                                BalaSymbol* sym,
                                                const gchar* since_val);
static gint ____lambda5_ (BalaCodeWriter* self,
                   BalaAttribute* a,
                   BalaAttribute* b);
static gint _____lambda5__gcompare_data_func (gconstpointer a,
                                       gconstpointer b,
                                       gpointer self);
static gint ___lambda6_ (BalaCodeWriter* self,
                  BalaAttribute* a,
                  BalaAttribute* b);
static gint ____lambda6__gcompare_data_func (gconstpointer a,
                                      gconstpointer b,
                                      gpointer self);
static void _g_free0_ (gpointer var);
static void bala_code_writer_finalize (BalaCodeVisitor * obj);
static GType bala_code_writer_get_type_once (void);
static void _bala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _bala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _bala_array_length (gpointer array);

static inline gpointer
bala_code_writer_get_instance_private (BalaCodeWriter* self)
{
	return G_STRUCT_MEMBER_P (self, BalaCodeWriter_private_offset);
}

BalaCodeWriter*
bala_code_writer_construct (GType object_type,
                            BalaCodeWriterType type)
{
	BalaCodeWriter* self = NULL;
	self = (BalaCodeWriter*) bala_code_visitor_construct (object_type);
	self->priv->type = type;
	return self;
}

BalaCodeWriter*
bala_code_writer_new (BalaCodeWriterType type)
{
	return bala_code_writer_construct (BALA_TYPE_CODE_WRITER, type);
}

/**
 * Allows overriding of a specific cheader in the output
 * @param original original cheader to override
 * @param replacement cheader to replace original with
 */
void
bala_code_writer_set_cheader_override (BalaCodeWriter* self,
                                       const gchar* original,
                                       const gchar* replacement)
{
	gchar* _tmp0_;
	gchar* _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (original != NULL);
	g_return_if_fail (replacement != NULL);
	_tmp0_ = g_strdup (original);
	_g_free0 (self->priv->header_to_override);
	self->priv->header_to_override = _tmp0_;
	_tmp1_ = g_strdup (replacement);
	_g_free0 (self->priv->override_header);
	self->priv->override_header = _tmp1_;
}

/**
 * Writes the public interface of the specified code context into the
 * specified file.
 *
 * @param context  a code context
 * @param filename a relative or absolute filename
 */
static gpointer
_bala_code_context_ref0 (gpointer self)
{
	return self ? bala_code_context_ref (self) : NULL;
}

static gpointer
_bala_scope_ref0 (gpointer self)
{
	return self ? bala_scope_ref (self) : NULL;
}

void
bala_code_writer_write_file (BalaCodeWriter* self,
                             BalaCodeContext* context,
                             const gchar* filename)
{
	gboolean file_exists = FALSE;
	gchar* temp_filename = NULL;
	gchar* _tmp0_;
	BalaCodeContext* _tmp1_;
	FILE* _tmp5_;
	gchar* _tmp8_ = NULL;
	gboolean _tmp9_;
	gboolean _tmp10_;
	gchar* header = NULL;
	gchar* _tmp19_;
	const gchar* _tmp20_;
	BalaNamespace* _tmp21_;
	BalaNamespace* _tmp22_;
	BalaScope* _tmp23_;
	BalaScope* _tmp24_;
	BalaScope* _tmp25_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (context != NULL);
	g_return_if_fail (filename != NULL);
	file_exists = g_file_test (filename, G_FILE_TEST_EXISTS);
	_tmp0_ = g_strdup_printf ("%s.balatmp", filename);
	temp_filename = _tmp0_;
	_tmp1_ = _bala_code_context_ref0 (context);
	_bala_code_context_unref0 (self->priv->context);
	self->priv->context = _tmp1_;
	if (file_exists) {
		const gchar* _tmp2_;
		FILE* _tmp3_;
		_tmp2_ = temp_filename;
		_tmp3_ = g_fopen (_tmp2_, "w");
		_fclose0 (self->priv->stream);
		self->priv->stream = _tmp3_;
	} else {
		FILE* _tmp4_;
		_tmp4_ = g_fopen (filename, "w");
		_fclose0 (self->priv->stream);
		self->priv->stream = _tmp4_;
	}
	_tmp5_ = self->priv->stream;
	if (_tmp5_ == NULL) {
		gchar* _tmp6_;
		gchar* _tmp7_;
		_tmp6_ = g_strdup_printf ("unable to open `%s' for writing", filename);
		_tmp7_ = _tmp6_;
		bala_report_error (NULL, _tmp7_);
		_g_free0 (_tmp7_);
		_g_free0 (temp_filename);
		return;
	}
	_tmp9_ = bala_code_context_get_version_header (context);
	_tmp10_ = _tmp9_;
	if (_tmp10_) {
		gchar* _tmp11_;
		gchar* _tmp12_;
		const gchar* _tmp13_;
		gchar* _tmp14_;
		_tmp11_ = g_path_get_basename (filename);
		_tmp12_ = _tmp11_;
		_tmp13_ = g_get_prgname ();
		_tmp14_ = g_strdup_printf ("/* %s generated by %s %s, do not modify. */", _tmp12_, _tmp13_, BALA_BUILD_VERSION);
		_g_free0 (_tmp8_);
		_tmp8_ = _tmp14_;
		_g_free0 (_tmp12_);
	} else {
		gchar* _tmp15_;
		gchar* _tmp16_;
		const gchar* _tmp17_;
		gchar* _tmp18_;
		_tmp15_ = g_path_get_basename (filename);
		_tmp16_ = _tmp15_;
		_tmp17_ = g_get_prgname ();
		_tmp18_ = g_strdup_printf ("/* %s generated by %s, do not modify. */", _tmp16_, _tmp17_);
		_g_free0 (_tmp8_);
		_tmp8_ = _tmp18_;
		_g_free0 (_tmp16_);
	}
	_tmp19_ = g_strdup (_tmp8_);
	header = _tmp19_;
	_tmp20_ = header;
	bala_code_writer_write_string (self, _tmp20_);
	bala_code_writer_write_newline (self);
	bala_code_writer_write_newline (self);
	_tmp21_ = bala_code_context_get_root (context);
	_tmp22_ = _tmp21_;
	_tmp23_ = bala_symbol_get_scope ((BalaSymbol*) _tmp22_);
	_tmp24_ = _tmp23_;
	_tmp25_ = _bala_scope_ref0 (_tmp24_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp25_;
	bala_code_context_accept (context, (BalaCodeVisitor*) self);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = NULL;
	_fclose0 (self->priv->stream);
	self->priv->stream = NULL;
	if (file_exists) {
		gboolean changed = FALSE;
		changed = TRUE;
		{
			GMappedFile* old_file = NULL;
			GMappedFile* _tmp26_;
			GMappedFile* new_file = NULL;
			const gchar* _tmp27_;
			GMappedFile* _tmp28_;
			gsize len = 0UL;
			GMappedFile* _tmp29_;
			GMappedFile* _tmp30_;
			_tmp26_ = g_mapped_file_new (filename, FALSE, &_inner_error0_);
			old_file = _tmp26_;
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				if (_inner_error0_->domain == G_FILE_ERROR) {
					goto __catch0_g_file_error;
				}
				_g_free0 (header);
				_g_free0 (_tmp8_);
				_g_free0 (temp_filename);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
				g_clear_error (&_inner_error0_);
				return;
			}
			_tmp27_ = temp_filename;
			_tmp28_ = g_mapped_file_new (_tmp27_, FALSE, &_inner_error0_);
			new_file = _tmp28_;
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				_g_mapped_file_unref0 (old_file);
				if (_inner_error0_->domain == G_FILE_ERROR) {
					goto __catch0_g_file_error;
				}
				_g_free0 (header);
				_g_free0 (_tmp8_);
				_g_free0 (temp_filename);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
				g_clear_error (&_inner_error0_);
				return;
			}
			_tmp29_ = old_file;
			len = g_mapped_file_get_length (_tmp29_);
			_tmp30_ = new_file;
			if (len == g_mapped_file_get_length (_tmp30_)) {
				GMappedFile* _tmp31_;
				gchar* _tmp32_;
				GMappedFile* _tmp33_;
				gchar* _tmp34_;
				_tmp31_ = old_file;
				_tmp32_ = g_mapped_file_get_contents (_tmp31_);
				_tmp33_ = new_file;
				_tmp34_ = g_mapped_file_get_contents (_tmp33_);
				if (memcmp (_tmp32_, _tmp34_, len) == 0) {
					changed = FALSE;
				}
			}
			_g_mapped_file_unref0 (old_file);
			old_file = NULL;
			_g_mapped_file_unref0 (new_file);
			new_file = NULL;
			_g_mapped_file_unref0 (new_file);
			_g_mapped_file_unref0 (old_file);
		}
		goto __finally0;
		__catch0_g_file_error:
		{
			g_clear_error (&_inner_error0_);
		}
		__finally0:
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_free0 (header);
			_g_free0 (_tmp8_);
			_g_free0 (temp_filename);
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return;
		}
		if (changed) {
			const gchar* _tmp35_;
			_tmp35_ = temp_filename;
			g_rename (_tmp35_, filename);
		} else {
			const gchar* _tmp36_;
			_tmp36_ = temp_filename;
			g_unlink (_tmp36_);
		}
	}
	_g_free0 (header);
	_g_free0 (_tmp8_);
	_g_free0 (temp_filename);
}

static gpointer
_bala_code_node_ref0 (gpointer self)
{
	return self ? bala_code_node_ref (self) : NULL;
}

static void
_bala_code_node_unref0_ (gpointer var)
{
	(var == NULL) ? NULL : (var = (bala_code_node_unref (var), NULL));
}

static inline void
_g_list_free__bala_code_node_unref0_ (GList* self)
{
	g_list_free_full (self, (GDestroyNotify) _bala_code_node_unref0_);
}

static void
bala_code_writer_real_visit_using_directive (BalaCodeVisitor* base,
                                             BalaUsingDirective* ns)
{
	BalaCodeWriter * self;
	BalaCodeWriterType _tmp0_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (ns != NULL);
	_tmp0_ = self->priv->type;
	if (_tmp0_ == BALA_CODE_WRITER_TYPE_FAST) {
		GList* symbols = NULL;
		BalaUnresolvedSymbol* sym = NULL;
		BalaSymbol* _tmp1_;
		BalaSymbol* _tmp2_;
		BalaUnresolvedSymbol* _tmp3_;
		BalaUnresolvedSymbol* _tmp4_;
		BalaUnresolvedSymbol* _tmp5_;
		GList* _tmp13_;
		gconstpointer _tmp14_;
		const gchar* _tmp15_;
		const gchar* _tmp16_;
		bala_code_writer_write_string (self, "using ");
		symbols = NULL;
		_tmp1_ = bala_using_directive_get_namespace_symbol (ns);
		_tmp2_ = _tmp1_;
		_tmp3_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, BALA_TYPE_UNRESOLVED_SYMBOL, BalaUnresolvedSymbol));
		sym = _tmp3_;
		_tmp4_ = sym;
		_tmp5_ = _bala_code_node_ref0 (_tmp4_);
		symbols = g_list_prepend (symbols, _tmp5_);
		while (TRUE) {
			BalaUnresolvedSymbol* _tmp6_;
			BalaUnresolvedSymbol* _tmp7_;
			BalaUnresolvedSymbol* _tmp8_;
			BalaUnresolvedSymbol* _tmp9_;
			BalaUnresolvedSymbol* _tmp10_;
			BalaUnresolvedSymbol* _tmp11_;
			BalaUnresolvedSymbol* _tmp12_;
			_tmp6_ = sym;
			_tmp7_ = bala_unresolved_symbol_get_inner (_tmp6_);
			_tmp8_ = _tmp7_;
			_tmp9_ = _bala_code_node_ref0 (_tmp8_);
			_bala_code_node_unref0 (sym);
			sym = _tmp9_;
			_tmp10_ = sym;
			if (!(_tmp10_ != NULL)) {
				break;
			}
			_tmp11_ = sym;
			_tmp12_ = _bala_code_node_ref0 (_tmp11_);
			symbols = g_list_prepend (symbols, _tmp12_);
		}
		_tmp13_ = symbols;
		_tmp14_ = g_list_nth_data (_tmp13_, (guint) 0);
		_tmp15_ = bala_symbol_get_name ((BalaSymbol*) ((BalaUnresolvedSymbol*) _tmp14_));
		_tmp16_ = _tmp15_;
		bala_code_writer_write_string (self, _tmp16_);
		{
			gint i = 0;
			i = 1;
			{
				gboolean _tmp17_ = FALSE;
				_tmp17_ = TRUE;
				while (TRUE) {
					GList* _tmp19_;
					GList* _tmp20_;
					gconstpointer _tmp21_;
					const gchar* _tmp22_;
					const gchar* _tmp23_;
					if (!_tmp17_) {
						gint _tmp18_;
						_tmp18_ = i;
						i = _tmp18_ + 1;
					}
					_tmp17_ = FALSE;
					_tmp19_ = symbols;
					if (!(((guint) i) < g_list_length (_tmp19_))) {
						break;
					}
					bala_code_writer_write_string (self, ".");
					_tmp20_ = symbols;
					_tmp21_ = g_list_nth_data (_tmp20_, (guint) i);
					_tmp22_ = bala_symbol_get_name ((BalaSymbol*) ((BalaUnresolvedSymbol*) _tmp21_));
					_tmp23_ = _tmp22_;
					bala_code_writer_write_string (self, _tmp23_);
				}
			}
		}
		bala_code_writer_write_string (self, ";\n");
		_bala_code_node_unref0 (sym);
		(symbols == NULL) ? NULL : (symbols = (_g_list_free__bala_code_node_unref0_ (symbols), NULL));
	}
}

static gpointer
_bala_iterable_ref0 (gpointer self)
{
	return self ? bala_iterable_ref (self) : NULL;
}

static gpointer
_bala_source_reference_ref0 (gpointer self)
{
	return self ? bala_source_reference_ref (self) : NULL;
}

static void
bala_code_writer_real_visit_namespace (BalaCodeVisitor* base,
                                       BalaNamespace* ns)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	BalaList* comments = NULL;
	BalaList* _tmp4_;
	BalaList* _tmp5_;
	gboolean _tmp6_ = FALSE;
	BalaCodeContext* _tmp7_;
	gboolean _tmp8_;
	gboolean _tmp9_;
	const gchar* _tmp38_;
	const gchar* _tmp39_;
	BalaScope* _tmp40_;
	BalaScope* _tmp41_;
	BalaScope* _tmp42_;
	BalaList* _tmp43_;
	BalaList* _tmp44_;
	BalaList* _tmp45_;
	BalaList* _tmp46_;
	BalaList* _tmp47_;
	BalaList* _tmp48_;
	BalaList* _tmp49_;
	BalaList* _tmp50_;
	BalaList* _tmp51_;
	BalaList* _tmp52_;
	BalaScope* _tmp53_;
	BalaScope* _tmp54_;
	BalaScope* _tmp55_;
	BalaScope* _tmp56_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (ns != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) ns);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	_tmp2_ = bala_symbol_get_name ((BalaSymbol*) ns);
	_tmp3_ = _tmp2_;
	if (_tmp3_ == NULL) {
		bala_code_node_accept_children ((BalaCodeNode*) ns, (BalaCodeVisitor*) self);
		return;
	}
	_tmp4_ = bala_namespace_get_comments (ns);
	_tmp5_ = _bala_iterable_ref0 (_tmp4_);
	comments = _tmp5_;
	_tmp7_ = self->priv->context;
	_tmp8_ = bala_code_context_get_bapi_comments (_tmp7_);
	_tmp9_ = _tmp8_;
	if (_tmp9_) {
		BalaList* _tmp10_;
		gint _tmp11_;
		gint _tmp12_;
		_tmp10_ = comments;
		_tmp11_ = bala_collection_get_size ((BalaCollection*) _tmp10_);
		_tmp12_ = _tmp11_;
		_tmp6_ = _tmp12_ > 0;
	} else {
		_tmp6_ = FALSE;
	}
	if (_tmp6_) {
		gboolean first = FALSE;
		BalaSourceReference* first_reference = NULL;
		first = TRUE;
		first_reference = NULL;
		{
			BalaList* _comment_list = NULL;
			BalaList* _tmp13_;
			BalaList* _tmp14_;
			gint _comment_size = 0;
			BalaList* _tmp15_;
			gint _tmp16_;
			gint _tmp17_;
			gint _comment_index = 0;
			_tmp13_ = comments;
			_tmp14_ = _bala_iterable_ref0 (_tmp13_);
			_comment_list = _tmp14_;
			_tmp15_ = _comment_list;
			_tmp16_ = bala_collection_get_size ((BalaCollection*) _tmp15_);
			_tmp17_ = _tmp16_;
			_comment_size = _tmp17_;
			_comment_index = -1;
			while (TRUE) {
				gint _tmp18_;
				gint _tmp19_;
				BalaComment* comment = NULL;
				BalaList* _tmp20_;
				gpointer _tmp21_;
				BalaComment* _tmp22_;
				BalaSourceReference* _tmp23_;
				BalaSourceReference* _tmp24_;
				BalaSourceFile* _tmp25_;
				BalaSourceFile* _tmp26_;
				BalaSourceFileType _tmp27_;
				BalaSourceFileType _tmp28_;
				_comment_index = _comment_index + 1;
				_tmp18_ = _comment_index;
				_tmp19_ = _comment_size;
				if (!(_tmp18_ < _tmp19_)) {
					break;
				}
				_tmp20_ = _comment_list;
				_tmp21_ = bala_list_get (_tmp20_, _comment_index);
				comment = (BalaComment*) _tmp21_;
				_tmp22_ = comment;
				_tmp23_ = bala_comment_get_source_reference (_tmp22_);
				_tmp24_ = _tmp23_;
				_tmp25_ = bala_source_reference_get_file (_tmp24_);
				_tmp26_ = _tmp25_;
				_tmp27_ = bala_source_file_get_file_type (_tmp26_);
				_tmp28_ = _tmp27_;
				if (_tmp28_ == BALA_SOURCE_FILE_TYPE_SOURCE) {
					if (first) {
						BalaComment* _tmp29_;
						BalaComment* _tmp30_;
						BalaSourceReference* _tmp31_;
						BalaSourceReference* _tmp32_;
						BalaSourceReference* _tmp33_;
						_tmp29_ = comment;
						bala_code_writer_write_comment (self, _tmp29_);
						first = FALSE;
						_tmp30_ = comment;
						_tmp31_ = bala_comment_get_source_reference (_tmp30_);
						_tmp32_ = _tmp31_;
						_tmp33_ = _bala_source_reference_ref0 (_tmp32_);
						_bala_source_reference_unref0 (first_reference);
						first_reference = _tmp33_;
					} else {
						BalaComment* _tmp34_;
						BalaSourceReference* _tmp35_;
						BalaSourceReference* _tmp36_;
						BalaSourceReference* _tmp37_;
						_tmp34_ = comment;
						_tmp35_ = bala_comment_get_source_reference (_tmp34_);
						_tmp36_ = _tmp35_;
						bala_report_warning (_tmp36_, "Comment describes namespace, that was already described by another com" \
"ment.");
						_tmp37_ = first_reference;
						bala_report_notice (_tmp37_, "Previous comment was here.");
					}
				}
				_bala_comment_unref0 (comment);
			}
			_bala_iterable_unref0 (_comment_list);
		}
		_bala_source_reference_unref0 (first_reference);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) ns);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "namespace ");
	_tmp38_ = bala_symbol_get_name ((BalaSymbol*) ns);
	_tmp39_ = _tmp38_;
	bala_code_writer_write_identifier (self, _tmp39_);
	bala_code_writer_write_begin_block (self);
	_tmp40_ = bala_symbol_get_scope ((BalaSymbol*) ns);
	_tmp41_ = _tmp40_;
	_tmp42_ = _bala_scope_ref0 (_tmp41_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp42_;
	_tmp43_ = bala_namespace_get_namespaces (ns);
	bala_code_writer_visit_sorted (self, _tmp43_);
	_tmp44_ = bala_namespace_get_classes (ns);
	bala_code_writer_visit_sorted (self, _tmp44_);
	_tmp45_ = bala_namespace_get_interfaces (ns);
	bala_code_writer_visit_sorted (self, _tmp45_);
	_tmp46_ = bala_namespace_get_structs (ns);
	bala_code_writer_visit_sorted (self, _tmp46_);
	_tmp47_ = bala_namespace_get_enums (ns);
	bala_code_writer_visit_sorted (self, _tmp47_);
	_tmp48_ = bala_namespace_get_error_domains (ns);
	bala_code_writer_visit_sorted (self, _tmp48_);
	_tmp49_ = bala_namespace_get_delegates (ns);
	bala_code_writer_visit_sorted (self, _tmp49_);
	_tmp50_ = bala_namespace_get_fields (ns);
	bala_code_writer_visit_sorted (self, _tmp50_);
	_tmp51_ = bala_namespace_get_constants (ns);
	bala_code_writer_visit_sorted (self, _tmp51_);
	_tmp52_ = bala_namespace_get_methods (ns);
	bala_code_writer_visit_sorted (self, _tmp52_);
	_tmp53_ = self->priv->current_scope;
	_tmp54_ = bala_scope_get_parent_scope (_tmp53_);
	_tmp55_ = _tmp54_;
	_tmp56_ = _bala_scope_ref0 (_tmp55_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp56_;
	bala_code_writer_write_end_block (self);
	bala_code_writer_write_newline (self);
	_bala_iterable_unref0 (comments);
}

static gchar*
_bala_g_strjoinv (const gchar* separator,
                  gchar** str_array,
                  gint str_array_length1)
{
	gboolean _tmp0_ = FALSE;
	gchar* result = NULL;
	if (separator == NULL) {
		separator = "";
	}
	if (str_array != NULL) {
		gboolean _tmp1_ = FALSE;
		if (str_array_length1 > 0) {
			_tmp1_ = TRUE;
		} else {
			gboolean _tmp2_ = FALSE;
			if (str_array_length1 == -1) {
				const gchar* _tmp3_;
				_tmp3_ = str_array[0];
				_tmp2_ = _tmp3_ != NULL;
			} else {
				_tmp2_ = FALSE;
			}
			_tmp1_ = _tmp2_;
		}
		_tmp0_ = _tmp1_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		gint i = 0;
		gsize len = 0UL;
		gint _tmp16_;
		gint _tmp17_;
		const gchar* res = NULL;
		void* _tmp18_;
		void* ptr = NULL;
		const gchar* _tmp19_;
		const gchar* _tmp20_;
		void* _tmp21_;
		const gchar* _tmp31_;
		len = (gsize) 1;
		{
			gboolean _tmp4_ = FALSE;
			i = 0;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp6_ = FALSE;
				gboolean _tmp7_ = FALSE;
				gint _tmp10_ = 0;
				const gchar* _tmp11_;
				if (!_tmp4_) {
					gint _tmp5_;
					_tmp5_ = i;
					i = _tmp5_ + 1;
				}
				_tmp4_ = FALSE;
				if (str_array_length1 != -1) {
					_tmp7_ = i < str_array_length1;
				} else {
					_tmp7_ = FALSE;
				}
				if (_tmp7_) {
					_tmp6_ = TRUE;
				} else {
					gboolean _tmp8_ = FALSE;
					if (str_array_length1 == -1) {
						const gchar* _tmp9_;
						_tmp9_ = str_array[i];
						_tmp8_ = _tmp9_ != NULL;
					} else {
						_tmp8_ = FALSE;
					}
					_tmp6_ = _tmp8_;
				}
				if (!_tmp6_) {
					break;
				}
				_tmp11_ = str_array[i];
				if (_tmp11_ != NULL) {
					const gchar* _tmp12_;
					gint _tmp13_;
					gint _tmp14_;
					_tmp12_ = str_array[i];
					_tmp13_ = strlen ((const gchar*) _tmp12_);
					_tmp14_ = _tmp13_;
					_tmp10_ = _tmp14_;
				} else {
					_tmp10_ = 0;
				}
				len += (gsize) _tmp10_;
			}
		}
		if (i == 0) {
			gchar* _tmp15_;
			_tmp15_ = g_strdup ("");
			result = _tmp15_;
			return result;
		}
		str_array_length1 = i;
		_tmp16_ = strlen ((const gchar*) separator);
		_tmp17_ = _tmp16_;
		len += (gsize) (_tmp17_ * (i - 1));
		_tmp18_ = g_malloc (len);
		res = _tmp18_;
		_tmp19_ = res;
		_tmp20_ = str_array[0];
		_tmp21_ = g_stpcpy ((void*) _tmp19_, (const gchar*) _tmp20_);
		ptr = _tmp21_;
		{
			gboolean _tmp22_ = FALSE;
			i = 1;
			_tmp22_ = TRUE;
			while (TRUE) {
				void* _tmp24_;
				void* _tmp25_;
				const gchar* _tmp26_ = NULL;
				const gchar* _tmp27_;
				void* _tmp29_;
				void* _tmp30_;
				if (!_tmp22_) {
					gint _tmp23_;
					_tmp23_ = i;
					i = _tmp23_ + 1;
				}
				_tmp22_ = FALSE;
				if (!(i < str_array_length1)) {
					break;
				}
				_tmp24_ = ptr;
				_tmp25_ = g_stpcpy (_tmp24_, (const gchar*) separator);
				ptr = _tmp25_;
				_tmp27_ = str_array[i];
				if (_tmp27_ != NULL) {
					const gchar* _tmp28_;
					_tmp28_ = str_array[i];
					_tmp26_ = (const gchar*) _tmp28_;
				} else {
					_tmp26_ = "";
				}
				_tmp29_ = ptr;
				_tmp30_ = g_stpcpy (_tmp29_, _tmp26_);
				ptr = _tmp30_;
			}
		}
		_tmp31_ = res;
		res = NULL;
		result = (gchar*) _tmp31_;
		return result;
	} else {
		gchar* _tmp32_;
		_tmp32_ = g_strdup ("");
		result = _tmp32_;
		return result;
	}
}

static gchar*
bala_code_writer_get_cheaders (BalaCodeWriter* self,
                               BalaSymbol* sym)
{
	gchar* cheaders = NULL;
	gchar* _tmp0_;
	gboolean _tmp1_ = FALSE;
	BalaCodeWriterType _tmp2_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (sym != NULL, NULL);
	_tmp0_ = g_strdup ("");
	cheaders = _tmp0_;
	_tmp2_ = self->priv->type;
	if (_tmp2_ != BALA_CODE_WRITER_TYPE_FAST) {
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp3_ = bala_symbol_get_external_package (sym);
		_tmp4_ = _tmp3_;
		_tmp1_ = !_tmp4_;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		gchar* _tmp5_ = NULL;
		gchar* _tmp6_;
		gchar* _tmp8_;
		gboolean _tmp9_ = FALSE;
		gboolean _tmp10_ = FALSE;
		const gchar* _tmp11_;
		gboolean _tmp22_ = FALSE;
		gboolean _tmp23_ = FALSE;
		const gchar* _tmp24_;
		const gchar* _tmp34_;
		_tmp6_ = bala_code_node_get_attribute_string ((BalaCodeNode*) sym, "CCode", "cheader_filename", NULL);
		_tmp5_ = _tmp6_;
		if (_tmp5_ == NULL) {
			gchar* _tmp7_;
			_tmp7_ = g_strdup ("");
			_g_free0 (_tmp5_);
			_tmp5_ = _tmp7_;
		}
		_tmp8_ = _tmp5_;
		_tmp5_ = NULL;
		_g_free0 (cheaders);
		cheaders = _tmp8_;
		_tmp11_ = cheaders;
		if (g_strcmp0 (_tmp11_, "") == 0) {
			BalaSymbol* _tmp12_;
			BalaSymbol* _tmp13_;
			_tmp12_ = bala_symbol_get_parent_symbol (sym);
			_tmp13_ = _tmp12_;
			_tmp10_ = _tmp13_ != NULL;
		} else {
			_tmp10_ = FALSE;
		}
		if (_tmp10_) {
			BalaSymbol* _tmp14_;
			BalaSymbol* _tmp15_;
			BalaCodeContext* _tmp16_;
			BalaNamespace* _tmp17_;
			BalaNamespace* _tmp18_;
			_tmp14_ = bala_symbol_get_parent_symbol (sym);
			_tmp15_ = _tmp14_;
			_tmp16_ = self->priv->context;
			_tmp17_ = bala_code_context_get_root (_tmp16_);
			_tmp18_ = _tmp17_;
			_tmp9_ = _tmp15_ != G_TYPE_CHECK_INSTANCE_CAST (_tmp18_, BALA_TYPE_SYMBOL, BalaSymbol);
		} else {
			_tmp9_ = FALSE;
		}
		if (_tmp9_) {
			BalaSymbol* _tmp19_;
			BalaSymbol* _tmp20_;
			gchar* _tmp21_;
			_tmp19_ = bala_symbol_get_parent_symbol (sym);
			_tmp20_ = _tmp19_;
			_tmp21_ = bala_code_writer_get_cheaders (self, _tmp20_);
			_g_free0 (cheaders);
			cheaders = _tmp21_;
		}
		_tmp24_ = cheaders;
		if (g_strcmp0 (_tmp24_, "") == 0) {
			BalaSourceReference* _tmp25_;
			BalaSourceReference* _tmp26_;
			_tmp25_ = bala_code_node_get_source_reference ((BalaCodeNode*) sym);
			_tmp26_ = _tmp25_;
			_tmp23_ = _tmp26_ != NULL;
		} else {
			_tmp23_ = FALSE;
		}
		if (_tmp23_) {
			gboolean _tmp27_;
			gboolean _tmp28_;
			_tmp27_ = bala_symbol_get_external_package (sym);
			_tmp28_ = _tmp27_;
			_tmp22_ = !_tmp28_;
		} else {
			_tmp22_ = FALSE;
		}
		if (_tmp22_) {
			BalaSourceReference* _tmp29_;
			BalaSourceReference* _tmp30_;
			BalaSourceFile* _tmp31_;
			BalaSourceFile* _tmp32_;
			gchar* _tmp33_;
			_tmp29_ = bala_code_node_get_source_reference ((BalaCodeNode*) sym);
			_tmp30_ = _tmp29_;
			_tmp31_ = bala_source_reference_get_file (_tmp30_);
			_tmp32_ = _tmp31_;
			_tmp33_ = bala_source_file_get_cinclude_filename (_tmp32_);
			_g_free0 (cheaders);
			cheaders = _tmp33_;
		}
		_tmp34_ = self->priv->header_to_override;
		if (_tmp34_ != NULL) {
			gchar** cheaders_array = NULL;
			const gchar* _tmp35_;
			gchar** _tmp36_;
			gchar** _tmp37_;
			gint cheaders_array_length1;
			gint _cheaders_array_size_;
			gchar** _tmp47_;
			gint _tmp47__length1;
			gchar* _tmp48_;
			_tmp35_ = cheaders;
			_tmp37_ = _tmp36_ = g_strsplit (_tmp35_, ",", 0);
			cheaders_array = _tmp37_;
			cheaders_array_length1 = _bala_array_length (_tmp36_);
			_cheaders_array_size_ = cheaders_array_length1;
			{
				gint i = 0;
				i = 0;
				{
					gboolean _tmp38_ = FALSE;
					_tmp38_ = TRUE;
					while (TRUE) {
						gchar** _tmp40_;
						gint _tmp40__length1;
						gchar** _tmp41_;
						gint _tmp41__length1;
						const gchar* _tmp42_;
						const gchar* _tmp43_;
						if (!_tmp38_) {
							gint _tmp39_;
							_tmp39_ = i;
							i = _tmp39_ + 1;
						}
						_tmp38_ = FALSE;
						_tmp40_ = cheaders_array;
						_tmp40__length1 = cheaders_array_length1;
						if (!(i < _tmp40__length1)) {
							break;
						}
						_tmp41_ = cheaders_array;
						_tmp41__length1 = cheaders_array_length1;
						_tmp42_ = _tmp41_[i];
						_tmp43_ = self->priv->header_to_override;
						if (g_strcmp0 (_tmp42_, _tmp43_) == 0) {
							gchar** _tmp44_;
							gint _tmp44__length1;
							const gchar* _tmp45_;
							gchar* _tmp46_;
							_tmp44_ = cheaders_array;
							_tmp44__length1 = cheaders_array_length1;
							_tmp45_ = self->priv->override_header;
							_tmp46_ = g_strdup (_tmp45_);
							_g_free0 (_tmp44_[i]);
							_tmp44_[i] = _tmp46_;
						}
					}
				}
			}
			_tmp47_ = cheaders_array;
			_tmp47__length1 = cheaders_array_length1;
			_tmp48_ = _bala_g_strjoinv (",", _tmp47_, (gint) _tmp47__length1);
			_g_free0 (cheaders);
			cheaders = _tmp48_;
			cheaders_array = (_bala_array_free (cheaders_array, cheaders_array_length1, (GDestroyNotify) g_free), NULL);
		}
		_g_free0 (_tmp5_);
	}
	result = cheaders;
	return result;
}

static void
bala_code_writer_real_visit_class (BalaCodeVisitor* base,
                                   BalaClass* cl)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp10_;
	gboolean _tmp11_;
	gboolean _tmp12_;
	gboolean _tmp13_;
	const gchar* _tmp14_;
	const gchar* _tmp15_;
	BalaList* _tmp16_;
	BalaList* base_types = NULL;
	BalaList* _tmp17_;
	BalaList* _tmp18_;
	BalaList* _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	BalaScope* _tmp32_;
	BalaScope* _tmp33_;
	BalaScope* _tmp34_;
	BalaList* _tmp35_;
	BalaList* _tmp36_;
	BalaList* _tmp37_;
	BalaList* _tmp38_;
	BalaList* _tmp39_;
	BalaList* _tmp40_;
	BalaList* _tmp41_;
	BalaList* _tmp42_;
	BalaList* _tmp43_;
	BalaList* _tmp44_;
	BalaConstructor* _tmp45_;
	BalaConstructor* _tmp46_;
	BalaConstructor* _tmp49_;
	BalaConstructor* _tmp50_;
	BalaConstructor* _tmp53_;
	BalaConstructor* _tmp54_;
	BalaDestructor* _tmp57_;
	BalaDestructor* _tmp58_;
	BalaDestructor* _tmp61_;
	BalaDestructor* _tmp62_;
	BalaDestructor* _tmp65_;
	BalaDestructor* _tmp66_;
	BalaScope* _tmp69_;
	BalaScope* _tmp70_;
	BalaScope* _tmp71_;
	BalaScope* _tmp72_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (cl != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) cl);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) cl)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) cl);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) cl);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) cl);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) cl);
	_tmp10_ = bala_class_get_is_abstract (cl);
	_tmp11_ = _tmp10_;
	if (_tmp11_) {
		bala_code_writer_write_string (self, "abstract ");
	}
	_tmp12_ = bala_class_get_is_sealed (cl);
	_tmp13_ = _tmp12_;
	if (_tmp13_) {
		bala_code_writer_write_string (self, "sealed ");
	}
	bala_code_writer_write_string (self, "class ");
	_tmp14_ = bala_symbol_get_name ((BalaSymbol*) cl);
	_tmp15_ = _tmp14_;
	bala_code_writer_write_identifier (self, _tmp15_);
	_tmp16_ = bala_object_type_symbol_get_type_parameters ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_write_type_parameters (self, _tmp16_);
	_tmp17_ = bala_class_get_base_types (cl);
	_tmp18_ = _bala_iterable_ref0 (_tmp17_);
	base_types = _tmp18_;
	_tmp19_ = base_types;
	_tmp20_ = bala_collection_get_size ((BalaCollection*) _tmp19_);
	_tmp21_ = _tmp20_;
	if (_tmp21_ > 0) {
		gboolean first = FALSE;
		bala_code_writer_write_string (self, " : ");
		first = TRUE;
		{
			BalaList* _base_type_list = NULL;
			BalaList* _tmp22_;
			BalaList* _tmp23_;
			gint _base_type_size = 0;
			BalaList* _tmp24_;
			gint _tmp25_;
			gint _tmp26_;
			gint _base_type_index = 0;
			_tmp22_ = base_types;
			_tmp23_ = _bala_iterable_ref0 (_tmp22_);
			_base_type_list = _tmp23_;
			_tmp24_ = _base_type_list;
			_tmp25_ = bala_collection_get_size ((BalaCollection*) _tmp24_);
			_tmp26_ = _tmp25_;
			_base_type_size = _tmp26_;
			_base_type_index = -1;
			while (TRUE) {
				gint _tmp27_;
				gint _tmp28_;
				BalaDataType* base_type = NULL;
				BalaList* _tmp29_;
				gpointer _tmp30_;
				BalaDataType* _tmp31_;
				_base_type_index = _base_type_index + 1;
				_tmp27_ = _base_type_index;
				_tmp28_ = _base_type_size;
				if (!(_tmp27_ < _tmp28_)) {
					break;
				}
				_tmp29_ = _base_type_list;
				_tmp30_ = bala_list_get (_tmp29_, _base_type_index);
				base_type = (BalaDataType*) _tmp30_;
				if (!first) {
					bala_code_writer_write_string (self, ", ");
				} else {
					first = FALSE;
				}
				_tmp31_ = base_type;
				bala_code_writer_write_type (self, _tmp31_);
				_bala_code_node_unref0 (base_type);
			}
			_bala_iterable_unref0 (_base_type_list);
		}
	}
	bala_code_writer_write_begin_block (self);
	_tmp32_ = bala_symbol_get_scope ((BalaSymbol*) cl);
	_tmp33_ = _tmp32_;
	_tmp34_ = _bala_scope_ref0 (_tmp33_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp34_;
	_tmp35_ = bala_object_type_symbol_get_classes ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp35_);
	_tmp36_ = bala_object_type_symbol_get_interfaces ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp36_);
	_tmp37_ = bala_object_type_symbol_get_structs ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp37_);
	_tmp38_ = bala_object_type_symbol_get_enums ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp38_);
	_tmp39_ = bala_object_type_symbol_get_delegates ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp39_);
	_tmp40_ = bala_object_type_symbol_get_fields ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp40_);
	_tmp41_ = bala_object_type_symbol_get_constants ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp41_);
	_tmp42_ = bala_object_type_symbol_get_methods ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp42_);
	_tmp43_ = bala_object_type_symbol_get_properties ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp43_);
	_tmp44_ = bala_object_type_symbol_get_signals ((BalaObjectTypeSymbol*) cl);
	bala_code_writer_visit_sorted (self, _tmp44_);
	_tmp45_ = bala_class_get_constructor (cl);
	_tmp46_ = _tmp45_;
	if (_tmp46_ != NULL) {
		BalaConstructor* _tmp47_;
		BalaConstructor* _tmp48_;
		_tmp47_ = bala_class_get_constructor (cl);
		_tmp48_ = _tmp47_;
		bala_code_node_accept ((BalaCodeNode*) _tmp48_, (BalaCodeVisitor*) self);
	}
	_tmp49_ = bala_class_get_class_constructor (cl);
	_tmp50_ = _tmp49_;
	if (_tmp50_ != NULL) {
		BalaConstructor* _tmp51_;
		BalaConstructor* _tmp52_;
		_tmp51_ = bala_class_get_class_constructor (cl);
		_tmp52_ = _tmp51_;
		bala_code_node_accept ((BalaCodeNode*) _tmp52_, (BalaCodeVisitor*) self);
	}
	_tmp53_ = bala_class_get_static_constructor (cl);
	_tmp54_ = _tmp53_;
	if (_tmp54_ != NULL) {
		BalaConstructor* _tmp55_;
		BalaConstructor* _tmp56_;
		_tmp55_ = bala_class_get_static_constructor (cl);
		_tmp56_ = _tmp55_;
		bala_code_node_accept ((BalaCodeNode*) _tmp56_, (BalaCodeVisitor*) self);
	}
	_tmp57_ = bala_class_get_destructor (cl);
	_tmp58_ = _tmp57_;
	if (_tmp58_ != NULL) {
		BalaDestructor* _tmp59_;
		BalaDestructor* _tmp60_;
		_tmp59_ = bala_class_get_destructor (cl);
		_tmp60_ = _tmp59_;
		bala_code_node_accept ((BalaCodeNode*) _tmp60_, (BalaCodeVisitor*) self);
	}
	_tmp61_ = bala_class_get_static_destructor (cl);
	_tmp62_ = _tmp61_;
	if (_tmp62_ != NULL) {
		BalaDestructor* _tmp63_;
		BalaDestructor* _tmp64_;
		_tmp63_ = bala_class_get_static_destructor (cl);
		_tmp64_ = _tmp63_;
		bala_code_node_accept ((BalaCodeNode*) _tmp64_, (BalaCodeVisitor*) self);
	}
	_tmp65_ = bala_class_get_class_destructor (cl);
	_tmp66_ = _tmp65_;
	if (_tmp66_ != NULL) {
		BalaDestructor* _tmp67_;
		BalaDestructor* _tmp68_;
		_tmp67_ = bala_class_get_class_destructor (cl);
		_tmp68_ = _tmp67_;
		bala_code_node_accept ((BalaCodeNode*) _tmp68_, (BalaCodeVisitor*) self);
	}
	_tmp69_ = self->priv->current_scope;
	_tmp70_ = bala_scope_get_parent_scope (_tmp69_);
	_tmp71_ = _tmp70_;
	_tmp72_ = _bala_scope_ref0 (_tmp71_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp72_;
	bala_code_writer_write_end_block (self);
	bala_code_writer_write_newline (self);
	_bala_iterable_unref0 (base_types);
}

static gint
__lambda7_ (BalaCodeWriter* self,
            BalaSymbol* a,
            BalaSymbol* b)
{
	GCompareFunc _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gint result = 0;
	g_return_val_if_fail (a != NULL, 0);
	g_return_val_if_fail (b != NULL, 0);
	_tmp0_ = ((GCompareFunc) g_strcmp0);
	_tmp1_ = bala_symbol_get_name (a);
	_tmp2_ = _tmp1_;
	_tmp3_ = bala_symbol_get_name (b);
	_tmp4_ = _tmp3_;
	result = _tmp0_ (_tmp2_, _tmp4_);
	return result;
}

static gint
___lambda7__gcompare_data_func (gconstpointer a,
                                gconstpointer b,
                                gpointer self)
{
	gint result;
	result = __lambda7_ ((BalaCodeWriter*) self, (BalaSymbol*) a, (BalaSymbol*) b);
	return result;
}

static void
bala_code_writer_visit_sorted (BalaCodeWriter* self,
                               BalaList* symbols)
{
	gboolean _tmp0_ = FALSE;
	BalaCodeWriterType _tmp1_;
	BalaArrayList* sorted_symbols = NULL;
	GEqualFunc _tmp12_;
	BalaArrayList* _tmp13_;
	BalaArrayList* _tmp14_;
	BalaArrayList* _tmp15_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (symbols != NULL);
	_tmp1_ = self->priv->type;
	if (_tmp1_ != BALA_CODE_WRITER_TYPE_EXTERNAL) {
		BalaCodeWriterType _tmp2_;
		_tmp2_ = self->priv->type;
		_tmp0_ = _tmp2_ != BALA_CODE_WRITER_TYPE_BAPIGEN;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		{
			BalaList* _sym_list = NULL;
			BalaList* _tmp3_;
			gint _sym_size = 0;
			BalaList* _tmp4_;
			gint _tmp5_;
			gint _tmp6_;
			gint _sym_index = 0;
			_tmp3_ = _bala_iterable_ref0 (symbols);
			_sym_list = _tmp3_;
			_tmp4_ = _sym_list;
			_tmp5_ = bala_collection_get_size ((BalaCollection*) _tmp4_);
			_tmp6_ = _tmp5_;
			_sym_size = _tmp6_;
			_sym_index = -1;
			while (TRUE) {
				gint _tmp7_;
				gint _tmp8_;
				BalaSymbol* sym = NULL;
				BalaList* _tmp9_;
				gpointer _tmp10_;
				BalaSymbol* _tmp11_;
				_sym_index = _sym_index + 1;
				_tmp7_ = _sym_index;
				_tmp8_ = _sym_size;
				if (!(_tmp7_ < _tmp8_)) {
					break;
				}
				_tmp9_ = _sym_list;
				_tmp10_ = bala_list_get (_tmp9_, _sym_index);
				sym = (BalaSymbol*) _tmp10_;
				_tmp11_ = sym;
				bala_code_node_accept ((BalaCodeNode*) _tmp11_, (BalaCodeVisitor*) self);
				_bala_code_node_unref0 (sym);
			}
			_bala_iterable_unref0 (_sym_list);
		}
		return;
	}
	_tmp12_ = g_direct_equal;
	_tmp13_ = bala_array_list_new (BALA_TYPE_SYMBOL, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, _tmp12_);
	sorted_symbols = _tmp13_;
	_tmp14_ = sorted_symbols;
	bala_collection_add_all ((BalaCollection*) _tmp14_, (BalaCollection*) symbols);
	_tmp15_ = sorted_symbols;
	bala_list_sort ((BalaList*) _tmp15_, ___lambda7__gcompare_data_func, bala_code_visitor_ref (self), bala_code_visitor_unref);
	{
		BalaArrayList* _sym_list = NULL;
		BalaArrayList* _tmp16_;
		BalaArrayList* _tmp17_;
		gint _sym_size = 0;
		BalaArrayList* _tmp18_;
		gint _tmp19_;
		gint _tmp20_;
		gint _sym_index = 0;
		_tmp16_ = sorted_symbols;
		_tmp17_ = _bala_iterable_ref0 (_tmp16_);
		_sym_list = _tmp17_;
		_tmp18_ = _sym_list;
		_tmp19_ = bala_collection_get_size ((BalaCollection*) _tmp18_);
		_tmp20_ = _tmp19_;
		_sym_size = _tmp20_;
		_sym_index = -1;
		while (TRUE) {
			gint _tmp21_;
			gint _tmp22_;
			BalaSymbol* sym = NULL;
			BalaArrayList* _tmp23_;
			gpointer _tmp24_;
			BalaSymbol* _tmp25_;
			_sym_index = _sym_index + 1;
			_tmp21_ = _sym_index;
			_tmp22_ = _sym_size;
			if (!(_tmp21_ < _tmp22_)) {
				break;
			}
			_tmp23_ = _sym_list;
			_tmp24_ = bala_list_get ((BalaList*) _tmp23_, _sym_index);
			sym = (BalaSymbol*) _tmp24_;
			_tmp25_ = sym;
			bala_code_node_accept ((BalaCodeNode*) _tmp25_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (sym);
		}
		_bala_iterable_unref0 (_sym_list);
	}
	_bala_iterable_unref0 (sorted_symbols);
}

static void
bala_code_writer_real_visit_struct (BalaCodeVisitor* base,
                                    BalaStruct* st)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	BalaList* _tmp12_;
	BalaDataType* _tmp13_;
	BalaDataType* _tmp14_;
	BalaScope* _tmp17_;
	BalaScope* _tmp18_;
	BalaScope* _tmp19_;
	BalaList* _tmp30_;
	BalaList* _tmp31_;
	BalaList* _tmp32_;
	BalaScope* _tmp33_;
	BalaScope* _tmp34_;
	BalaScope* _tmp35_;
	BalaScope* _tmp36_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (st != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) st);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) st)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) st);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) st);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) st);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) st);
	bala_code_writer_write_string (self, "struct ");
	_tmp10_ = bala_symbol_get_name ((BalaSymbol*) st);
	_tmp11_ = _tmp10_;
	bala_code_writer_write_identifier (self, _tmp11_);
	_tmp12_ = bala_struct_get_type_parameters (st);
	bala_code_writer_write_type_parameters (self, _tmp12_);
	_tmp13_ = bala_struct_get_base_type (st);
	_tmp14_ = _tmp13_;
	if (_tmp14_ != NULL) {
		BalaDataType* _tmp15_;
		BalaDataType* _tmp16_;
		bala_code_writer_write_string (self, " : ");
		_tmp15_ = bala_struct_get_base_type (st);
		_tmp16_ = _tmp15_;
		bala_code_writer_write_type (self, _tmp16_);
	}
	bala_code_writer_write_begin_block (self);
	_tmp17_ = bala_symbol_get_scope ((BalaSymbol*) st);
	_tmp18_ = _tmp17_;
	_tmp19_ = _bala_scope_ref0 (_tmp18_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp19_;
	{
		BalaList* _field_list = NULL;
		BalaList* _tmp20_;
		BalaList* _tmp21_;
		gint _field_size = 0;
		BalaList* _tmp22_;
		gint _tmp23_;
		gint _tmp24_;
		gint _field_index = 0;
		_tmp20_ = bala_struct_get_fields (st);
		_tmp21_ = _bala_iterable_ref0 (_tmp20_);
		_field_list = _tmp21_;
		_tmp22_ = _field_list;
		_tmp23_ = bala_collection_get_size ((BalaCollection*) _tmp22_);
		_tmp24_ = _tmp23_;
		_field_size = _tmp24_;
		_field_index = -1;
		while (TRUE) {
			gint _tmp25_;
			gint _tmp26_;
			BalaField* field = NULL;
			BalaList* _tmp27_;
			gpointer _tmp28_;
			BalaField* _tmp29_;
			_field_index = _field_index + 1;
			_tmp25_ = _field_index;
			_tmp26_ = _field_size;
			if (!(_tmp25_ < _tmp26_)) {
				break;
			}
			_tmp27_ = _field_list;
			_tmp28_ = bala_list_get (_tmp27_, _field_index);
			field = (BalaField*) _tmp28_;
			_tmp29_ = field;
			bala_code_node_accept ((BalaCodeNode*) _tmp29_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (field);
		}
		_bala_iterable_unref0 (_field_list);
	}
	_tmp30_ = bala_struct_get_constants (st);
	bala_code_writer_visit_sorted (self, _tmp30_);
	_tmp31_ = bala_struct_get_methods (st);
	bala_code_writer_visit_sorted (self, _tmp31_);
	_tmp32_ = bala_struct_get_properties (st);
	bala_code_writer_visit_sorted (self, _tmp32_);
	_tmp33_ = self->priv->current_scope;
	_tmp34_ = bala_scope_get_parent_scope (_tmp33_);
	_tmp35_ = _tmp34_;
	_tmp36_ = _bala_scope_ref0 (_tmp35_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp36_;
	bala_code_writer_write_end_block (self);
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_interface (BalaCodeVisitor* base,
                                       BalaInterface* iface)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	BalaList* _tmp12_;
	BalaList* prerequisites = NULL;
	BalaList* _tmp13_;
	BalaList* _tmp14_;
	BalaList* _tmp15_;
	gint _tmp16_;
	gint _tmp17_;
	BalaScope* _tmp28_;
	BalaScope* _tmp29_;
	BalaScope* _tmp30_;
	BalaList* _tmp31_;
	BalaList* _tmp32_;
	BalaList* _tmp33_;
	BalaList* _tmp34_;
	BalaList* _tmp35_;
	BalaList* _tmp36_;
	BalaList* _tmp37_;
	BalaList* _tmp38_;
	BalaList* _tmp39_;
	BalaList* _tmp40_;
	BalaScope* _tmp41_;
	BalaScope* _tmp42_;
	BalaScope* _tmp43_;
	BalaScope* _tmp44_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (iface != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) iface);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) iface)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) iface);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) iface);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) iface);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) iface);
	bala_code_writer_write_string (self, "interface ");
	_tmp10_ = bala_symbol_get_name ((BalaSymbol*) iface);
	_tmp11_ = _tmp10_;
	bala_code_writer_write_identifier (self, _tmp11_);
	_tmp12_ = bala_object_type_symbol_get_type_parameters ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_write_type_parameters (self, _tmp12_);
	_tmp13_ = bala_interface_get_prerequisites (iface);
	_tmp14_ = _bala_iterable_ref0 (_tmp13_);
	prerequisites = _tmp14_;
	_tmp15_ = prerequisites;
	_tmp16_ = bala_collection_get_size ((BalaCollection*) _tmp15_);
	_tmp17_ = _tmp16_;
	if (_tmp17_ > 0) {
		gboolean first = FALSE;
		bala_code_writer_write_string (self, " : ");
		first = TRUE;
		{
			BalaList* _prerequisite_list = NULL;
			BalaList* _tmp18_;
			BalaList* _tmp19_;
			gint _prerequisite_size = 0;
			BalaList* _tmp20_;
			gint _tmp21_;
			gint _tmp22_;
			gint _prerequisite_index = 0;
			_tmp18_ = prerequisites;
			_tmp19_ = _bala_iterable_ref0 (_tmp18_);
			_prerequisite_list = _tmp19_;
			_tmp20_ = _prerequisite_list;
			_tmp21_ = bala_collection_get_size ((BalaCollection*) _tmp20_);
			_tmp22_ = _tmp21_;
			_prerequisite_size = _tmp22_;
			_prerequisite_index = -1;
			while (TRUE) {
				gint _tmp23_;
				gint _tmp24_;
				BalaDataType* prerequisite = NULL;
				BalaList* _tmp25_;
				gpointer _tmp26_;
				BalaDataType* _tmp27_;
				_prerequisite_index = _prerequisite_index + 1;
				_tmp23_ = _prerequisite_index;
				_tmp24_ = _prerequisite_size;
				if (!(_tmp23_ < _tmp24_)) {
					break;
				}
				_tmp25_ = _prerequisite_list;
				_tmp26_ = bala_list_get (_tmp25_, _prerequisite_index);
				prerequisite = (BalaDataType*) _tmp26_;
				if (!first) {
					bala_code_writer_write_string (self, ", ");
				} else {
					first = FALSE;
				}
				_tmp27_ = prerequisite;
				bala_code_writer_write_type (self, _tmp27_);
				_bala_code_node_unref0 (prerequisite);
			}
			_bala_iterable_unref0 (_prerequisite_list);
		}
	}
	bala_code_writer_write_begin_block (self);
	_tmp28_ = bala_symbol_get_scope ((BalaSymbol*) iface);
	_tmp29_ = _tmp28_;
	_tmp30_ = _bala_scope_ref0 (_tmp29_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp30_;
	_tmp31_ = bala_object_type_symbol_get_classes ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp31_);
	_tmp32_ = bala_object_type_symbol_get_interfaces ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp32_);
	_tmp33_ = bala_object_type_symbol_get_structs ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp33_);
	_tmp34_ = bala_object_type_symbol_get_enums ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp34_);
	_tmp35_ = bala_object_type_symbol_get_delegates ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp35_);
	_tmp36_ = bala_object_type_symbol_get_fields ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp36_);
	_tmp37_ = bala_object_type_symbol_get_constants ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp37_);
	_tmp38_ = bala_object_type_symbol_get_methods ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp38_);
	_tmp39_ = bala_object_type_symbol_get_properties ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp39_);
	_tmp40_ = bala_object_type_symbol_get_signals ((BalaObjectTypeSymbol*) iface);
	bala_code_writer_visit_sorted (self, _tmp40_);
	_tmp41_ = self->priv->current_scope;
	_tmp42_ = bala_scope_get_parent_scope (_tmp41_);
	_tmp43_ = _tmp42_;
	_tmp44_ = _bala_scope_ref0 (_tmp43_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp44_;
	bala_code_writer_write_end_block (self);
	bala_code_writer_write_newline (self);
	_bala_iterable_unref0 (prerequisites);
}

static void
bala_code_writer_real_visit_enum (BalaCodeVisitor* base,
                                  BalaEnum* en)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	gboolean first = FALSE;
	BalaScope* _tmp54_;
	BalaScope* _tmp55_;
	BalaScope* _tmp56_;
	BalaScope* _tmp77_;
	BalaScope* _tmp78_;
	BalaScope* _tmp79_;
	BalaScope* _tmp80_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (en != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) en);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) en)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) en);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) en);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) en);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) en);
	bala_code_writer_write_string (self, "enum ");
	_tmp10_ = bala_symbol_get_name ((BalaSymbol*) en);
	_tmp11_ = _tmp10_;
	bala_code_writer_write_identifier (self, _tmp11_);
	bala_code_writer_write_begin_block (self);
	first = TRUE;
	{
		BalaList* _ev_list = NULL;
		BalaList* _tmp12_;
		BalaList* _tmp13_;
		gint _ev_size = 0;
		BalaList* _tmp14_;
		gint _tmp15_;
		gint _tmp16_;
		gint _ev_index = 0;
		_tmp12_ = bala_enum_get_values (en);
		_tmp13_ = _bala_iterable_ref0 (_tmp12_);
		_ev_list = _tmp13_;
		_tmp14_ = _ev_list;
		_tmp15_ = bala_collection_get_size ((BalaCollection*) _tmp14_);
		_tmp16_ = _tmp15_;
		_ev_size = _tmp16_;
		_ev_index = -1;
		while (TRUE) {
			gint _tmp17_;
			gint _tmp18_;
			BalaEnumValue* ev = NULL;
			BalaList* _tmp19_;
			gpointer _tmp20_;
			gboolean _tmp21_ = FALSE;
			BalaCodeContext* _tmp22_;
			gboolean _tmp23_;
			gboolean _tmp24_;
			BalaEnumValue* _tmp31_;
			BalaEnumValue* _tmp32_;
			const gchar* _tmp33_;
			const gchar* _tmp34_;
			gboolean _tmp35_ = FALSE;
			gboolean _tmp36_ = FALSE;
			BalaCodeWriterType _tmp37_;
			_ev_index = _ev_index + 1;
			_tmp17_ = _ev_index;
			_tmp18_ = _ev_size;
			if (!(_tmp17_ < _tmp18_)) {
				break;
			}
			_tmp19_ = _ev_list;
			_tmp20_ = bala_list_get (_tmp19_, _ev_index);
			ev = (BalaEnumValue*) _tmp20_;
			if (first) {
				first = FALSE;
			} else {
				bala_code_writer_write_string (self, ",");
				bala_code_writer_write_newline (self);
			}
			_tmp22_ = self->priv->context;
			_tmp23_ = bala_code_context_get_bapi_comments (_tmp22_);
			_tmp24_ = _tmp23_;
			if (_tmp24_) {
				BalaEnumValue* _tmp25_;
				BalaComment* _tmp26_;
				BalaComment* _tmp27_;
				_tmp25_ = ev;
				_tmp26_ = bala_symbol_get_comment ((BalaSymbol*) _tmp25_);
				_tmp27_ = _tmp26_;
				_tmp21_ = _tmp27_ != NULL;
			} else {
				_tmp21_ = FALSE;
			}
			if (_tmp21_) {
				BalaEnumValue* _tmp28_;
				BalaComment* _tmp29_;
				BalaComment* _tmp30_;
				_tmp28_ = ev;
				_tmp29_ = bala_symbol_get_comment ((BalaSymbol*) _tmp28_);
				_tmp30_ = _tmp29_;
				bala_code_writer_write_comment (self, _tmp30_);
			}
			_tmp31_ = ev;
			bala_code_writer_write_attributes (self, (BalaCodeNode*) _tmp31_);
			bala_code_writer_write_indent (self);
			_tmp32_ = ev;
			_tmp33_ = bala_symbol_get_name ((BalaSymbol*) _tmp32_);
			_tmp34_ = _tmp33_;
			bala_code_writer_write_identifier (self, _tmp34_);
			_tmp37_ = self->priv->type;
			if (_tmp37_ == BALA_CODE_WRITER_TYPE_FAST) {
				BalaEnumValue* _tmp38_;
				BalaExpression* _tmp39_;
				BalaExpression* _tmp40_;
				_tmp38_ = ev;
				_tmp39_ = bala_constant_get_value ((BalaConstant*) _tmp38_);
				_tmp40_ = _tmp39_;
				_tmp36_ = _tmp40_ != NULL;
			} else {
				_tmp36_ = FALSE;
			}
			if (_tmp36_) {
				BalaEnumValue* _tmp41_;
				BalaExpression* _tmp42_;
				BalaExpression* _tmp43_;
				_tmp41_ = ev;
				_tmp42_ = bala_constant_get_value ((BalaConstant*) _tmp41_);
				_tmp43_ = _tmp42_;
				_tmp35_ = bala_expression_is_constant (_tmp43_);
			} else {
				_tmp35_ = FALSE;
			}
			if (_tmp35_) {
				BalaEnumValue* _tmp44_;
				BalaExpression* _tmp45_;
				BalaExpression* _tmp46_;
				bala_code_writer_write_string (self, " = ");
				_tmp44_ = ev;
				_tmp45_ = bala_constant_get_value ((BalaConstant*) _tmp44_);
				_tmp46_ = _tmp45_;
				bala_code_node_accept ((BalaCodeNode*) _tmp46_, (BalaCodeVisitor*) self);
			}
			_bala_code_node_unref0 (ev);
		}
		_bala_iterable_unref0 (_ev_list);
	}
	if (!first) {
		gboolean _tmp47_ = FALSE;
		BalaList* _tmp48_;
		gint _tmp49_;
		gint _tmp50_;
		_tmp48_ = bala_enum_get_methods (en);
		_tmp49_ = bala_collection_get_size ((BalaCollection*) _tmp48_);
		_tmp50_ = _tmp49_;
		if (_tmp50_ > 0) {
			_tmp47_ = TRUE;
		} else {
			BalaList* _tmp51_;
			gint _tmp52_;
			gint _tmp53_;
			_tmp51_ = bala_enum_get_constants (en);
			_tmp52_ = bala_collection_get_size ((BalaCollection*) _tmp51_);
			_tmp53_ = _tmp52_;
			_tmp47_ = _tmp53_ > 0;
		}
		if (_tmp47_) {
			bala_code_writer_write_string (self, ";");
		}
		bala_code_writer_write_newline (self);
	}
	_tmp54_ = bala_symbol_get_scope ((BalaSymbol*) en);
	_tmp55_ = _tmp54_;
	_tmp56_ = _bala_scope_ref0 (_tmp55_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp56_;
	{
		BalaList* _m_list = NULL;
		BalaList* _tmp57_;
		BalaList* _tmp58_;
		gint _m_size = 0;
		BalaList* _tmp59_;
		gint _tmp60_;
		gint _tmp61_;
		gint _m_index = 0;
		_tmp57_ = bala_enum_get_methods (en);
		_tmp58_ = _bala_iterable_ref0 (_tmp57_);
		_m_list = _tmp58_;
		_tmp59_ = _m_list;
		_tmp60_ = bala_collection_get_size ((BalaCollection*) _tmp59_);
		_tmp61_ = _tmp60_;
		_m_size = _tmp61_;
		_m_index = -1;
		while (TRUE) {
			gint _tmp62_;
			gint _tmp63_;
			BalaMethod* m = NULL;
			BalaList* _tmp64_;
			gpointer _tmp65_;
			BalaMethod* _tmp66_;
			_m_index = _m_index + 1;
			_tmp62_ = _m_index;
			_tmp63_ = _m_size;
			if (!(_tmp62_ < _tmp63_)) {
				break;
			}
			_tmp64_ = _m_list;
			_tmp65_ = bala_list_get (_tmp64_, _m_index);
			m = (BalaMethod*) _tmp65_;
			_tmp66_ = m;
			bala_code_node_accept ((BalaCodeNode*) _tmp66_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (m);
		}
		_bala_iterable_unref0 (_m_list);
	}
	{
		BalaList* _c_list = NULL;
		BalaList* _tmp67_;
		BalaList* _tmp68_;
		gint _c_size = 0;
		BalaList* _tmp69_;
		gint _tmp70_;
		gint _tmp71_;
		gint _c_index = 0;
		_tmp67_ = bala_enum_get_constants (en);
		_tmp68_ = _bala_iterable_ref0 (_tmp67_);
		_c_list = _tmp68_;
		_tmp69_ = _c_list;
		_tmp70_ = bala_collection_get_size ((BalaCollection*) _tmp69_);
		_tmp71_ = _tmp70_;
		_c_size = _tmp71_;
		_c_index = -1;
		while (TRUE) {
			gint _tmp72_;
			gint _tmp73_;
			BalaConstant* c = NULL;
			BalaList* _tmp74_;
			gpointer _tmp75_;
			BalaConstant* _tmp76_;
			_c_index = _c_index + 1;
			_tmp72_ = _c_index;
			_tmp73_ = _c_size;
			if (!(_tmp72_ < _tmp73_)) {
				break;
			}
			_tmp74_ = _c_list;
			_tmp75_ = bala_list_get (_tmp74_, _c_index);
			c = (BalaConstant*) _tmp75_;
			_tmp76_ = c;
			bala_code_node_accept ((BalaCodeNode*) _tmp76_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (c);
		}
		_bala_iterable_unref0 (_c_list);
	}
	_tmp77_ = self->priv->current_scope;
	_tmp78_ = bala_scope_get_parent_scope (_tmp77_);
	_tmp79_ = _tmp78_;
	_tmp80_ = _bala_scope_ref0 (_tmp79_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp80_;
	bala_code_writer_write_end_block (self);
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_error_domain (BalaCodeVisitor* base,
                                          BalaErrorDomain* edomain)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	gboolean first = FALSE;
	BalaScope* _tmp38_;
	BalaScope* _tmp39_;
	BalaScope* _tmp40_;
	BalaScope* _tmp51_;
	BalaScope* _tmp52_;
	BalaScope* _tmp53_;
	BalaScope* _tmp54_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (edomain != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) edomain);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) edomain)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) edomain);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) edomain);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) edomain);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) edomain);
	bala_code_writer_write_string (self, "errordomain ");
	_tmp10_ = bala_symbol_get_name ((BalaSymbol*) edomain);
	_tmp11_ = _tmp10_;
	bala_code_writer_write_identifier (self, _tmp11_);
	bala_code_writer_write_begin_block (self);
	first = TRUE;
	{
		BalaList* _ecode_list = NULL;
		BalaList* _tmp12_;
		BalaList* _tmp13_;
		gint _ecode_size = 0;
		BalaList* _tmp14_;
		gint _tmp15_;
		gint _tmp16_;
		gint _ecode_index = 0;
		_tmp12_ = bala_error_domain_get_codes (edomain);
		_tmp13_ = _bala_iterable_ref0 (_tmp12_);
		_ecode_list = _tmp13_;
		_tmp14_ = _ecode_list;
		_tmp15_ = bala_collection_get_size ((BalaCollection*) _tmp14_);
		_tmp16_ = _tmp15_;
		_ecode_size = _tmp16_;
		_ecode_index = -1;
		while (TRUE) {
			gint _tmp17_;
			gint _tmp18_;
			BalaErrorCode* ecode = NULL;
			BalaList* _tmp19_;
			gpointer _tmp20_;
			gboolean _tmp21_ = FALSE;
			BalaCodeContext* _tmp22_;
			gboolean _tmp23_;
			gboolean _tmp24_;
			BalaErrorCode* _tmp31_;
			BalaErrorCode* _tmp32_;
			const gchar* _tmp33_;
			const gchar* _tmp34_;
			_ecode_index = _ecode_index + 1;
			_tmp17_ = _ecode_index;
			_tmp18_ = _ecode_size;
			if (!(_tmp17_ < _tmp18_)) {
				break;
			}
			_tmp19_ = _ecode_list;
			_tmp20_ = bala_list_get (_tmp19_, _ecode_index);
			ecode = (BalaErrorCode*) _tmp20_;
			if (first) {
				first = FALSE;
			} else {
				bala_code_writer_write_string (self, ",");
				bala_code_writer_write_newline (self);
			}
			_tmp22_ = self->priv->context;
			_tmp23_ = bala_code_context_get_bapi_comments (_tmp22_);
			_tmp24_ = _tmp23_;
			if (_tmp24_) {
				BalaErrorCode* _tmp25_;
				BalaComment* _tmp26_;
				BalaComment* _tmp27_;
				_tmp25_ = ecode;
				_tmp26_ = bala_symbol_get_comment ((BalaSymbol*) _tmp25_);
				_tmp27_ = _tmp26_;
				_tmp21_ = _tmp27_ != NULL;
			} else {
				_tmp21_ = FALSE;
			}
			if (_tmp21_) {
				BalaErrorCode* _tmp28_;
				BalaComment* _tmp29_;
				BalaComment* _tmp30_;
				_tmp28_ = ecode;
				_tmp29_ = bala_symbol_get_comment ((BalaSymbol*) _tmp28_);
				_tmp30_ = _tmp29_;
				bala_code_writer_write_comment (self, _tmp30_);
			}
			_tmp31_ = ecode;
			bala_code_writer_write_attributes (self, (BalaCodeNode*) _tmp31_);
			bala_code_writer_write_indent (self);
			_tmp32_ = ecode;
			_tmp33_ = bala_symbol_get_name ((BalaSymbol*) _tmp32_);
			_tmp34_ = _tmp33_;
			bala_code_writer_write_identifier (self, _tmp34_);
			_bala_code_node_unref0 (ecode);
		}
		_bala_iterable_unref0 (_ecode_list);
	}
	if (!first) {
		BalaList* _tmp35_;
		gint _tmp36_;
		gint _tmp37_;
		_tmp35_ = bala_error_domain_get_methods (edomain);
		_tmp36_ = bala_collection_get_size ((BalaCollection*) _tmp35_);
		_tmp37_ = _tmp36_;
		if (_tmp37_ > 0) {
			bala_code_writer_write_string (self, ";");
		}
		bala_code_writer_write_newline (self);
	}
	_tmp38_ = bala_symbol_get_scope ((BalaSymbol*) edomain);
	_tmp39_ = _tmp38_;
	_tmp40_ = _bala_scope_ref0 (_tmp39_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp40_;
	{
		BalaList* _m_list = NULL;
		BalaList* _tmp41_;
		BalaList* _tmp42_;
		gint _m_size = 0;
		BalaList* _tmp43_;
		gint _tmp44_;
		gint _tmp45_;
		gint _m_index = 0;
		_tmp41_ = bala_error_domain_get_methods (edomain);
		_tmp42_ = _bala_iterable_ref0 (_tmp41_);
		_m_list = _tmp42_;
		_tmp43_ = _m_list;
		_tmp44_ = bala_collection_get_size ((BalaCollection*) _tmp43_);
		_tmp45_ = _tmp44_;
		_m_size = _tmp45_;
		_m_index = -1;
		while (TRUE) {
			gint _tmp46_;
			gint _tmp47_;
			BalaMethod* m = NULL;
			BalaList* _tmp48_;
			gpointer _tmp49_;
			BalaMethod* _tmp50_;
			_m_index = _m_index + 1;
			_tmp46_ = _m_index;
			_tmp47_ = _m_size;
			if (!(_tmp46_ < _tmp47_)) {
				break;
			}
			_tmp48_ = _m_list;
			_tmp49_ = bala_list_get (_tmp48_, _m_index);
			m = (BalaMethod*) _tmp49_;
			_tmp50_ = m;
			bala_code_node_accept ((BalaCodeNode*) _tmp50_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (m);
		}
		_bala_iterable_unref0 (_m_list);
	}
	_tmp51_ = self->priv->current_scope;
	_tmp52_ = bala_scope_get_parent_scope (_tmp51_);
	_tmp53_ = _tmp52_;
	_tmp54_ = _bala_scope_ref0 (_tmp53_);
	_bala_scope_unref0 (self->priv->current_scope);
	self->priv->current_scope = _tmp54_;
	bala_code_writer_write_end_block (self);
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_constant (BalaCodeVisitor* base,
                                      BalaConstant* c)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp10_;
	gboolean _tmp11_;
	BalaDataType* _tmp12_;
	BalaDataType* _tmp13_;
	const gchar* _tmp14_;
	const gchar* _tmp15_;
	BalaDataType* _tmp16_;
	BalaDataType* _tmp17_;
	gboolean _tmp18_ = FALSE;
	gboolean _tmp19_ = FALSE;
	BalaCodeWriterType _tmp20_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (c != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) c);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) c)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) c);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) c);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) c);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) c);
	_tmp10_ = bala_symbol_get_hides ((BalaSymbol*) c);
	_tmp11_ = _tmp10_;
	if (_tmp11_) {
		bala_code_writer_write_string (self, "new ");
	}
	bala_code_writer_write_string (self, "const ");
	_tmp12_ = bala_constant_get_type_reference (c);
	_tmp13_ = _tmp12_;
	bala_code_writer_write_type (self, _tmp13_);
	bala_code_writer_write_string (self, " ");
	_tmp14_ = bala_symbol_get_name ((BalaSymbol*) c);
	_tmp15_ = _tmp14_;
	bala_code_writer_write_identifier (self, _tmp15_);
	_tmp16_ = bala_constant_get_type_reference (c);
	_tmp17_ = _tmp16_;
	bala_code_writer_write_type_suffix (self, _tmp17_);
	_tmp20_ = self->priv->type;
	if (_tmp20_ == BALA_CODE_WRITER_TYPE_FAST) {
		BalaExpression* _tmp21_;
		BalaExpression* _tmp22_;
		_tmp21_ = bala_constant_get_value (c);
		_tmp22_ = _tmp21_;
		_tmp19_ = _tmp22_ != NULL;
	} else {
		_tmp19_ = FALSE;
	}
	if (_tmp19_) {
		BalaExpression* _tmp23_;
		BalaExpression* _tmp24_;
		_tmp23_ = bala_constant_get_value (c);
		_tmp24_ = _tmp23_;
		_tmp18_ = bala_expression_is_constant (_tmp24_);
	} else {
		_tmp18_ = FALSE;
	}
	if (_tmp18_) {
		BalaExpression* _tmp25_;
		BalaExpression* _tmp26_;
		bala_code_writer_write_string (self, " = ");
		_tmp25_ = bala_constant_get_value (c);
		_tmp26_ = _tmp25_;
		bala_code_node_accept ((BalaCodeNode*) _tmp26_, (BalaCodeVisitor*) self);
	}
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_field (BalaCodeVisitor* base,
                                   BalaField* f)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp10_;
	gboolean _tmp11_;
	BalaMemberBinding _tmp12_;
	BalaMemberBinding _tmp13_;
	BalaDataType* _tmp16_;
	BalaDataType* _tmp17_;
	BalaDataType* _tmp18_;
	BalaDataType* _tmp19_;
	const gchar* _tmp20_;
	const gchar* _tmp21_;
	BalaDataType* _tmp22_;
	BalaDataType* _tmp23_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (f != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) f);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) f)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) f);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) f);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) f);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) f);
	_tmp10_ = bala_symbol_get_hides ((BalaSymbol*) f);
	_tmp11_ = _tmp10_;
	if (_tmp11_) {
		bala_code_writer_write_string (self, "new ");
	}
	_tmp12_ = bala_field_get_binding (f);
	_tmp13_ = _tmp12_;
	if (_tmp13_ == BALA_MEMBER_BINDING_STATIC) {
		bala_code_writer_write_string (self, "static ");
	} else {
		BalaMemberBinding _tmp14_;
		BalaMemberBinding _tmp15_;
		_tmp14_ = bala_field_get_binding (f);
		_tmp15_ = _tmp14_;
		if (_tmp15_ == BALA_MEMBER_BINDING_CLASS) {
			bala_code_writer_write_string (self, "class ");
		}
	}
	_tmp16_ = bala_variable_get_variable_type ((BalaVariable*) f);
	_tmp17_ = _tmp16_;
	if (bala_data_type_is_weak (_tmp17_)) {
		bala_code_writer_write_string (self, "weak ");
	}
	_tmp18_ = bala_variable_get_variable_type ((BalaVariable*) f);
	_tmp19_ = _tmp18_;
	bala_code_writer_write_type (self, _tmp19_);
	bala_code_writer_write_string (self, " ");
	_tmp20_ = bala_symbol_get_name ((BalaSymbol*) f);
	_tmp21_ = _tmp20_;
	bala_code_writer_write_identifier (self, _tmp21_);
	_tmp22_ = bala_variable_get_variable_type ((BalaVariable*) f);
	_tmp23_ = _tmp22_;
	bala_code_writer_write_type_suffix (self, _tmp23_);
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_write_error_domains (BalaCodeWriter* self,
                                      BalaList* error_domains)
{
	gint _tmp0_;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (error_domains != NULL);
	_tmp0_ = bala_collection_get_size ((BalaCollection*) error_domains);
	_tmp1_ = _tmp0_;
	if (_tmp1_ > 0) {
		gboolean first = FALSE;
		bala_code_writer_write_string (self, " throws ");
		first = TRUE;
		{
			BalaList* _type_list = NULL;
			BalaList* _tmp2_;
			gint _type_size = 0;
			BalaList* _tmp3_;
			gint _tmp4_;
			gint _tmp5_;
			gint _type_index = 0;
			_tmp2_ = _bala_iterable_ref0 (error_domains);
			_type_list = _tmp2_;
			_tmp3_ = _type_list;
			_tmp4_ = bala_collection_get_size ((BalaCollection*) _tmp3_);
			_tmp5_ = _tmp4_;
			_type_size = _tmp5_;
			_type_index = -1;
			while (TRUE) {
				gint _tmp6_;
				gint _tmp7_;
				BalaDataType* type = NULL;
				BalaList* _tmp8_;
				gpointer _tmp9_;
				BalaDataType* _tmp10_;
				_type_index = _type_index + 1;
				_tmp6_ = _type_index;
				_tmp7_ = _type_size;
				if (!(_tmp6_ < _tmp7_)) {
					break;
				}
				_tmp8_ = _type_list;
				_tmp9_ = bala_list_get (_tmp8_, _type_index);
				type = (BalaDataType*) _tmp9_;
				if (!first) {
					bala_code_writer_write_string (self, ", ");
				} else {
					first = FALSE;
				}
				_tmp10_ = type;
				bala_code_writer_write_type (self, _tmp10_);
				_bala_code_node_unref0 (type);
			}
			_bala_iterable_unref0 (_type_list);
		}
	}
}

static void
bala_code_writer_write_params (BalaCodeWriter* self,
                               BalaList* params)
{
	gint i = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (params != NULL);
	bala_code_writer_write_string (self, "(");
	i = 1;
	{
		BalaList* _param_list = NULL;
		BalaList* _tmp0_;
		gint _param_size = 0;
		BalaList* _tmp1_;
		gint _tmp2_;
		gint _tmp3_;
		gint _param_index = 0;
		_tmp0_ = _bala_iterable_ref0 (params);
		_param_list = _tmp0_;
		_tmp1_ = _param_list;
		_tmp2_ = bala_collection_get_size ((BalaCollection*) _tmp1_);
		_tmp3_ = _tmp2_;
		_param_size = _tmp3_;
		_param_index = -1;
		while (TRUE) {
			gint _tmp4_;
			gint _tmp5_;
			BalaParameter* param = NULL;
			BalaList* _tmp6_;
			gpointer _tmp7_;
			BalaParameter* _tmp8_;
			gboolean _tmp9_;
			gboolean _tmp10_;
			BalaParameter* _tmp11_;
			BalaParameter* _tmp12_;
			gboolean _tmp13_;
			gboolean _tmp14_;
			BalaParameter* _tmp15_;
			BalaParameterDirection _tmp16_;
			BalaParameterDirection _tmp17_;
			BalaParameter* _tmp32_;
			BalaDataType* _tmp33_;
			BalaDataType* _tmp34_;
			BalaParameter* _tmp35_;
			const gchar* _tmp36_;
			const gchar* _tmp37_;
			BalaParameter* _tmp38_;
			BalaDataType* _tmp39_;
			BalaDataType* _tmp40_;
			BalaParameter* _tmp41_;
			BalaExpression* _tmp42_;
			BalaExpression* _tmp43_;
			gint _tmp47_;
			_param_index = _param_index + 1;
			_tmp4_ = _param_index;
			_tmp5_ = _param_size;
			if (!(_tmp4_ < _tmp5_)) {
				break;
			}
			_tmp6_ = _param_list;
			_tmp7_ = bala_list_get (_tmp6_, _param_index);
			param = (BalaParameter*) _tmp7_;
			if (i > 1) {
				bala_code_writer_write_string (self, ", ");
			}
			_tmp8_ = param;
			_tmp9_ = bala_parameter_get_ellipsis (_tmp8_);
			_tmp10_ = _tmp9_;
			if (_tmp10_) {
				bala_code_writer_write_string (self, "...");
				_bala_code_node_unref0 (param);
				continue;
			}
			_tmp11_ = param;
			bala_code_writer_write_attributes (self, (BalaCodeNode*) _tmp11_);
			_tmp12_ = param;
			_tmp13_ = bala_parameter_get_params_array (_tmp12_);
			_tmp14_ = _tmp13_;
			if (_tmp14_) {
				bala_code_writer_write_string (self, "params ");
			}
			_tmp15_ = param;
			_tmp16_ = bala_parameter_get_direction (_tmp15_);
			_tmp17_ = _tmp16_;
			if (_tmp17_ == BALA_PARAMETER_DIRECTION_IN) {
				BalaParameter* _tmp18_;
				BalaDataType* _tmp19_;
				BalaDataType* _tmp20_;
				gboolean _tmp21_;
				gboolean _tmp22_;
				_tmp18_ = param;
				_tmp19_ = bala_variable_get_variable_type ((BalaVariable*) _tmp18_);
				_tmp20_ = _tmp19_;
				_tmp21_ = bala_data_type_get_value_owned (_tmp20_);
				_tmp22_ = _tmp21_;
				if (_tmp22_) {
					bala_code_writer_write_string (self, "owned ");
				}
			} else {
				BalaParameter* _tmp23_;
				BalaParameterDirection _tmp24_;
				BalaParameterDirection _tmp25_;
				BalaParameter* _tmp29_;
				BalaDataType* _tmp30_;
				BalaDataType* _tmp31_;
				_tmp23_ = param;
				_tmp24_ = bala_parameter_get_direction (_tmp23_);
				_tmp25_ = _tmp24_;
				if (_tmp25_ == BALA_PARAMETER_DIRECTION_REF) {
					bala_code_writer_write_string (self, "ref ");
				} else {
					BalaParameter* _tmp26_;
					BalaParameterDirection _tmp27_;
					BalaParameterDirection _tmp28_;
					_tmp26_ = param;
					_tmp27_ = bala_parameter_get_direction (_tmp26_);
					_tmp28_ = _tmp27_;
					if (_tmp28_ == BALA_PARAMETER_DIRECTION_OUT) {
						bala_code_writer_write_string (self, "out ");
					}
				}
				_tmp29_ = param;
				_tmp30_ = bala_variable_get_variable_type ((BalaVariable*) _tmp29_);
				_tmp31_ = _tmp30_;
				if (bala_data_type_is_weak (_tmp31_)) {
					bala_code_writer_write_string (self, "unowned ");
				}
			}
			_tmp32_ = param;
			_tmp33_ = bala_variable_get_variable_type ((BalaVariable*) _tmp32_);
			_tmp34_ = _tmp33_;
			bala_code_writer_write_type (self, _tmp34_);
			bala_code_writer_write_string (self, " ");
			_tmp35_ = param;
			_tmp36_ = bala_symbol_get_name ((BalaSymbol*) _tmp35_);
			_tmp37_ = _tmp36_;
			bala_code_writer_write_identifier (self, _tmp37_);
			_tmp38_ = param;
			_tmp39_ = bala_variable_get_variable_type ((BalaVariable*) _tmp38_);
			_tmp40_ = _tmp39_;
			bala_code_writer_write_type_suffix (self, _tmp40_);
			_tmp41_ = param;
			_tmp42_ = bala_variable_get_initializer ((BalaVariable*) _tmp41_);
			_tmp43_ = _tmp42_;
			if (_tmp43_ != NULL) {
				BalaParameter* _tmp44_;
				BalaExpression* _tmp45_;
				BalaExpression* _tmp46_;
				bala_code_writer_write_string (self, " = ");
				_tmp44_ = param;
				_tmp45_ = bala_variable_get_initializer ((BalaVariable*) _tmp44_);
				_tmp46_ = _tmp45_;
				bala_code_node_accept ((BalaCodeNode*) _tmp46_, (BalaCodeVisitor*) self);
			}
			_tmp47_ = i;
			i = _tmp47_ + 1;
			_bala_code_node_unref0 (param);
		}
		_bala_iterable_unref0 (_param_list);
	}
	bala_code_writer_write_string (self, ")");
}

static void
bala_code_writer_real_visit_delegate (BalaCodeVisitor* base,
                                      BalaDelegate* cb)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	BalaCodeContext* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	BalaDataType* _tmp10_;
	BalaDataType* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	BalaList* _tmp14_;
	BalaList* _tmp15_;
	BalaArrayList* error_types = NULL;
	GEqualFunc _tmp16_;
	BalaArrayList* _tmp17_;
	BalaArrayList* _tmp18_;
	BalaArrayList* _tmp19_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (cb != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) cb);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) cb)) {
		return;
	}
	_tmp3_ = self->priv->context;
	_tmp4_ = bala_code_context_get_bapi_comments (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) cb);
		_tmp7_ = _tmp6_;
		_tmp2_ = _tmp7_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaComment* _tmp8_;
		BalaComment* _tmp9_;
		_tmp8_ = bala_symbol_get_comment ((BalaSymbol*) cb);
		_tmp9_ = _tmp8_;
		bala_code_writer_write_comment (self, _tmp9_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) cb);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) cb);
	bala_code_writer_write_string (self, "delegate ");
	_tmp10_ = bala_callable_get_return_type ((BalaCallable*) cb);
	_tmp11_ = _tmp10_;
	bala_code_writer_write_return_type (self, _tmp11_);
	bala_code_writer_write_string (self, " ");
	_tmp12_ = bala_symbol_get_name ((BalaSymbol*) cb);
	_tmp13_ = _tmp12_;
	bala_code_writer_write_identifier (self, _tmp13_);
	_tmp14_ = bala_delegate_get_type_parameters (cb);
	bala_code_writer_write_type_parameters (self, _tmp14_);
	bala_code_writer_write_string (self, " ");
	_tmp15_ = bala_callable_get_parameters ((BalaCallable*) cb);
	bala_code_writer_write_params (self, _tmp15_);
	_tmp16_ = g_direct_equal;
	_tmp17_ = bala_array_list_new (BALA_TYPE_DATA_TYPE, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, _tmp16_);
	error_types = _tmp17_;
	_tmp18_ = error_types;
	bala_code_node_get_error_types ((BalaCodeNode*) cb, (BalaCollection*) _tmp18_, NULL);
	_tmp19_ = error_types;
	bala_code_writer_write_error_domains (self, (BalaList*) _tmp19_);
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
	_bala_iterable_unref0 (error_types);
}

static void
bala_code_writer_real_visit_constructor (BalaCodeVisitor* base,
                                         BalaConstructor* c)
{
	BalaCodeWriter * self;
	BalaCodeWriterType _tmp0_;
	gboolean _tmp1_ = FALSE;
	BalaCodeContext* _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp4_;
	BalaMemberBinding _tmp9_;
	BalaMemberBinding _tmp10_;
	BalaBlock* _tmp13_;
	BalaBlock* _tmp14_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (c != NULL);
	_tmp0_ = self->priv->type;
	if (_tmp0_ != BALA_CODE_WRITER_TYPE_DUMP) {
		return;
	}
	_tmp2_ = self->priv->context;
	_tmp3_ = bala_code_context_get_bapi_comments (_tmp2_);
	_tmp4_ = _tmp3_;
	if (_tmp4_) {
		BalaComment* _tmp5_;
		BalaComment* _tmp6_;
		_tmp5_ = bala_symbol_get_comment ((BalaSymbol*) c);
		_tmp6_ = _tmp5_;
		_tmp1_ = _tmp6_ != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		BalaComment* _tmp7_;
		BalaComment* _tmp8_;
		_tmp7_ = bala_symbol_get_comment ((BalaSymbol*) c);
		_tmp8_ = _tmp7_;
		bala_code_writer_write_comment (self, _tmp8_);
	}
	bala_code_writer_write_indent (self);
	_tmp9_ = bala_constructor_get_binding (c);
	_tmp10_ = _tmp9_;
	if (_tmp10_ == BALA_MEMBER_BINDING_STATIC) {
		bala_code_writer_write_string (self, "static ");
	} else {
		BalaMemberBinding _tmp11_;
		BalaMemberBinding _tmp12_;
		_tmp11_ = bala_constructor_get_binding (c);
		_tmp12_ = _tmp11_;
		if (_tmp12_ == BALA_MEMBER_BINDING_CLASS) {
			bala_code_writer_write_string (self, "class ");
		}
	}
	bala_code_writer_write_string (self, "construct");
	_tmp13_ = bala_subroutine_get_body ((BalaSubroutine*) c);
	_tmp14_ = _tmp13_;
	bala_code_writer_write_code_block (self, _tmp14_);
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_destructor (BalaCodeVisitor* base,
                                        BalaDestructor* d)
{
	BalaCodeWriter * self;
	BalaCodeWriterType _tmp0_;
	gboolean _tmp1_ = FALSE;
	BalaCodeContext* _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp4_;
	BalaMemberBinding _tmp9_;
	BalaMemberBinding _tmp10_;
	BalaTypeSymbol* datatype = NULL;
	BalaSymbol* _tmp13_;
	BalaSymbol* _tmp14_;
	BalaTypeSymbol* _tmp15_;
	BalaTypeSymbol* _tmp16_;
	const gchar* _tmp17_;
	const gchar* _tmp18_;
	BalaBlock* _tmp19_;
	BalaBlock* _tmp20_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (d != NULL);
	_tmp0_ = self->priv->type;
	if (_tmp0_ != BALA_CODE_WRITER_TYPE_DUMP) {
		return;
	}
	_tmp2_ = self->priv->context;
	_tmp3_ = bala_code_context_get_bapi_comments (_tmp2_);
	_tmp4_ = _tmp3_;
	if (_tmp4_) {
		BalaComment* _tmp5_;
		BalaComment* _tmp6_;
		_tmp5_ = bala_symbol_get_comment ((BalaSymbol*) d);
		_tmp6_ = _tmp5_;
		_tmp1_ = _tmp6_ != NULL;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		BalaComment* _tmp7_;
		BalaComment* _tmp8_;
		_tmp7_ = bala_symbol_get_comment ((BalaSymbol*) d);
		_tmp8_ = _tmp7_;
		bala_code_writer_write_comment (self, _tmp8_);
	}
	bala_code_writer_write_indent (self);
	_tmp9_ = bala_destructor_get_binding (d);
	_tmp10_ = _tmp9_;
	if (_tmp10_ == BALA_MEMBER_BINDING_STATIC) {
		bala_code_writer_write_string (self, "static ");
	} else {
		BalaMemberBinding _tmp11_;
		BalaMemberBinding _tmp12_;
		_tmp11_ = bala_destructor_get_binding (d);
		_tmp12_ = _tmp11_;
		if (_tmp12_ == BALA_MEMBER_BINDING_CLASS) {
			bala_code_writer_write_string (self, "class ");
		}
	}
	bala_code_writer_write_string (self, "~");
	_tmp13_ = bala_symbol_get_parent_symbol ((BalaSymbol*) d);
	_tmp14_ = _tmp13_;
	_tmp15_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, BALA_TYPE_TYPESYMBOL, BalaTypeSymbol));
	datatype = _tmp15_;
	_tmp16_ = datatype;
	_tmp17_ = bala_symbol_get_name ((BalaSymbol*) _tmp16_);
	_tmp18_ = _tmp17_;
	bala_code_writer_write_identifier (self, _tmp18_);
	bala_code_writer_write_string (self, " () ");
	_tmp19_ = bala_subroutine_get_body ((BalaSubroutine*) d);
	_tmp20_ = _tmp19_;
	bala_code_writer_write_code_block (self, _tmp20_);
	bala_code_writer_write_newline (self);
	_bala_code_node_unref0 (datatype);
}

static void
bala_code_writer_real_visit_method (BalaCodeVisitor* base,
                                    BalaMethod* m)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp12_ = FALSE;
	BalaCodeContext* _tmp13_;
	gboolean _tmp14_;
	gboolean _tmp15_;
	BalaList* _tmp51_;
	BalaArrayList* error_types = NULL;
	GEqualFunc _tmp52_;
	BalaArrayList* _tmp53_;
	BalaArrayList* _tmp54_;
	BalaArrayList* _tmp55_;
	BalaBlock* _tmp56_;
	BalaBlock* _tmp57_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (m != NULL);
	_tmp0_ = bala_symbol_get_external_package ((BalaSymbol*) m);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		return;
	}
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) m)) {
		_tmp2_ = TRUE;
	} else {
		gboolean _tmp3_ = FALSE;
		gboolean _tmp4_ = FALSE;
		BalaMethod* _tmp5_;
		BalaMethod* _tmp6_;
		_tmp5_ = bala_method_get_base_interface_method (m);
		_tmp6_ = _tmp5_;
		if (_tmp6_ != NULL) {
			gboolean _tmp7_;
			gboolean _tmp8_;
			_tmp7_ = bala_method_get_is_abstract (m);
			_tmp8_ = _tmp7_;
			_tmp4_ = !_tmp8_;
		} else {
			_tmp4_ = FALSE;
		}
		if (_tmp4_) {
			gboolean _tmp9_;
			gboolean _tmp10_;
			_tmp9_ = bala_method_get_is_virtual (m);
			_tmp10_ = _tmp9_;
			_tmp3_ = !_tmp10_;
		} else {
			_tmp3_ = FALSE;
		}
		_tmp2_ = _tmp3_;
	}
	if (_tmp2_) {
		BalaCodeWriterType _tmp11_;
		_tmp11_ = self->priv->type;
		if (_tmp11_ != BALA_CODE_WRITER_TYPE_DUMP) {
			return;
		}
	}
	_tmp13_ = self->priv->context;
	_tmp14_ = bala_code_context_get_bapi_comments (_tmp13_);
	_tmp15_ = _tmp14_;
	if (_tmp15_) {
		BalaComment* _tmp16_;
		BalaComment* _tmp17_;
		_tmp16_ = bala_symbol_get_comment ((BalaSymbol*) m);
		_tmp17_ = _tmp16_;
		_tmp12_ = _tmp17_ != NULL;
	} else {
		_tmp12_ = FALSE;
	}
	if (_tmp12_) {
		BalaComment* _tmp18_;
		BalaComment* _tmp19_;
		_tmp18_ = bala_symbol_get_comment ((BalaSymbol*) m);
		_tmp19_ = _tmp18_;
		bala_code_writer_write_comment (self, _tmp19_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) m);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) m);
	if (BALA_IS_CREATION_METHOD (m)) {
		gboolean _tmp20_;
		gboolean _tmp21_;
		BalaTypeSymbol* datatype = NULL;
		BalaSymbol* _tmp22_;
		BalaSymbol* _tmp23_;
		BalaTypeSymbol* _tmp24_;
		BalaTypeSymbol* _tmp25_;
		const gchar* _tmp26_;
		const gchar* _tmp27_;
		const gchar* _tmp28_;
		const gchar* _tmp29_;
		_tmp20_ = bala_method_get_coroutine (m);
		_tmp21_ = _tmp20_;
		if (_tmp21_) {
			bala_code_writer_write_string (self, "async ");
		}
		_tmp22_ = bala_symbol_get_parent_symbol ((BalaSymbol*) m);
		_tmp23_ = _tmp22_;
		_tmp24_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp23_, BALA_TYPE_TYPESYMBOL, BalaTypeSymbol));
		datatype = _tmp24_;
		_tmp25_ = datatype;
		_tmp26_ = bala_symbol_get_name ((BalaSymbol*) _tmp25_);
		_tmp27_ = _tmp26_;
		bala_code_writer_write_identifier (self, _tmp27_);
		_tmp28_ = bala_symbol_get_name ((BalaSymbol*) m);
		_tmp29_ = _tmp28_;
		if (g_strcmp0 (_tmp29_, ".new") != 0) {
			const gchar* _tmp30_;
			const gchar* _tmp31_;
			bala_code_writer_write_string (self, ".");
			_tmp30_ = bala_symbol_get_name ((BalaSymbol*) m);
			_tmp31_ = _tmp30_;
			bala_code_writer_write_identifier (self, _tmp31_);
		}
		bala_code_writer_write_string (self, " ");
		_bala_code_node_unref0 (datatype);
	} else {
		gboolean _tmp32_;
		gboolean _tmp33_;
		BalaMemberBinding _tmp34_;
		BalaMemberBinding _tmp35_;
		gboolean _tmp44_;
		gboolean _tmp45_;
		BalaDataType* _tmp46_;
		BalaDataType* _tmp47_;
		const gchar* _tmp48_;
		const gchar* _tmp49_;
		BalaList* _tmp50_;
		_tmp32_ = bala_symbol_get_hides ((BalaSymbol*) m);
		_tmp33_ = _tmp32_;
		if (_tmp33_) {
			bala_code_writer_write_string (self, "new ");
		}
		_tmp34_ = bala_method_get_binding (m);
		_tmp35_ = _tmp34_;
		if (_tmp35_ == BALA_MEMBER_BINDING_STATIC) {
			bala_code_writer_write_string (self, "static ");
		} else {
			BalaMemberBinding _tmp36_;
			BalaMemberBinding _tmp37_;
			_tmp36_ = bala_method_get_binding (m);
			_tmp37_ = _tmp36_;
			if (_tmp37_ == BALA_MEMBER_BINDING_CLASS) {
				bala_code_writer_write_string (self, "class ");
			} else {
				gboolean _tmp38_;
				gboolean _tmp39_;
				_tmp38_ = bala_method_get_is_abstract (m);
				_tmp39_ = _tmp38_;
				if (_tmp39_) {
					bala_code_writer_write_string (self, "abstract ");
				} else {
					gboolean _tmp40_;
					gboolean _tmp41_;
					_tmp40_ = bala_method_get_is_virtual (m);
					_tmp41_ = _tmp40_;
					if (_tmp41_) {
						bala_code_writer_write_string (self, "virtual ");
					} else {
						gboolean _tmp42_;
						gboolean _tmp43_;
						_tmp42_ = bala_method_get_overrides (m);
						_tmp43_ = _tmp42_;
						if (_tmp43_) {
							bala_code_writer_write_string (self, "override ");
						}
					}
				}
			}
		}
		_tmp44_ = bala_method_get_coroutine (m);
		_tmp45_ = _tmp44_;
		if (_tmp45_) {
			bala_code_writer_write_string (self, "async ");
		}
		_tmp46_ = bala_callable_get_return_type ((BalaCallable*) m);
		_tmp47_ = _tmp46_;
		bala_code_writer_write_return_type (self, _tmp47_);
		bala_code_writer_write_string (self, " ");
		_tmp48_ = bala_symbol_get_name ((BalaSymbol*) m);
		_tmp49_ = _tmp48_;
		bala_code_writer_write_identifier (self, _tmp49_);
		_tmp50_ = bala_method_get_type_parameters (m);
		bala_code_writer_write_type_parameters (self, _tmp50_);
		bala_code_writer_write_string (self, " ");
	}
	_tmp51_ = bala_callable_get_parameters ((BalaCallable*) m);
	bala_code_writer_write_params (self, _tmp51_);
	_tmp52_ = g_direct_equal;
	_tmp53_ = bala_array_list_new (BALA_TYPE_DATA_TYPE, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, _tmp52_);
	error_types = _tmp53_;
	_tmp54_ = error_types;
	bala_code_node_get_error_types ((BalaCodeNode*) m, (BalaCollection*) _tmp54_, NULL);
	_tmp55_ = error_types;
	bala_code_writer_write_error_domains (self, (BalaList*) _tmp55_);
	_tmp56_ = bala_subroutine_get_body ((BalaSubroutine*) m);
	_tmp57_ = _tmp56_;
	bala_code_writer_write_code_block (self, _tmp57_);
	bala_code_writer_write_newline (self);
	_bala_iterable_unref0 (error_types);
}

static void
bala_code_writer_real_visit_creation_method (BalaCodeVisitor* base,
                                             BalaCreationMethod* m)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (m != NULL);
	bala_code_visitor_visit_method ((BalaCodeVisitor*) self, (BalaMethod*) m);
}

static void
bala_code_writer_real_visit_property (BalaCodeVisitor* base,
                                      BalaProperty* prop)
{
	BalaCodeWriter * self;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp9_ = FALSE;
	BalaCodeContext* _tmp10_;
	gboolean _tmp11_;
	gboolean _tmp12_;
	gboolean _tmp17_;
	gboolean _tmp18_;
	BalaMemberBinding _tmp19_;
	BalaMemberBinding _tmp20_;
	BalaDataType* _tmp27_;
	BalaDataType* _tmp28_;
	BalaDataType* _tmp29_;
	BalaDataType* _tmp30_;
	const gchar* _tmp31_;
	const gchar* _tmp32_;
	BalaPropertyAccessor* _tmp33_;
	BalaPropertyAccessor* _tmp34_;
	BalaPropertyAccessor* _tmp49_;
	BalaPropertyAccessor* _tmp50_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (prop != NULL);
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) prop)) {
		_tmp0_ = TRUE;
	} else {
		gboolean _tmp1_ = FALSE;
		gboolean _tmp2_ = FALSE;
		BalaProperty* _tmp3_;
		BalaProperty* _tmp4_;
		_tmp3_ = bala_property_get_base_interface_property (prop);
		_tmp4_ = _tmp3_;
		if (_tmp4_ != NULL) {
			gboolean _tmp5_;
			gboolean _tmp6_;
			_tmp5_ = bala_property_get_is_abstract (prop);
			_tmp6_ = _tmp5_;
			_tmp2_ = !_tmp6_;
		} else {
			_tmp2_ = FALSE;
		}
		if (_tmp2_) {
			gboolean _tmp7_;
			gboolean _tmp8_;
			_tmp7_ = bala_property_get_is_virtual (prop);
			_tmp8_ = _tmp7_;
			_tmp1_ = !_tmp8_;
		} else {
			_tmp1_ = FALSE;
		}
		_tmp0_ = _tmp1_;
	}
	if (_tmp0_) {
		return;
	}
	_tmp10_ = self->priv->context;
	_tmp11_ = bala_code_context_get_bapi_comments (_tmp10_);
	_tmp12_ = _tmp11_;
	if (_tmp12_) {
		BalaComment* _tmp13_;
		BalaComment* _tmp14_;
		_tmp13_ = bala_symbol_get_comment ((BalaSymbol*) prop);
		_tmp14_ = _tmp13_;
		_tmp9_ = _tmp14_ != NULL;
	} else {
		_tmp9_ = FALSE;
	}
	if (_tmp9_) {
		BalaComment* _tmp15_;
		BalaComment* _tmp16_;
		_tmp15_ = bala_symbol_get_comment ((BalaSymbol*) prop);
		_tmp16_ = _tmp15_;
		bala_code_writer_write_comment (self, _tmp16_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) prop);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) prop);
	_tmp17_ = bala_symbol_get_hides ((BalaSymbol*) prop);
	_tmp18_ = _tmp17_;
	if (_tmp18_) {
		bala_code_writer_write_string (self, "new ");
	}
	_tmp19_ = bala_property_get_binding (prop);
	_tmp20_ = _tmp19_;
	if (_tmp20_ == BALA_MEMBER_BINDING_STATIC) {
		bala_code_writer_write_string (self, "static ");
	} else {
		gboolean _tmp21_;
		gboolean _tmp22_;
		_tmp21_ = bala_property_get_is_abstract (prop);
		_tmp22_ = _tmp21_;
		if (_tmp22_) {
			bala_code_writer_write_string (self, "abstract ");
		} else {
			gboolean _tmp23_;
			gboolean _tmp24_;
			_tmp23_ = bala_property_get_is_virtual (prop);
			_tmp24_ = _tmp23_;
			if (_tmp24_) {
				bala_code_writer_write_string (self, "virtual ");
			} else {
				gboolean _tmp25_;
				gboolean _tmp26_;
				_tmp25_ = bala_property_get_overrides (prop);
				_tmp26_ = _tmp25_;
				if (_tmp26_) {
					bala_code_writer_write_string (self, "override ");
				}
			}
		}
	}
	_tmp27_ = bala_property_get_property_type (prop);
	_tmp28_ = _tmp27_;
	if (bala_data_type_is_weak (_tmp28_)) {
		bala_code_writer_write_string (self, "weak ");
	}
	_tmp29_ = bala_property_get_property_type (prop);
	_tmp30_ = _tmp29_;
	bala_code_writer_write_type (self, _tmp30_);
	bala_code_writer_write_string (self, " ");
	_tmp31_ = bala_symbol_get_name ((BalaSymbol*) prop);
	_tmp32_ = _tmp31_;
	bala_code_writer_write_identifier (self, _tmp32_);
	bala_code_writer_write_string (self, " {");
	_tmp33_ = bala_property_get_get_accessor (prop);
	_tmp34_ = _tmp33_;
	if (_tmp34_ != NULL) {
		BalaPropertyAccessor* _tmp35_;
		BalaPropertyAccessor* _tmp36_;
		BalaPropertyAccessor* _tmp37_;
		BalaPropertyAccessor* _tmp38_;
		BalaPropertyAccessor* _tmp39_;
		BalaPropertyAccessor* _tmp40_;
		BalaDataType* _tmp41_;
		BalaDataType* _tmp42_;
		gboolean _tmp43_;
		gboolean _tmp44_;
		BalaPropertyAccessor* _tmp45_;
		BalaPropertyAccessor* _tmp46_;
		BalaBlock* _tmp47_;
		BalaBlock* _tmp48_;
		_tmp35_ = bala_property_get_get_accessor (prop);
		_tmp36_ = _tmp35_;
		bala_code_writer_write_attributes (self, (BalaCodeNode*) _tmp36_);
		_tmp37_ = bala_property_get_get_accessor (prop);
		_tmp38_ = _tmp37_;
		bala_code_writer_write_property_accessor_accessibility (self, (BalaSymbol*) _tmp38_);
		_tmp39_ = bala_property_get_get_accessor (prop);
		_tmp40_ = _tmp39_;
		_tmp41_ = bala_property_accessor_get_value_type (_tmp40_);
		_tmp42_ = _tmp41_;
		_tmp43_ = bala_data_type_get_value_owned (_tmp42_);
		_tmp44_ = _tmp43_;
		if (_tmp44_) {
			bala_code_writer_write_string (self, " owned");
		}
		bala_code_writer_write_string (self, " get");
		_tmp45_ = bala_property_get_get_accessor (prop);
		_tmp46_ = _tmp45_;
		_tmp47_ = bala_subroutine_get_body ((BalaSubroutine*) _tmp46_);
		_tmp48_ = _tmp47_;
		bala_code_writer_write_code_block (self, _tmp48_);
	}
	_tmp49_ = bala_property_get_set_accessor (prop);
	_tmp50_ = _tmp49_;
	if (_tmp50_ != NULL) {
		BalaPropertyAccessor* _tmp51_;
		BalaPropertyAccessor* _tmp52_;
		BalaPropertyAccessor* _tmp53_;
		BalaPropertyAccessor* _tmp54_;
		BalaPropertyAccessor* _tmp55_;
		BalaPropertyAccessor* _tmp56_;
		BalaDataType* _tmp57_;
		BalaDataType* _tmp58_;
		gboolean _tmp59_;
		gboolean _tmp60_;
		BalaPropertyAccessor* _tmp61_;
		BalaPropertyAccessor* _tmp62_;
		gboolean _tmp63_;
		gboolean _tmp64_;
		BalaPropertyAccessor* _tmp65_;
		BalaPropertyAccessor* _tmp66_;
		gboolean _tmp67_;
		gboolean _tmp68_;
		BalaPropertyAccessor* _tmp69_;
		BalaPropertyAccessor* _tmp70_;
		BalaBlock* _tmp71_;
		BalaBlock* _tmp72_;
		_tmp51_ = bala_property_get_set_accessor (prop);
		_tmp52_ = _tmp51_;
		bala_code_writer_write_attributes (self, (BalaCodeNode*) _tmp52_);
		_tmp53_ = bala_property_get_set_accessor (prop);
		_tmp54_ = _tmp53_;
		bala_code_writer_write_property_accessor_accessibility (self, (BalaSymbol*) _tmp54_);
		_tmp55_ = bala_property_get_set_accessor (prop);
		_tmp56_ = _tmp55_;
		_tmp57_ = bala_property_accessor_get_value_type (_tmp56_);
		_tmp58_ = _tmp57_;
		_tmp59_ = bala_data_type_get_value_owned (_tmp58_);
		_tmp60_ = _tmp59_;
		if (_tmp60_) {
			bala_code_writer_write_string (self, " owned");
		}
		_tmp61_ = bala_property_get_set_accessor (prop);
		_tmp62_ = _tmp61_;
		_tmp63_ = bala_property_accessor_get_writable (_tmp62_);
		_tmp64_ = _tmp63_;
		if (_tmp64_) {
			bala_code_writer_write_string (self, " set");
		}
		_tmp65_ = bala_property_get_set_accessor (prop);
		_tmp66_ = _tmp65_;
		_tmp67_ = bala_property_accessor_get_construction (_tmp66_);
		_tmp68_ = _tmp67_;
		if (_tmp68_) {
			bala_code_writer_write_string (self, " construct");
		}
		_tmp69_ = bala_property_get_set_accessor (prop);
		_tmp70_ = _tmp69_;
		_tmp71_ = bala_subroutine_get_body ((BalaSubroutine*) _tmp70_);
		_tmp72_ = _tmp71_;
		bala_code_writer_write_code_block (self, _tmp72_);
	}
	bala_code_writer_write_string (self, " }");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_signal (BalaCodeVisitor* base,
                                    BalaSignal* sig)
{
	BalaCodeWriter * self;
	gboolean _tmp0_ = FALSE;
	BalaCodeContext* _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp8_;
	gboolean _tmp9_;
	gboolean _tmp10_;
	gboolean _tmp11_;
	BalaDataType* _tmp12_;
	BalaDataType* _tmp13_;
	const gchar* _tmp14_;
	const gchar* _tmp15_;
	BalaList* _tmp16_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (sig != NULL);
	if (!bala_code_writer_check_accessibility (self, (BalaSymbol*) sig)) {
		return;
	}
	_tmp1_ = self->priv->context;
	_tmp2_ = bala_code_context_get_bapi_comments (_tmp1_);
	_tmp3_ = _tmp2_;
	if (_tmp3_) {
		BalaComment* _tmp4_;
		BalaComment* _tmp5_;
		_tmp4_ = bala_symbol_get_comment ((BalaSymbol*) sig);
		_tmp5_ = _tmp4_;
		_tmp0_ = _tmp5_ != NULL;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		BalaComment* _tmp6_;
		BalaComment* _tmp7_;
		_tmp6_ = bala_symbol_get_comment ((BalaSymbol*) sig);
		_tmp7_ = _tmp6_;
		bala_code_writer_write_comment (self, _tmp7_);
	}
	bala_code_writer_write_attributes (self, (BalaCodeNode*) sig);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_accessibility (self, (BalaSymbol*) sig);
	_tmp8_ = bala_symbol_get_hides ((BalaSymbol*) sig);
	_tmp9_ = _tmp8_;
	if (_tmp9_) {
		bala_code_writer_write_string (self, "new ");
	}
	_tmp10_ = bala_signal_get_is_virtual (sig);
	_tmp11_ = _tmp10_;
	if (_tmp11_) {
		bala_code_writer_write_string (self, "virtual ");
	}
	bala_code_writer_write_string (self, "signal ");
	_tmp12_ = bala_callable_get_return_type ((BalaCallable*) sig);
	_tmp13_ = _tmp12_;
	bala_code_writer_write_return_type (self, _tmp13_);
	bala_code_writer_write_string (self, " ");
	_tmp14_ = bala_symbol_get_name ((BalaSymbol*) sig);
	_tmp15_ = _tmp14_;
	bala_code_writer_write_identifier (self, _tmp15_);
	bala_code_writer_write_string (self, " ");
	_tmp16_ = bala_callable_get_parameters ((BalaCallable*) sig);
	bala_code_writer_write_params (self, _tmp16_);
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_block (BalaCodeVisitor* base,
                                   BalaBlock* b)
{
	BalaCodeWriter * self;
	BalaCodeNode* _tmp9_;
	BalaCodeNode* _tmp10_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (b != NULL);
	bala_code_writer_write_begin_block (self);
	{
		BalaList* _stmt_list = NULL;
		BalaList* _tmp0_;
		gint _stmt_size = 0;
		BalaList* _tmp1_;
		gint _tmp2_;
		gint _tmp3_;
		gint _stmt_index = 0;
		_tmp0_ = bala_block_get_statements (b);
		_stmt_list = _tmp0_;
		_tmp1_ = _stmt_list;
		_tmp2_ = bala_collection_get_size ((BalaCollection*) _tmp1_);
		_tmp3_ = _tmp2_;
		_stmt_size = _tmp3_;
		_stmt_index = -1;
		while (TRUE) {
			gint _tmp4_;
			gint _tmp5_;
			BalaStatement* stmt = NULL;
			BalaList* _tmp6_;
			gpointer _tmp7_;
			BalaStatement* _tmp8_;
			_stmt_index = _stmt_index + 1;
			_tmp4_ = _stmt_index;
			_tmp5_ = _stmt_size;
			if (!(_tmp4_ < _tmp5_)) {
				break;
			}
			_tmp6_ = _stmt_list;
			_tmp7_ = bala_list_get (_tmp6_, _stmt_index);
			stmt = (BalaStatement*) _tmp7_;
			_tmp8_ = stmt;
			bala_code_node_accept ((BalaCodeNode*) _tmp8_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (stmt);
		}
		_bala_iterable_unref0 (_stmt_list);
	}
	bala_code_writer_write_end_block (self);
	_tmp9_ = bala_code_node_get_parent_node ((BalaCodeNode*) b);
	_tmp10_ = _tmp9_;
	if (BALA_IS_BLOCK (_tmp10_)) {
		bala_code_writer_write_newline (self);
	}
}

static void
bala_code_writer_real_visit_empty_statement (BalaCodeVisitor* base,
                                             BalaEmptyStatement* stmt)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
}

static void
bala_code_writer_real_visit_declaration_statement (BalaCodeVisitor* base,
                                                   BalaDeclarationStatement* stmt)
{
	BalaCodeWriter * self;
	BalaSymbol* _tmp0_;
	BalaSymbol* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	_tmp0_ = bala_declaration_statement_get_declaration (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_local_variable (BalaCodeVisitor* base,
                                            BalaLocalVariable* local)
{
	BalaCodeWriter * self;
	BalaDataType* _tmp0_;
	BalaDataType* _tmp1_;
	BalaDataType* _tmp2_;
	BalaDataType* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	BalaDataType* _tmp6_;
	BalaDataType* _tmp7_;
	BalaExpression* _tmp8_;
	BalaExpression* _tmp9_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (local != NULL);
	_tmp0_ = bala_variable_get_variable_type ((BalaVariable*) local);
	_tmp1_ = _tmp0_;
	if (bala_data_type_is_weak (_tmp1_)) {
		bala_code_writer_write_string (self, "unowned ");
	}
	_tmp2_ = bala_variable_get_variable_type ((BalaVariable*) local);
	_tmp3_ = _tmp2_;
	bala_code_writer_write_type (self, _tmp3_);
	bala_code_writer_write_string (self, " ");
	_tmp4_ = bala_symbol_get_name ((BalaSymbol*) local);
	_tmp5_ = _tmp4_;
	bala_code_writer_write_identifier (self, _tmp5_);
	_tmp6_ = bala_variable_get_variable_type ((BalaVariable*) local);
	_tmp7_ = _tmp6_;
	bala_code_writer_write_type_suffix (self, _tmp7_);
	_tmp8_ = bala_variable_get_initializer ((BalaVariable*) local);
	_tmp9_ = _tmp8_;
	if (_tmp9_ != NULL) {
		BalaExpression* _tmp10_;
		BalaExpression* _tmp11_;
		bala_code_writer_write_string (self, " = ");
		_tmp10_ = bala_variable_get_initializer ((BalaVariable*) local);
		_tmp11_ = _tmp10_;
		bala_code_node_accept ((BalaCodeNode*) _tmp11_, (BalaCodeVisitor*) self);
	}
}

static void
bala_code_writer_real_visit_initializer_list (BalaCodeVisitor* base,
                                              BalaInitializerList* list)
{
	BalaCodeWriter * self;
	gboolean first = FALSE;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (list != NULL);
	bala_code_writer_write_string (self, "{");
	first = TRUE;
	{
		BalaList* _initializer_list = NULL;
		BalaList* _tmp0_;
		BalaList* _tmp1_;
		gint _initializer_size = 0;
		BalaList* _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		gint _initializer_index = 0;
		_tmp0_ = bala_initializer_list_get_initializers (list);
		_tmp1_ = _bala_iterable_ref0 (_tmp0_);
		_initializer_list = _tmp1_;
		_tmp2_ = _initializer_list;
		_tmp3_ = bala_collection_get_size ((BalaCollection*) _tmp2_);
		_tmp4_ = _tmp3_;
		_initializer_size = _tmp4_;
		_initializer_index = -1;
		while (TRUE) {
			gint _tmp5_;
			gint _tmp6_;
			BalaExpression* initializer = NULL;
			BalaList* _tmp7_;
			gpointer _tmp8_;
			BalaExpression* _tmp9_;
			_initializer_index = _initializer_index + 1;
			_tmp5_ = _initializer_index;
			_tmp6_ = _initializer_size;
			if (!(_tmp5_ < _tmp6_)) {
				break;
			}
			_tmp7_ = _initializer_list;
			_tmp8_ = bala_list_get (_tmp7_, _initializer_index);
			initializer = (BalaExpression*) _tmp8_;
			if (!first) {
				bala_code_writer_write_string (self, ", ");
			} else {
				bala_code_writer_write_string (self, " ");
			}
			first = FALSE;
			_tmp9_ = initializer;
			bala_code_node_accept ((BalaCodeNode*) _tmp9_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (initializer);
		}
		_bala_iterable_unref0 (_initializer_list);
	}
	bala_code_writer_write_string (self, " }");
}

static void
bala_code_writer_real_visit_expression_statement (BalaCodeVisitor* base,
                                                  BalaExpressionStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	_tmp0_ = bala_expression_statement_get_expression (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_if_statement (BalaCodeVisitor* base,
                                          BalaIfStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaBlock* _tmp2_;
	BalaBlock* _tmp3_;
	BalaBlock* _tmp4_;
	BalaBlock* _tmp5_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "if (");
	_tmp0_ = bala_if_statement_get_condition (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ")");
	_tmp2_ = bala_if_statement_get_true_statement (stmt);
	_tmp3_ = _tmp2_;
	bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	_tmp4_ = bala_if_statement_get_false_statement (stmt);
	_tmp5_ = _tmp4_;
	if (_tmp5_ != NULL) {
		BalaBlock* _tmp6_;
		BalaBlock* _tmp7_;
		bala_code_writer_write_string (self, " else");
		_tmp6_ = bala_if_statement_get_false_statement (stmt);
		_tmp7_ = _tmp6_;
		bala_code_node_accept ((BalaCodeNode*) _tmp7_, (BalaCodeVisitor*) self);
	}
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_switch_statement (BalaCodeVisitor* base,
                                              BalaSwitchStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "switch (");
	_tmp0_ = bala_switch_statement_get_expression (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ") {");
	bala_code_writer_write_newline (self);
	{
		BalaList* _section_list = NULL;
		BalaList* _tmp2_;
		BalaList* _tmp3_;
		gint _section_size = 0;
		BalaList* _tmp4_;
		gint _tmp5_;
		gint _tmp6_;
		gint _section_index = 0;
		_tmp2_ = bala_switch_statement_get_sections (stmt);
		_tmp3_ = _bala_iterable_ref0 (_tmp2_);
		_section_list = _tmp3_;
		_tmp4_ = _section_list;
		_tmp5_ = bala_collection_get_size ((BalaCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		_section_size = _tmp6_;
		_section_index = -1;
		while (TRUE) {
			gint _tmp7_;
			gint _tmp8_;
			BalaSwitchSection* section = NULL;
			BalaList* _tmp9_;
			gpointer _tmp10_;
			BalaSwitchSection* _tmp11_;
			_section_index = _section_index + 1;
			_tmp7_ = _section_index;
			_tmp8_ = _section_size;
			if (!(_tmp7_ < _tmp8_)) {
				break;
			}
			_tmp9_ = _section_list;
			_tmp10_ = bala_list_get (_tmp9_, _section_index);
			section = (BalaSwitchSection*) _tmp10_;
			_tmp11_ = section;
			bala_code_node_accept ((BalaCodeNode*) _tmp11_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (section);
		}
		_bala_iterable_unref0 (_section_list);
	}
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "}");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_switch_section (BalaCodeVisitor* base,
                                            BalaSwitchSection* section)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (section != NULL);
	{
		BalaList* _label_list = NULL;
		BalaList* _tmp0_;
		BalaList* _tmp1_;
		gint _label_size = 0;
		BalaList* _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		gint _label_index = 0;
		_tmp0_ = bala_switch_section_get_labels (section);
		_tmp1_ = _bala_iterable_ref0 (_tmp0_);
		_label_list = _tmp1_;
		_tmp2_ = _label_list;
		_tmp3_ = bala_collection_get_size ((BalaCollection*) _tmp2_);
		_tmp4_ = _tmp3_;
		_label_size = _tmp4_;
		_label_index = -1;
		while (TRUE) {
			gint _tmp5_;
			gint _tmp6_;
			BalaSwitchLabel* label = NULL;
			BalaList* _tmp7_;
			gpointer _tmp8_;
			BalaSwitchLabel* _tmp9_;
			_label_index = _label_index + 1;
			_tmp5_ = _label_index;
			_tmp6_ = _label_size;
			if (!(_tmp5_ < _tmp6_)) {
				break;
			}
			_tmp7_ = _label_list;
			_tmp8_ = bala_list_get (_tmp7_, _label_index);
			label = (BalaSwitchLabel*) _tmp8_;
			_tmp9_ = label;
			bala_code_node_accept ((BalaCodeNode*) _tmp9_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (label);
		}
		_bala_iterable_unref0 (_label_list);
	}
	bala_code_visitor_visit_block ((BalaCodeVisitor*) self, (BalaBlock*) section);
}

static void
bala_code_writer_real_visit_switch_label (BalaCodeVisitor* base,
                                          BalaSwitchLabel* label)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (label != NULL);
	_tmp0_ = bala_switch_label_get_expression (label);
	_tmp1_ = _tmp0_;
	if (_tmp1_ != NULL) {
		BalaExpression* _tmp2_;
		BalaExpression* _tmp3_;
		bala_code_writer_write_indent (self);
		bala_code_writer_write_string (self, "case ");
		_tmp2_ = bala_switch_label_get_expression (label);
		_tmp3_ = _tmp2_;
		bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
		bala_code_writer_write_string (self, ":");
		bala_code_writer_write_newline (self);
	} else {
		bala_code_writer_write_indent (self);
		bala_code_writer_write_string (self, "default:");
		bala_code_writer_write_newline (self);
	}
}

static void
bala_code_writer_real_visit_loop (BalaCodeVisitor* base,
                                  BalaLoop* stmt)
{
	BalaCodeWriter * self;
	BalaBlock* _tmp0_;
	BalaBlock* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "loop");
	_tmp0_ = bala_loop_get_body (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_while_statement (BalaCodeVisitor* base,
                                             BalaWhileStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaBlock* _tmp2_;
	BalaBlock* _tmp3_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "while (");
	_tmp0_ = bala_while_statement_get_condition (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ")");
	_tmp2_ = bala_while_statement_get_body (stmt);
	_tmp3_ = _tmp2_;
	bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_do_statement (BalaCodeVisitor* base,
                                          BalaDoStatement* stmt)
{
	BalaCodeWriter * self;
	BalaBlock* _tmp0_;
	BalaBlock* _tmp1_;
	BalaExpression* _tmp2_;
	BalaExpression* _tmp3_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "do");
	_tmp0_ = bala_do_statement_get_body (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, "while (");
	_tmp2_ = bala_do_statement_get_condition (stmt);
	_tmp3_ = _tmp2_;
	bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ");");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_for_statement (BalaCodeVisitor* base,
                                           BalaForStatement* stmt)
{
	BalaCodeWriter * self;
	gboolean first = FALSE;
	BalaExpression* _tmp10_;
	BalaExpression* _tmp11_;
	BalaBlock* _tmp22_;
	BalaBlock* _tmp23_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "for (");
	first = TRUE;
	{
		BalaList* _initializer_list = NULL;
		BalaList* _tmp0_;
		BalaList* _tmp1_;
		gint _initializer_size = 0;
		BalaList* _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		gint _initializer_index = 0;
		_tmp0_ = bala_for_statement_get_initializer (stmt);
		_tmp1_ = _bala_iterable_ref0 (_tmp0_);
		_initializer_list = _tmp1_;
		_tmp2_ = _initializer_list;
		_tmp3_ = bala_collection_get_size ((BalaCollection*) _tmp2_);
		_tmp4_ = _tmp3_;
		_initializer_size = _tmp4_;
		_initializer_index = -1;
		while (TRUE) {
			gint _tmp5_;
			gint _tmp6_;
			BalaExpression* initializer = NULL;
			BalaList* _tmp7_;
			gpointer _tmp8_;
			BalaExpression* _tmp9_;
			_initializer_index = _initializer_index + 1;
			_tmp5_ = _initializer_index;
			_tmp6_ = _initializer_size;
			if (!(_tmp5_ < _tmp6_)) {
				break;
			}
			_tmp7_ = _initializer_list;
			_tmp8_ = bala_list_get (_tmp7_, _initializer_index);
			initializer = (BalaExpression*) _tmp8_;
			if (!first) {
				bala_code_writer_write_string (self, ", ");
			}
			first = FALSE;
			_tmp9_ = initializer;
			bala_code_node_accept ((BalaCodeNode*) _tmp9_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (initializer);
		}
		_bala_iterable_unref0 (_initializer_list);
	}
	bala_code_writer_write_string (self, "; ");
	_tmp10_ = bala_for_statement_get_condition (stmt);
	_tmp11_ = _tmp10_;
	bala_code_node_accept ((BalaCodeNode*) _tmp11_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, "; ");
	first = TRUE;
	{
		BalaList* _iterator_list = NULL;
		BalaList* _tmp12_;
		BalaList* _tmp13_;
		gint _iterator_size = 0;
		BalaList* _tmp14_;
		gint _tmp15_;
		gint _tmp16_;
		gint _iterator_index = 0;
		_tmp12_ = bala_for_statement_get_iterator (stmt);
		_tmp13_ = _bala_iterable_ref0 (_tmp12_);
		_iterator_list = _tmp13_;
		_tmp14_ = _iterator_list;
		_tmp15_ = bala_collection_get_size ((BalaCollection*) _tmp14_);
		_tmp16_ = _tmp15_;
		_iterator_size = _tmp16_;
		_iterator_index = -1;
		while (TRUE) {
			gint _tmp17_;
			gint _tmp18_;
			BalaExpression* iterator = NULL;
			BalaList* _tmp19_;
			gpointer _tmp20_;
			BalaExpression* _tmp21_;
			_iterator_index = _iterator_index + 1;
			_tmp17_ = _iterator_index;
			_tmp18_ = _iterator_size;
			if (!(_tmp17_ < _tmp18_)) {
				break;
			}
			_tmp19_ = _iterator_list;
			_tmp20_ = bala_list_get (_tmp19_, _iterator_index);
			iterator = (BalaExpression*) _tmp20_;
			if (!first) {
				bala_code_writer_write_string (self, ", ");
			}
			first = FALSE;
			_tmp21_ = iterator;
			bala_code_node_accept ((BalaCodeNode*) _tmp21_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (iterator);
		}
		_bala_iterable_unref0 (_iterator_list);
	}
	bala_code_writer_write_string (self, ")");
	_tmp22_ = bala_for_statement_get_body (stmt);
	_tmp23_ = _tmp22_;
	bala_code_node_accept ((BalaCodeNode*) _tmp23_, (BalaCodeVisitor*) self);
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_foreach_statement (BalaCodeVisitor* base,
                                               BalaForeachStatement* stmt)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
}

static void
bala_code_writer_real_visit_break_statement (BalaCodeVisitor* base,
                                             BalaBreakStatement* stmt)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "break;");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_continue_statement (BalaCodeVisitor* base,
                                                BalaContinueStatement* stmt)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "continue;");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_return_statement (BalaCodeVisitor* base,
                                              BalaReturnStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "return");
	_tmp0_ = bala_return_statement_get_return_expression (stmt);
	_tmp1_ = _tmp0_;
	if (_tmp1_ != NULL) {
		BalaExpression* _tmp2_;
		BalaExpression* _tmp3_;
		bala_code_writer_write_string (self, " ");
		_tmp2_ = bala_return_statement_get_return_expression (stmt);
		_tmp3_ = _tmp2_;
		bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	}
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_yield_statement (BalaCodeVisitor* base,
                                             BalaYieldStatement* y)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (y != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "yield");
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_throw_statement (BalaCodeVisitor* base,
                                             BalaThrowStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "throw");
	_tmp0_ = bala_throw_statement_get_error_expression (stmt);
	_tmp1_ = _tmp0_;
	if (_tmp1_ != NULL) {
		BalaExpression* _tmp2_;
		BalaExpression* _tmp3_;
		bala_code_writer_write_string (self, " ");
		_tmp2_ = bala_throw_statement_get_error_expression (stmt);
		_tmp3_ = _tmp2_;
		bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	}
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_try_statement (BalaCodeVisitor* base,
                                           BalaTryStatement* stmt)
{
	BalaCodeWriter * self;
	BalaBlock* _tmp0_;
	BalaBlock* _tmp1_;
	BalaBlock* _tmp12_;
	BalaBlock* _tmp13_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "try");
	_tmp0_ = bala_try_statement_get_body (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	{
		BalaList* _clause_list = NULL;
		BalaList* _tmp2_;
		BalaList* _tmp3_;
		gint _clause_size = 0;
		BalaList* _tmp4_;
		gint _tmp5_;
		gint _tmp6_;
		gint _clause_index = 0;
		_tmp2_ = bala_try_statement_get_catch_clauses (stmt);
		_tmp3_ = _bala_iterable_ref0 (_tmp2_);
		_clause_list = _tmp3_;
		_tmp4_ = _clause_list;
		_tmp5_ = bala_collection_get_size ((BalaCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		_clause_size = _tmp6_;
		_clause_index = -1;
		while (TRUE) {
			gint _tmp7_;
			gint _tmp8_;
			BalaCatchClause* clause = NULL;
			BalaList* _tmp9_;
			gpointer _tmp10_;
			BalaCatchClause* _tmp11_;
			_clause_index = _clause_index + 1;
			_tmp7_ = _clause_index;
			_tmp8_ = _clause_size;
			if (!(_tmp7_ < _tmp8_)) {
				break;
			}
			_tmp9_ = _clause_list;
			_tmp10_ = bala_list_get (_tmp9_, _clause_index);
			clause = (BalaCatchClause*) _tmp10_;
			_tmp11_ = clause;
			bala_code_node_accept ((BalaCodeNode*) _tmp11_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (clause);
		}
		_bala_iterable_unref0 (_clause_list);
	}
	_tmp12_ = bala_try_statement_get_finally_body (stmt);
	_tmp13_ = _tmp12_;
	if (_tmp13_ != NULL) {
		BalaBlock* _tmp14_;
		BalaBlock* _tmp15_;
		bala_code_writer_write_string (self, " finally");
		_tmp14_ = bala_try_statement_get_finally_body (stmt);
		_tmp15_ = _tmp14_;
		bala_code_node_accept ((BalaCodeNode*) _tmp15_, (BalaCodeVisitor*) self);
	}
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_catch_clause (BalaCodeVisitor* base,
                                          BalaCatchClause* clause)
{
	BalaCodeWriter * self;
	gchar* _tmp0_ = NULL;
	BalaDataType* _tmp1_;
	BalaDataType* _tmp2_;
	gchar* type_name = NULL;
	gchar* _tmp7_;
	const gchar* _tmp8_ = NULL;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	gchar* var_name = NULL;
	gchar* _tmp13_;
	const gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	BalaBlock* _tmp17_;
	BalaBlock* _tmp18_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (clause != NULL);
	_tmp1_ = bala_catch_clause_get_error_type (clause);
	_tmp2_ = _tmp1_;
	if (_tmp2_ == NULL) {
		gchar* _tmp3_;
		_tmp3_ = g_strdup ("GLib.Error");
		_g_free0 (_tmp0_);
		_tmp0_ = _tmp3_;
	} else {
		BalaDataType* _tmp4_;
		BalaDataType* _tmp5_;
		gchar* _tmp6_;
		_tmp4_ = bala_catch_clause_get_error_type (clause);
		_tmp5_ = _tmp4_;
		_tmp6_ = bala_code_node_to_string ((BalaCodeNode*) _tmp5_);
		_g_free0 (_tmp0_);
		_tmp0_ = _tmp6_;
	}
	_tmp7_ = g_strdup (_tmp0_);
	type_name = _tmp7_;
	_tmp9_ = bala_catch_clause_get_variable_name (clause);
	_tmp10_ = _tmp9_;
	if (_tmp10_ == NULL) {
		_tmp8_ = "_";
	} else {
		const gchar* _tmp11_;
		const gchar* _tmp12_;
		_tmp11_ = bala_catch_clause_get_variable_name (clause);
		_tmp12_ = _tmp11_;
		_tmp8_ = _tmp12_;
	}
	_tmp13_ = g_strdup (_tmp8_);
	var_name = _tmp13_;
	_tmp14_ = type_name;
	_tmp15_ = g_strdup_printf (" catch (%s %s)", _tmp14_, var_name);
	_tmp16_ = _tmp15_;
	bala_code_writer_write_string (self, _tmp16_);
	_g_free0 (_tmp16_);
	_tmp17_ = bala_catch_clause_get_body (clause);
	_tmp18_ = _tmp17_;
	bala_code_node_accept ((BalaCodeNode*) _tmp18_, (BalaCodeVisitor*) self);
	_g_free0 (var_name);
	_g_free0 (type_name);
	_g_free0 (_tmp0_);
}

static void
bala_code_writer_real_visit_lock_statement (BalaCodeVisitor* base,
                                            BalaLockStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaBlock* _tmp2_;
	BalaBlock* _tmp3_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "lock (");
	_tmp0_ = bala_lock_statement_get_resource (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ")");
	_tmp2_ = bala_lock_statement_get_body (stmt);
	_tmp3_ = _tmp2_;
	if (_tmp3_ == NULL) {
		bala_code_writer_write_string (self, ";");
	} else {
		BalaBlock* _tmp4_;
		BalaBlock* _tmp5_;
		_tmp4_ = bala_lock_statement_get_body (stmt);
		_tmp5_ = _tmp4_;
		bala_code_node_accept ((BalaCodeNode*) _tmp5_, (BalaCodeVisitor*) self);
	}
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_unlock_statement (BalaCodeVisitor* base,
                                              BalaUnlockStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "unlock (");
	_tmp0_ = bala_unlock_statement_get_resource (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ");");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_delete_statement (BalaCodeVisitor* base,
                                              BalaDeleteStatement* stmt)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (stmt != NULL);
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "delete ");
	_tmp0_ = bala_delete_statement_get_expression (stmt);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ";");
	bala_code_writer_write_newline (self);
}

static void
bala_code_writer_real_visit_array_creation_expression (BalaCodeVisitor* base,
                                                       BalaArrayCreationExpression* expr)
{
	BalaCodeWriter * self;
	BalaDataType* _tmp0_;
	BalaDataType* _tmp1_;
	gboolean first = FALSE;
	BalaInitializerList* _tmp12_;
	BalaInitializerList* _tmp13_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "new ");
	_tmp0_ = bala_array_creation_expression_get_element_type (expr);
	_tmp1_ = _tmp0_;
	bala_code_writer_write_type (self, _tmp1_);
	bala_code_writer_write_string (self, "[");
	first = TRUE;
	{
		BalaList* _size_list = NULL;
		BalaList* _tmp2_;
		BalaList* _tmp3_;
		gint _size_size = 0;
		BalaList* _tmp4_;
		gint _tmp5_;
		gint _tmp6_;
		gint _size_index = 0;
		_tmp2_ = bala_array_creation_expression_get_sizes (expr);
		_tmp3_ = _bala_iterable_ref0 (_tmp2_);
		_size_list = _tmp3_;
		_tmp4_ = _size_list;
		_tmp5_ = bala_collection_get_size ((BalaCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		_size_size = _tmp6_;
		_size_index = -1;
		while (TRUE) {
			gint _tmp7_;
			gint _tmp8_;
			BalaExpression* size = NULL;
			BalaList* _tmp9_;
			gpointer _tmp10_;
			BalaExpression* _tmp11_;
			_size_index = _size_index + 1;
			_tmp7_ = _size_index;
			_tmp8_ = _size_size;
			if (!(_tmp7_ < _tmp8_)) {
				break;
			}
			_tmp9_ = _size_list;
			_tmp10_ = bala_list_get (_tmp9_, _size_index);
			size = (BalaExpression*) _tmp10_;
			if (!first) {
				bala_code_writer_write_string (self, ", ");
			}
			first = FALSE;
			_tmp11_ = size;
			bala_code_node_accept ((BalaCodeNode*) _tmp11_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (size);
		}
		_bala_iterable_unref0 (_size_list);
	}
	bala_code_writer_write_string (self, "]");
	_tmp12_ = bala_array_creation_expression_get_initializer_list (expr);
	_tmp13_ = _tmp12_;
	if (_tmp13_ != NULL) {
		BalaInitializerList* _tmp14_;
		BalaInitializerList* _tmp15_;
		bala_code_writer_write_string (self, " ");
		_tmp14_ = bala_array_creation_expression_get_initializer_list (expr);
		_tmp15_ = _tmp14_;
		bala_code_node_accept ((BalaCodeNode*) _tmp15_, (BalaCodeVisitor*) self);
	}
}

static gchar*
bool_to_string (gboolean self)
{
	gchar* result = NULL;
	if (self) {
		gchar* _tmp0_;
		_tmp0_ = g_strdup ("true");
		result = _tmp0_;
		return result;
	} else {
		gchar* _tmp1_;
		_tmp1_ = g_strdup ("false");
		result = _tmp1_;
		return result;
	}
}

static void
bala_code_writer_real_visit_boolean_literal (BalaCodeVisitor* base,
                                             BalaBooleanLiteral* lit)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (lit != NULL);
	_tmp0_ = bala_boolean_literal_get_value (lit);
	_tmp1_ = _tmp0_;
	_tmp2_ = bool_to_string (_tmp1_);
	_tmp3_ = _tmp2_;
	bala_code_writer_write_string (self, _tmp3_);
	_g_free0 (_tmp3_);
}

static void
bala_code_writer_real_visit_character_literal (BalaCodeVisitor* base,
                                               BalaCharacterLiteral* lit)
{
	BalaCodeWriter * self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (lit != NULL);
	_tmp0_ = bala_character_literal_get_value (lit);
	_tmp1_ = _tmp0_;
	bala_code_writer_write_string (self, _tmp1_);
}

static void
bala_code_writer_real_visit_integer_literal (BalaCodeVisitor* base,
                                             BalaIntegerLiteral* lit)
{
	BalaCodeWriter * self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (lit != NULL);
	_tmp0_ = bala_integer_literal_get_value (lit);
	_tmp1_ = _tmp0_;
	bala_code_writer_write_string (self, _tmp1_);
}

static void
bala_code_writer_real_visit_real_literal (BalaCodeVisitor* base,
                                          BalaRealLiteral* lit)
{
	BalaCodeWriter * self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (lit != NULL);
	_tmp0_ = bala_real_literal_get_value (lit);
	_tmp1_ = _tmp0_;
	bala_code_writer_write_string (self, _tmp1_);
}

static void
bala_code_writer_real_visit_string_literal (BalaCodeVisitor* base,
                                            BalaStringLiteral* lit)
{
	BalaCodeWriter * self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (lit != NULL);
	_tmp0_ = bala_string_literal_get_value (lit);
	_tmp1_ = _tmp0_;
	bala_code_writer_write_string (self, _tmp1_);
}

static void
bala_code_writer_real_visit_null_literal (BalaCodeVisitor* base,
                                          BalaNullLiteral* lit)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (lit != NULL);
	bala_code_writer_write_string (self, "null");
}

static void
bala_code_writer_real_visit_member_access (BalaCodeVisitor* base,
                                           BalaMemberAccess* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_member_access_get_inner (expr);
	_tmp1_ = _tmp0_;
	if (_tmp1_ != NULL) {
		BalaExpression* _tmp2_;
		BalaExpression* _tmp3_;
		_tmp2_ = bala_member_access_get_inner (expr);
		_tmp3_ = _tmp2_;
		bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
		bala_code_writer_write_string (self, ".");
	}
	_tmp4_ = bala_member_access_get_member_name (expr);
	_tmp5_ = _tmp4_;
	bala_code_writer_write_identifier (self, _tmp5_);
}

static void
bala_code_writer_real_visit_method_call (BalaCodeVisitor* base,
                                         BalaMethodCall* expr)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	BalaExpression* _tmp2_;
	BalaExpression* _tmp3_;
	gboolean first = FALSE;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_method_call_get_is_yield_expression (expr);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		bala_code_writer_write_string (self, "yield ");
	}
	_tmp2_ = bala_method_call_get_call (expr);
	_tmp3_ = _tmp2_;
	bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, " (");
	first = TRUE;
	{
		BalaList* _arg_list = NULL;
		BalaList* _tmp4_;
		BalaList* _tmp5_;
		gint _arg_size = 0;
		BalaList* _tmp6_;
		gint _tmp7_;
		gint _tmp8_;
		gint _arg_index = 0;
		_tmp4_ = bala_method_call_get_argument_list (expr);
		_tmp5_ = _bala_iterable_ref0 (_tmp4_);
		_arg_list = _tmp5_;
		_tmp6_ = _arg_list;
		_tmp7_ = bala_collection_get_size ((BalaCollection*) _tmp6_);
		_tmp8_ = _tmp7_;
		_arg_size = _tmp8_;
		_arg_index = -1;
		while (TRUE) {
			gint _tmp9_;
			gint _tmp10_;
			BalaExpression* arg = NULL;
			BalaList* _tmp11_;
			gpointer _tmp12_;
			BalaExpression* _tmp13_;
			_arg_index = _arg_index + 1;
			_tmp9_ = _arg_index;
			_tmp10_ = _arg_size;
			if (!(_tmp9_ < _tmp10_)) {
				break;
			}
			_tmp11_ = _arg_list;
			_tmp12_ = bala_list_get (_tmp11_, _arg_index);
			arg = (BalaExpression*) _tmp12_;
			if (!first) {
				bala_code_writer_write_string (self, ", ");
			}
			first = FALSE;
			_tmp13_ = arg;
			bala_code_node_accept ((BalaCodeNode*) _tmp13_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (arg);
		}
		_bala_iterable_unref0 (_arg_list);
	}
	bala_code_writer_write_string (self, ")");
}

static void
bala_code_writer_real_visit_element_access (BalaCodeVisitor* base,
                                            BalaElementAccess* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	gboolean first = FALSE;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_element_access_get_container (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, "[");
	first = TRUE;
	{
		BalaList* _index_list = NULL;
		BalaList* _tmp2_;
		BalaList* _tmp3_;
		gint _index_size = 0;
		BalaList* _tmp4_;
		gint _tmp5_;
		gint _tmp6_;
		gint _index_index = 0;
		_tmp2_ = bala_element_access_get_indices (expr);
		_tmp3_ = _bala_iterable_ref0 (_tmp2_);
		_index_list = _tmp3_;
		_tmp4_ = _index_list;
		_tmp5_ = bala_collection_get_size ((BalaCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		_index_size = _tmp6_;
		_index_index = -1;
		while (TRUE) {
			gint _tmp7_;
			gint _tmp8_;
			BalaExpression* index = NULL;
			BalaList* _tmp9_;
			gpointer _tmp10_;
			BalaExpression* _tmp11_;
			_index_index = _index_index + 1;
			_tmp7_ = _index_index;
			_tmp8_ = _index_size;
			if (!(_tmp7_ < _tmp8_)) {
				break;
			}
			_tmp9_ = _index_list;
			_tmp10_ = bala_list_get (_tmp9_, _index_index);
			index = (BalaExpression*) _tmp10_;
			if (!first) {
				bala_code_writer_write_string (self, ", ");
			}
			first = FALSE;
			_tmp11_ = index;
			bala_code_node_accept ((BalaCodeNode*) _tmp11_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (index);
		}
		_bala_iterable_unref0 (_index_list);
	}
	bala_code_writer_write_string (self, "]");
}

static void
bala_code_writer_real_visit_slice_expression (BalaCodeVisitor* base,
                                              BalaSliceExpression* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaExpression* _tmp2_;
	BalaExpression* _tmp3_;
	BalaExpression* _tmp4_;
	BalaExpression* _tmp5_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_slice_expression_get_container (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, "[");
	_tmp2_ = bala_slice_expression_get_start (expr);
	_tmp3_ = _tmp2_;
	bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ":");
	_tmp4_ = bala_slice_expression_get_stop (expr);
	_tmp5_ = _tmp4_;
	bala_code_node_accept ((BalaCodeNode*) _tmp5_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, "]");
}

static void
bala_code_writer_real_visit_base_access (BalaCodeVisitor* base,
                                         BalaBaseAccess* expr)
{
	BalaCodeWriter * self;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "base");
}

static void
bala_code_writer_real_visit_postfix_expression (BalaCodeVisitor* base,
                                                BalaPostfixExpression* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_postfix_expression_get_inner (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	_tmp2_ = bala_postfix_expression_get_increment (expr);
	_tmp3_ = _tmp2_;
	if (_tmp3_) {
		bala_code_writer_write_string (self, "++");
	} else {
		bala_code_writer_write_string (self, "--");
	}
}

static void
bala_code_writer_real_visit_object_creation_expression (BalaCodeVisitor* base,
                                                        BalaObjectCreationExpression* expr)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
	BalaDataType* _tmp4_;
	BalaDataType* _tmp5_;
	BalaSymbol* _tmp6_;
	BalaSymbol* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	gboolean first = FALSE;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_object_creation_expression_get_is_yield_expression (expr);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		bala_code_writer_write_string (self, "yield ");
	}
	_tmp2_ = bala_object_creation_expression_get_struct_creation (expr);
	_tmp3_ = _tmp2_;
	if (!_tmp3_) {
		bala_code_writer_write_string (self, "new ");
	}
	_tmp4_ = bala_object_creation_expression_get_type_reference (expr);
	_tmp5_ = _tmp4_;
	bala_code_writer_write_type (self, _tmp5_);
	_tmp6_ = bala_expression_get_symbol_reference ((BalaExpression*) expr);
	_tmp7_ = _tmp6_;
	_tmp8_ = bala_symbol_get_name (_tmp7_);
	_tmp9_ = _tmp8_;
	if (g_strcmp0 (_tmp9_, ".new") != 0) {
		BalaSymbol* _tmp10_;
		BalaSymbol* _tmp11_;
		const gchar* _tmp12_;
		const gchar* _tmp13_;
		bala_code_writer_write_string (self, ".");
		_tmp10_ = bala_expression_get_symbol_reference ((BalaExpression*) expr);
		_tmp11_ = _tmp10_;
		_tmp12_ = bala_symbol_get_name (_tmp11_);
		_tmp13_ = _tmp12_;
		bala_code_writer_write_string (self, _tmp13_);
	}
	bala_code_writer_write_string (self, " (");
	first = TRUE;
	{
		BalaList* _arg_list = NULL;
		BalaList* _tmp14_;
		BalaList* _tmp15_;
		gint _arg_size = 0;
		BalaList* _tmp16_;
		gint _tmp17_;
		gint _tmp18_;
		gint _arg_index = 0;
		_tmp14_ = bala_object_creation_expression_get_argument_list (expr);
		_tmp15_ = _bala_iterable_ref0 (_tmp14_);
		_arg_list = _tmp15_;
		_tmp16_ = _arg_list;
		_tmp17_ = bala_collection_get_size ((BalaCollection*) _tmp16_);
		_tmp18_ = _tmp17_;
		_arg_size = _tmp18_;
		_arg_index = -1;
		while (TRUE) {
			gint _tmp19_;
			gint _tmp20_;
			BalaExpression* arg = NULL;
			BalaList* _tmp21_;
			gpointer _tmp22_;
			BalaExpression* _tmp23_;
			_arg_index = _arg_index + 1;
			_tmp19_ = _arg_index;
			_tmp20_ = _arg_size;
			if (!(_tmp19_ < _tmp20_)) {
				break;
			}
			_tmp21_ = _arg_list;
			_tmp22_ = bala_list_get (_tmp21_, _arg_index);
			arg = (BalaExpression*) _tmp22_;
			if (!first) {
				bala_code_writer_write_string (self, ", ");
			}
			first = FALSE;
			_tmp23_ = arg;
			bala_code_node_accept ((BalaCodeNode*) _tmp23_, (BalaCodeVisitor*) self);
			_bala_code_node_unref0 (arg);
		}
		_bala_iterable_unref0 (_arg_list);
	}
	bala_code_writer_write_string (self, ")");
}

static void
bala_code_writer_real_visit_sizeof_expression (BalaCodeVisitor* base,
                                               BalaSizeofExpression* expr)
{
	BalaCodeWriter * self;
	BalaDataType* _tmp0_;
	BalaDataType* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "sizeof (");
	_tmp0_ = bala_sizeof_expression_get_type_reference (expr);
	_tmp1_ = _tmp0_;
	bala_code_writer_write_type (self, _tmp1_);
	bala_code_writer_write_string (self, ")");
}

static void
bala_code_writer_real_visit_typeof_expression (BalaCodeVisitor* base,
                                               BalaTypeofExpression* expr)
{
	BalaCodeWriter * self;
	BalaDataType* _tmp0_;
	BalaDataType* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "typeof (");
	_tmp0_ = bala_typeof_expression_get_type_reference (expr);
	_tmp1_ = _tmp0_;
	bala_code_writer_write_type (self, _tmp1_);
	bala_code_writer_write_string (self, ")");
}

static void
bala_code_writer_real_visit_unary_expression (BalaCodeVisitor* base,
                                              BalaUnaryExpression* expr)
{
	BalaCodeWriter * self;
	BalaUnaryOperator _tmp0_;
	BalaUnaryOperator _tmp1_;
	const gchar* _tmp2_;
	BalaExpression* _tmp3_;
	BalaExpression* _tmp4_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_unary_expression_get_operator (expr);
	_tmp1_ = _tmp0_;
	_tmp2_ = bala_unary_operator_to_string (_tmp1_);
	bala_code_writer_write_string (self, _tmp2_);
	_tmp3_ = bala_unary_expression_get_inner (expr);
	_tmp4_ = _tmp3_;
	bala_code_node_accept ((BalaCodeNode*) _tmp4_, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_real_visit_cast_expression (BalaCodeVisitor* base,
                                             BalaCastExpression* expr)
{
	BalaCodeWriter * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	BalaExpression* _tmp8_;
	BalaExpression* _tmp9_;
	gboolean _tmp10_;
	gboolean _tmp11_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_cast_expression_get_is_non_null_cast (expr);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		BalaExpression* _tmp2_;
		BalaExpression* _tmp3_;
		bala_code_writer_write_string (self, "(!) ");
		_tmp2_ = bala_cast_expression_get_inner (expr);
		_tmp3_ = _tmp2_;
		bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
		return;
	}
	_tmp4_ = bala_cast_expression_get_is_silent_cast (expr);
	_tmp5_ = _tmp4_;
	if (!_tmp5_) {
		BalaDataType* _tmp6_;
		BalaDataType* _tmp7_;
		bala_code_writer_write_string (self, "(");
		_tmp6_ = bala_cast_expression_get_type_reference (expr);
		_tmp7_ = _tmp6_;
		bala_code_writer_write_type (self, _tmp7_);
		bala_code_writer_write_string (self, ") ");
	}
	_tmp8_ = bala_cast_expression_get_inner (expr);
	_tmp9_ = _tmp8_;
	bala_code_node_accept ((BalaCodeNode*) _tmp9_, (BalaCodeVisitor*) self);
	_tmp10_ = bala_cast_expression_get_is_silent_cast (expr);
	_tmp11_ = _tmp10_;
	if (_tmp11_) {
		BalaDataType* _tmp12_;
		BalaDataType* _tmp13_;
		bala_code_writer_write_string (self, " as ");
		_tmp12_ = bala_cast_expression_get_type_reference (expr);
		_tmp13_ = _tmp12_;
		bala_code_writer_write_type (self, _tmp13_);
	}
}

static void
bala_code_writer_real_visit_pointer_indirection (BalaCodeVisitor* base,
                                                 BalaPointerIndirection* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "*");
	_tmp0_ = bala_pointer_indirection_get_inner (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_real_visit_addressof_expression (BalaCodeVisitor* base,
                                                  BalaAddressofExpression* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "&");
	_tmp0_ = bala_addressof_expression_get_inner (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_real_visit_reference_transfer_expression (BalaCodeVisitor* base,
                                                           BalaReferenceTransferExpression* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "(owned) ");
	_tmp0_ = bala_reference_transfer_expression_get_inner (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_real_visit_binary_expression (BalaCodeVisitor* base,
                                               BalaBinaryExpression* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaBinaryOperator _tmp2_;
	BalaBinaryOperator _tmp3_;
	const gchar* _tmp4_;
	BalaExpression* _tmp5_;
	BalaExpression* _tmp6_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_binary_expression_get_left (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, " ");
	_tmp2_ = bala_binary_expression_get_operator (expr);
	_tmp3_ = _tmp2_;
	_tmp4_ = bala_binary_operator_to_string (_tmp3_);
	bala_code_writer_write_string (self, _tmp4_);
	bala_code_writer_write_string (self, " ");
	_tmp5_ = bala_binary_expression_get_right (expr);
	_tmp6_ = _tmp5_;
	bala_code_node_accept ((BalaCodeNode*) _tmp6_, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_real_visit_type_check (BalaCodeVisitor* base,
                                        BalaTypeCheck* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaDataType* _tmp2_;
	BalaDataType* _tmp3_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_typecheck_get_expression (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, " is ");
	_tmp2_ = bala_typecheck_get_type_reference (expr);
	_tmp3_ = _tmp2_;
	bala_code_writer_write_type (self, _tmp3_);
}

static void
bala_code_writer_real_visit_conditional_expression (BalaCodeVisitor* base,
                                                    BalaConditionalExpression* expr)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaExpression* _tmp2_;
	BalaExpression* _tmp3_;
	BalaExpression* _tmp4_;
	BalaExpression* _tmp5_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	_tmp0_ = bala_conditional_expression_get_condition (expr);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, "?");
	_tmp2_ = bala_conditional_expression_get_true_expression (expr);
	_tmp3_ = _tmp2_;
	bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, ":");
	_tmp4_ = bala_conditional_expression_get_false_expression (expr);
	_tmp5_ = _tmp4_;
	bala_code_node_accept ((BalaCodeNode*) _tmp5_, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_real_visit_lambda_expression (BalaCodeVisitor* base,
                                               BalaLambdaExpression* expr)
{
	BalaCodeWriter * self;
	BalaList* params = NULL;
	BalaList* _tmp0_;
	BalaList* _tmp1_;
	gint i = 0;
	BalaBlock* _tmp21_;
	BalaBlock* _tmp22_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (expr != NULL);
	bala_code_writer_write_string (self, "(");
	_tmp0_ = bala_lambda_expression_get_parameters (expr);
	_tmp1_ = _bala_iterable_ref0 (_tmp0_);
	params = _tmp1_;
	i = 1;
	{
		BalaList* _param_list = NULL;
		BalaList* _tmp2_;
		BalaList* _tmp3_;
		gint _param_size = 0;
		BalaList* _tmp4_;
		gint _tmp5_;
		gint _tmp6_;
		gint _param_index = 0;
		_tmp2_ = params;
		_tmp3_ = _bala_iterable_ref0 (_tmp2_);
		_param_list = _tmp3_;
		_tmp4_ = _param_list;
		_tmp5_ = bala_collection_get_size ((BalaCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		_param_size = _tmp6_;
		_param_index = -1;
		while (TRUE) {
			gint _tmp7_;
			gint _tmp8_;
			BalaParameter* param = NULL;
			BalaList* _tmp9_;
			gpointer _tmp10_;
			BalaParameter* _tmp11_;
			BalaParameterDirection _tmp12_;
			BalaParameterDirection _tmp13_;
			BalaParameter* _tmp17_;
			const gchar* _tmp18_;
			const gchar* _tmp19_;
			gint _tmp20_;
			_param_index = _param_index + 1;
			_tmp7_ = _param_index;
			_tmp8_ = _param_size;
			if (!(_tmp7_ < _tmp8_)) {
				break;
			}
			_tmp9_ = _param_list;
			_tmp10_ = bala_list_get (_tmp9_, _param_index);
			param = (BalaParameter*) _tmp10_;
			if (i > 1) {
				bala_code_writer_write_string (self, ", ");
			}
			_tmp11_ = param;
			_tmp12_ = bala_parameter_get_direction (_tmp11_);
			_tmp13_ = _tmp12_;
			if (_tmp13_ == BALA_PARAMETER_DIRECTION_REF) {
				bala_code_writer_write_string (self, "ref ");
			} else {
				BalaParameter* _tmp14_;
				BalaParameterDirection _tmp15_;
				BalaParameterDirection _tmp16_;
				_tmp14_ = param;
				_tmp15_ = bala_parameter_get_direction (_tmp14_);
				_tmp16_ = _tmp15_;
				if (_tmp16_ == BALA_PARAMETER_DIRECTION_OUT) {
					bala_code_writer_write_string (self, "out ");
				}
			}
			_tmp17_ = param;
			_tmp18_ = bala_symbol_get_name ((BalaSymbol*) _tmp17_);
			_tmp19_ = _tmp18_;
			bala_code_writer_write_identifier (self, _tmp19_);
			_tmp20_ = i;
			i = _tmp20_ + 1;
			_bala_code_node_unref0 (param);
		}
		_bala_iterable_unref0 (_param_list);
	}
	bala_code_writer_write_string (self, ") =>");
	_tmp21_ = bala_lambda_expression_get_statement_body (expr);
	_tmp22_ = _tmp21_;
	if (_tmp22_ != NULL) {
		BalaBlock* _tmp23_;
		BalaBlock* _tmp24_;
		_tmp23_ = bala_lambda_expression_get_statement_body (expr);
		_tmp24_ = _tmp23_;
		bala_code_node_accept ((BalaCodeNode*) _tmp24_, (BalaCodeVisitor*) self);
	} else {
		BalaExpression* _tmp25_;
		BalaExpression* _tmp26_;
		_tmp25_ = bala_lambda_expression_get_expression_body (expr);
		_tmp26_ = _tmp25_;
		if (_tmp26_ != NULL) {
			BalaExpression* _tmp27_;
			BalaExpression* _tmp28_;
			_tmp27_ = bala_lambda_expression_get_expression_body (expr);
			_tmp28_ = _tmp27_;
			bala_code_node_accept ((BalaCodeNode*) _tmp28_, (BalaCodeVisitor*) self);
		}
	}
	_bala_iterable_unref0 (params);
}

static void
bala_code_writer_real_visit_assignment (BalaCodeVisitor* base,
                                        BalaAssignment* a)
{
	BalaCodeWriter * self;
	BalaExpression* _tmp0_;
	BalaExpression* _tmp1_;
	BalaExpression* _tmp2_;
	BalaExpression* _tmp3_;
	self = (BalaCodeWriter*) base;
	g_return_if_fail (a != NULL);
	_tmp0_ = bala_assignment_get_left (a);
	_tmp1_ = _tmp0_;
	bala_code_node_accept ((BalaCodeNode*) _tmp1_, (BalaCodeVisitor*) self);
	bala_code_writer_write_string (self, " = ");
	_tmp2_ = bala_assignment_get_right (a);
	_tmp3_ = _tmp2_;
	bala_code_node_accept ((BalaCodeNode*) _tmp3_, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_write_indent (BalaCodeWriter* self)
{
	FILE* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	g_return_if_fail (self != NULL);
	if (!self->priv->bol) {
		FILE* _tmp0_;
		_tmp0_ = self->priv->stream;
		fputc ('\n', _tmp0_);
	}
	_tmp1_ = self->priv->stream;
	_tmp2_ = g_strnfill ((gsize) self->priv->indent, '\t');
	_tmp3_ = _tmp2_;
	fputs (_tmp3_, _tmp1_);
	_g_free0 (_tmp3_);
	self->priv->bol = FALSE;
}

static void
bala_code_writer_write_comment (BalaCodeWriter* self,
                                BalaComment* comment)
{
	gchar* replacement = NULL;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* fixed_content = NULL;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (comment != NULL);
	{
		GRegex* _tmp0_;
		_tmp0_ = bala_code_writer_fix_indent_regex;
		if (_tmp0_ == NULL) {
			GRegex* _tmp1_ = NULL;
			GRegex* _tmp2_;
			GRegex* _tmp3_;
			_tmp2_ = g_regex_new ("\\n[\\t ]*", 0, 0, &_inner_error0_);
			_tmp1_ = _tmp2_;
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				goto __catch0_g_error;
			}
			_tmp3_ = _tmp1_;
			_tmp1_ = NULL;
			_g_regex_unref0 (bala_code_writer_fix_indent_regex);
			bala_code_writer_fix_indent_regex = _tmp3_;
			_g_regex_unref0 (_tmp1_);
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		g_clear_error (&_inner_error0_);
		g_assert_not_reached ();
	}
	__finally0:
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp4_ = g_strnfill ((gsize) self->priv->indent, '\t');
	_tmp5_ = _tmp4_;
	_tmp6_ = g_strdup_printf ("\n%s ", _tmp5_);
	_tmp7_ = _tmp6_;
	_g_free0 (_tmp5_);
	replacement = _tmp7_;
	{
		gchar* _tmp8_ = NULL;
		GRegex* _tmp9_;
		const gchar* _tmp10_;
		const gchar* _tmp11_;
		const gchar* _tmp12_;
		const gchar* _tmp13_;
		gint _tmp14_;
		gint _tmp15_;
		gchar* _tmp16_;
		gchar* _tmp17_;
		_tmp9_ = bala_code_writer_fix_indent_regex;
		_tmp10_ = bala_comment_get_content (comment);
		_tmp11_ = _tmp10_;
		_tmp12_ = bala_comment_get_content (comment);
		_tmp13_ = _tmp12_;
		_tmp14_ = strlen (_tmp13_);
		_tmp15_ = _tmp14_;
		_tmp16_ = g_regex_replace (_tmp9_, _tmp11_, (gssize) _tmp15_, 0, replacement, 0, &_inner_error0_);
		_tmp8_ = _tmp16_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			goto __catch1_g_error;
		}
		_tmp17_ = _tmp8_;
		_tmp8_ = NULL;
		_g_free0 (fixed_content);
		fixed_content = _tmp17_;
		_g_free0 (_tmp8_);
	}
	goto __finally1;
	__catch1_g_error:
	{
		g_clear_error (&_inner_error0_);
		g_assert_not_reached ();
	}
	__finally1:
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_free0 (fixed_content);
		_g_free0 (replacement);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	bala_code_writer_write_indent (self);
	bala_code_writer_write_string (self, "/*");
	bala_code_writer_write_string (self, fixed_content);
	bala_code_writer_write_string (self, "*/");
	_g_free0 (fixed_content);
	_g_free0 (replacement);
}

static gunichar
string_get_char (const gchar* self,
                 glong index)
{
	gunichar result = 0U;
	g_return_val_if_fail (self != NULL, 0U);
	result = g_utf8_get_char (((gchar*) self) + index);
	return result;
}

static void
bala_code_writer_write_identifier (BalaCodeWriter* self,
                                   const gchar* s)
{
	gchar* id = NULL;
	gint id_length = 0;
	gint _tmp0_;
	gint _tmp1_;
	gboolean _tmp2_ = FALSE;
	gchar* _tmp3_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (s != NULL);
	id = (gchar*) s;
	_tmp0_ = strlen (s);
	_tmp1_ = _tmp0_;
	id_length = (gint) _tmp1_;
	_tmp3_ = id;
	if (bala_scanner_get_identifier_or_keyword (_tmp3_, id_length) != BALA_TOKEN_TYPE_IDENTIFIER) {
		_tmp2_ = TRUE;
	} else {
		_tmp2_ = g_unichar_isdigit (string_get_char (s, (glong) 0));
	}
	if (_tmp2_) {
		FILE* _tmp4_;
		_tmp4_ = self->priv->stream;
		fputc ('@', _tmp4_);
	}
	bala_code_writer_write_string (self, s);
}

static void
bala_code_writer_write_return_type (BalaCodeWriter* self,
                                    BalaDataType* type)
{
	g_return_if_fail (self != NULL);
	g_return_if_fail (type != NULL);
	if (bala_data_type_is_weak (type)) {
		bala_code_writer_write_string (self, "unowned ");
	}
	bala_code_writer_write_type (self, type);
}

static void
bala_code_writer_write_type (BalaCodeWriter* self,
                             BalaDataType* type)
{
	BalaScope* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (type != NULL);
	_tmp0_ = self->priv->current_scope;
	_tmp1_ = bala_data_type_to_qualified_string (type, _tmp0_);
	_tmp2_ = _tmp1_;
	bala_code_writer_write_string (self, _tmp2_);
	_g_free0 (_tmp2_);
}

static void
bala_code_writer_write_type_suffix (BalaCodeWriter* self,
                                    BalaDataType* type)
{
	BalaArrayType* array_type = NULL;
	gboolean _tmp0_ = FALSE;
	BalaArrayType* _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (type != NULL);
	array_type = BALA_IS_ARRAY_TYPE (type) ? ((BalaArrayType*) type) : NULL;
	_tmp1_ = array_type;
	if (_tmp1_ != NULL) {
		BalaArrayType* _tmp2_;
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp2_ = array_type;
		_tmp3_ = bala_array_type_get_fixed_length (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp0_ = _tmp4_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		BalaArrayType* _tmp5_;
		BalaExpression* _tmp6_;
		BalaExpression* _tmp7_;
		bala_code_writer_write_string (self, "[");
		_tmp5_ = array_type;
		_tmp6_ = bala_array_type_get_length (_tmp5_);
		_tmp7_ = _tmp6_;
		bala_code_node_accept ((BalaCodeNode*) _tmp7_, (BalaCodeVisitor*) self);
		bala_code_writer_write_string (self, "]");
	}
}

static void
bala_code_writer_write_string (BalaCodeWriter* self,
                               const gchar* s)
{
	FILE* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (s != NULL);
	_tmp0_ = self->priv->stream;
	fputs (s, _tmp0_);
	self->priv->bol = FALSE;
}

static void
bala_code_writer_write_newline (BalaCodeWriter* self)
{
	FILE* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->stream;
	fputc ('\n', _tmp0_);
	self->priv->bol = TRUE;
}

static void
bala_code_writer_write_code_block (BalaCodeWriter* self,
                                   BalaBlock* block)
{
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	if (block == NULL) {
		_tmp0_ = TRUE;
	} else {
		gboolean _tmp1_ = FALSE;
		BalaCodeWriterType _tmp2_;
		_tmp2_ = self->priv->type;
		if (_tmp2_ != BALA_CODE_WRITER_TYPE_DUMP) {
			BalaCodeWriterType _tmp3_;
			_tmp3_ = self->priv->type;
			_tmp1_ = _tmp3_ != BALA_CODE_WRITER_TYPE_BAPIGEN;
		} else {
			_tmp1_ = FALSE;
		}
		_tmp0_ = _tmp1_;
	}
	if (_tmp0_) {
		bala_code_writer_write_string (self, ";");
		return;
	}
	bala_code_node_accept ((BalaCodeNode*) block, (BalaCodeVisitor*) self);
}

static void
bala_code_writer_write_begin_block (BalaCodeWriter* self)
{
	FILE* _tmp1_;
	gint _tmp2_;
	g_return_if_fail (self != NULL);
	if (!self->priv->bol) {
		FILE* _tmp0_;
		_tmp0_ = self->priv->stream;
		fputc (' ', _tmp0_);
	} else {
		bala_code_writer_write_indent (self);
	}
	_tmp1_ = self->priv->stream;
	fputc ('{', _tmp1_);
	bala_code_writer_write_newline (self);
	_tmp2_ = self->priv->indent;
	self->priv->indent = _tmp2_ + 1;
}

static void
bala_code_writer_write_end_block (BalaCodeWriter* self)
{
	gint _tmp0_;
	FILE* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->indent;
	self->priv->indent = _tmp0_ - 1;
	bala_code_writer_write_indent (self);
	_tmp1_ = self->priv->stream;
	fputc ('}', _tmp1_);
}

static gboolean
bala_code_writer_check_accessibility (BalaCodeWriter* self,
                                      BalaSymbol* sym)
{
	BalaCodeWriterType _tmp0_;
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (sym != NULL, FALSE);
	_tmp0_ = self->priv->type;
	switch (_tmp0_) {
		case BALA_CODE_WRITER_TYPE_EXTERNAL:
		case BALA_CODE_WRITER_TYPE_BAPIGEN:
		{
			gboolean _tmp1_ = FALSE;
			BalaSymbolAccessibility _tmp2_;
			BalaSymbolAccessibility _tmp3_;
			_tmp2_ = bala_symbol_get_access (sym);
			_tmp3_ = _tmp2_;
			if (_tmp3_ == BALA_SYMBOL_ACCESSIBILITY_PUBLIC) {
				_tmp1_ = TRUE;
			} else {
				BalaSymbolAccessibility _tmp4_;
				BalaSymbolAccessibility _tmp5_;
				_tmp4_ = bala_symbol_get_access (sym);
				_tmp5_ = _tmp4_;
				_tmp1_ = _tmp5_ == BALA_SYMBOL_ACCESSIBILITY_PROTECTED;
			}
			result = _tmp1_;
			return result;
		}
		case BALA_CODE_WRITER_TYPE_INTERNAL:
		case BALA_CODE_WRITER_TYPE_FAST:
		{
			gboolean _tmp6_ = FALSE;
			gboolean _tmp7_ = FALSE;
			BalaSymbolAccessibility _tmp8_;
			BalaSymbolAccessibility _tmp9_;
			_tmp8_ = bala_symbol_get_access (sym);
			_tmp9_ = _tmp8_;
			if (_tmp9_ == BALA_SYMBOL_ACCESSIBILITY_INTERNAL) {
				_tmp7_ = TRUE;
			} else {
				BalaSymbolAccessibility _tmp10_;
				BalaSymbolAccessibility _tmp11_;
				_tmp10_ = bala_symbol_get_access (sym);
				_tmp11_ = _tmp10_;
				_tmp7_ = _tmp11_ == BALA_SYMBOL_ACCESSIBILITY_PUBLIC;
			}
			if (_tmp7_) {
				_tmp6_ = TRUE;
			} else {
				BalaSymbolAccessibility _tmp12_;
				BalaSymbolAccessibility _tmp13_;
				_tmp12_ = bala_symbol_get_access (sym);
				_tmp13_ = _tmp12_;
				_tmp6_ = _tmp13_ == BALA_SYMBOL_ACCESSIBILITY_PROTECTED;
			}
			result = _tmp6_;
			return result;
		}
		case BALA_CODE_WRITER_TYPE_DUMP:
		{
			result = TRUE;
			return result;
		}
		default:
		{
			g_assert_not_reached ();
		}
	}
}

static gboolean
bala_code_writer_skip_since_tag_check (BalaCodeWriter* self,
                                       BalaSymbol* sym,
                                       const gchar* since_val)
{
	BalaSymbol* parent_symbol = NULL;
	BalaSymbol* _tmp0_;
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (sym != NULL, FALSE);
	g_return_val_if_fail (since_val != NULL, FALSE);
	_tmp0_ = _bala_code_node_ref0 (sym);
	parent_symbol = _tmp0_;
	while (TRUE) {
		BalaSymbol* _tmp1_;
		BalaSymbol* _tmp2_;
		BalaSymbol* _tmp3_;
		BalaSymbol* _tmp4_;
		BalaSymbol* _tmp5_;
		BalaSymbol* _tmp6_;
		BalaSymbol* _tmp7_;
		BalaSymbol* _tmp8_;
		BalaVersionAttribute* _tmp9_;
		BalaVersionAttribute* _tmp10_;
		gchar* _tmp11_;
		gchar* _tmp12_;
		gchar* _tmp13_;
		gboolean _tmp14_;
		_tmp1_ = parent_symbol;
		_tmp2_ = bala_symbol_get_parent_symbol (_tmp1_);
		_tmp3_ = _tmp2_;
		if (!(_tmp3_ != NULL)) {
			break;
		}
		_tmp4_ = parent_symbol;
		_tmp5_ = bala_symbol_get_parent_symbol (_tmp4_);
		_tmp6_ = _tmp5_;
		_tmp7_ = _bala_code_node_ref0 (_tmp6_);
		_bala_code_node_unref0 (parent_symbol);
		parent_symbol = _tmp7_;
		_tmp8_ = parent_symbol;
		_tmp9_ = bala_symbol_get_version (_tmp8_);
		_tmp10_ = _tmp9_;
		_tmp11_ = bala_version_attribute_get_since (_tmp10_);
		_tmp12_ = _tmp11_;
		_tmp13_ = _tmp12_;
		_tmp14_ = g_strcmp0 (_tmp13_, since_val) == 0;
		_g_free0 (_tmp13_);
		if (_tmp14_) {
			result = TRUE;
			_bala_code_node_unref0 (parent_symbol);
			return result;
		}
	}
	result = FALSE;
	_bala_code_node_unref0 (parent_symbol);
	return result;
}

static gint
____lambda5_ (BalaCodeWriter* self,
              BalaAttribute* a,
              BalaAttribute* b)
{
	GCompareFunc _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gint result = 0;
	g_return_val_if_fail (a != NULL, 0);
	g_return_val_if_fail (b != NULL, 0);
	_tmp0_ = ((GCompareFunc) g_strcmp0);
	_tmp1_ = bala_attribute_get_name (a);
	_tmp2_ = _tmp1_;
	_tmp3_ = bala_attribute_get_name (b);
	_tmp4_ = _tmp3_;
	result = _tmp0_ (_tmp2_, _tmp4_);
	return result;
}

static gint
_____lambda5__gcompare_data_func (gconstpointer a,
                                  gconstpointer b,
                                  gpointer self)
{
	gint result;
	result = ____lambda5_ ((BalaCodeWriter*) self, (BalaAttribute*) a, (BalaAttribute*) b);
	return result;
}

static gint
___lambda6_ (BalaCodeWriter* self,
             BalaAttribute* a,
             BalaAttribute* b)
{
	GCompareFunc _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gint result = 0;
	g_return_val_if_fail (a != NULL, 0);
	g_return_val_if_fail (b != NULL, 0);
	_tmp0_ = ((GCompareFunc) g_strcmp0);
	_tmp1_ = bala_attribute_get_name (a);
	_tmp2_ = _tmp1_;
	_tmp3_ = bala_attribute_get_name (b);
	_tmp4_ = _tmp3_;
	result = _tmp0_ (_tmp2_, _tmp4_);
	return result;
}

static gint
____lambda6__gcompare_data_func (gconstpointer a,
                                 gconstpointer b,
                                 gpointer self)
{
	gint result;
	result = ___lambda6_ ((BalaCodeWriter*) self, (BalaAttribute*) a, (BalaAttribute*) b);
	return result;
}

static void
_g_free0_ (gpointer var)
{
	var = (g_free (var), NULL);
}

static glong
string_strnlen (gchar* str,
                glong maxlen)
{
	gchar* end = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	glong result = 0L;
	_tmp0_ = memchr (str, 0, (gsize) maxlen);
	end = _tmp0_;
	_tmp1_ = end;
	if (_tmp1_ == NULL) {
		result = maxlen;
		return result;
	} else {
		gchar* _tmp2_;
		_tmp2_ = end;
		result = (glong) (_tmp2_ - str);
		return result;
	}
}

static gchar*
string_substring (const gchar* self,
                  glong offset,
                  glong len)
{
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	gchar* _tmp3_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	if (offset >= ((glong) 0)) {
		_tmp0_ = len >= ((glong) 0);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		string_length = string_strnlen ((gchar*) self, offset + len);
	} else {
		gint _tmp1_;
		gint _tmp2_;
		_tmp1_ = strlen (self);
		_tmp2_ = _tmp1_;
		string_length = (glong) _tmp2_;
	}
	if (offset < ((glong) 0)) {
		offset = string_length + offset;
		g_return_val_if_fail (offset >= ((glong) 0), NULL);
	} else {
		g_return_val_if_fail (offset <= string_length, NULL);
	}
	if (len < ((glong) 0)) {
		len = string_length - offset;
	}
	g_return_val_if_fail ((offset + len) <= string_length, NULL);
	_tmp3_ = g_strndup (((gchar*) self) + offset, (gsize) len);
	result = _tmp3_;
	return result;
}

static void
bala_code_writer_write_attributes (BalaCodeWriter* self,
                                   BalaCodeNode* node)
{
	BalaSymbol* sym = NULL;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	BalaCodeWriterType _tmp3_;
	gboolean need_cheaders = FALSE;
	GSequence* attributes = NULL;
	GSequence* _tmp9_;
	GList* _tmp10_;
	gboolean _tmp16_ = FALSE;
	GSequenceIter* iter = NULL;
	GSequence* _tmp21_;
	GSequenceIter* _tmp22_;
	gboolean _tmp114_ = FALSE;
	BalaCodeWriterType _tmp115_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (node != NULL);
	sym = BALA_IS_SYMBOL (node) ? ((BalaSymbol*) node) : NULL;
	_tmp3_ = self->priv->type;
	if (_tmp3_ != BALA_CODE_WRITER_TYPE_FAST) {
		BalaSymbol* _tmp4_;
		_tmp4_ = sym;
		_tmp2_ = _tmp4_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		BalaSymbol* _tmp5_;
		_tmp5_ = sym;
		_tmp1_ = !BALA_IS_NAMESPACE (_tmp5_);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		BalaSymbol* _tmp6_;
		BalaSymbol* _tmp7_;
		BalaSymbol* _tmp8_;
		_tmp6_ = sym;
		_tmp7_ = bala_symbol_get_parent_symbol (_tmp6_);
		_tmp8_ = _tmp7_;
		_tmp0_ = BALA_IS_NAMESPACE (_tmp8_);
	} else {
		_tmp0_ = FALSE;
	}
	need_cheaders = _tmp0_;
	_tmp9_ = g_sequence_new (_bala_code_node_unref0_);
	attributes = _tmp9_;
	_tmp10_ = node->attributes;
	{
		GList* attr_collection = NULL;
		GList* attr_it = NULL;
		attr_collection = _tmp10_;
		for (attr_it = attr_collection; attr_it != NULL; attr_it = attr_it->next) {
			BalaAttribute* _tmp11_;
			BalaAttribute* attr = NULL;
			_tmp11_ = _bala_code_node_ref0 ((BalaAttribute*) attr_it->data);
			attr = _tmp11_;
			{
				GSequence* _tmp12_;
				BalaAttribute* _tmp13_;
				BalaAttribute* _tmp14_;
				GSequenceIter* _tmp15_;
				_tmp12_ = attributes;
				_tmp13_ = attr;
				_tmp14_ = _bala_code_node_ref0 (_tmp13_);
				_tmp15_ = g_sequence_insert_sorted (_tmp12_, _tmp14_, _____lambda5__gcompare_data_func, self);
				_bala_code_node_unref0 (attr);
			}
		}
	}
	if (need_cheaders) {
		BalaAttribute* _tmp17_;
		_tmp17_ = bala_code_node_get_attribute (node, "CCode");
		_tmp16_ = _tmp17_ == NULL;
	} else {
		_tmp16_ = FALSE;
	}
	if (_tmp16_) {
		GSequence* _tmp18_;
		BalaAttribute* _tmp19_;
		GSequenceIter* _tmp20_;
		_tmp18_ = attributes;
		_tmp19_ = bala_attribute_new ("CCode", NULL);
		_tmp20_ = g_sequence_insert_sorted (_tmp18_, _tmp19_, ____lambda6__gcompare_data_func, self);
	}
	_tmp21_ = attributes;
	_tmp22_ = g_sequence_get_begin_iter (_tmp21_);
	iter = _tmp22_;
	while (TRUE) {
		GSequenceIter* _tmp23_;
		BalaAttribute* attr = NULL;
		GSequenceIter* _tmp24_;
		gconstpointer _tmp25_;
		GSequenceIter* _tmp26_;
		GSequenceIter* _tmp27_;
		GSequence* keys = NULL;
		GSequence* _tmp28_;
		gboolean _tmp47_ = FALSE;
		gboolean _tmp48_ = FALSE;
		gboolean _tmp57_ = FALSE;
		BalaAttribute* _tmp58_;
		const gchar* _tmp59_;
		const gchar* _tmp60_;
		BalaAttribute* _tmp62_;
		const gchar* _tmp63_;
		const gchar* _tmp64_;
		gboolean _tmp65_ = FALSE;
		gboolean _tmp66_ = FALSE;
		BalaSymbol* _tmp67_;
		gboolean _tmp82_ = FALSE;
		FILE* _tmp83_;
		BalaAttribute* _tmp84_;
		const gchar* _tmp85_;
		const gchar* _tmp86_;
		GSequence* _tmp87_;
		FILE* _tmp112_;
		gboolean _tmp113_ = FALSE;
		_tmp23_ = iter;
		if (!(!g_sequence_iter_is_end (_tmp23_))) {
			break;
		}
		_tmp24_ = iter;
		_tmp25_ = g_sequence_get (_tmp24_);
		attr = (BalaAttribute*) _tmp25_;
		_tmp26_ = iter;
		_tmp27_ = g_sequence_iter_next (_tmp26_);
		iter = _tmp27_;
		_tmp28_ = g_sequence_new (_g_free0_);
		keys = _tmp28_;
		{
			BalaIterator* _key_it = NULL;
			BalaAttribute* _tmp29_;
			BalaMap* _tmp30_;
			BalaMap* _tmp31_;
			BalaSet* _tmp32_;
			BalaSet* _tmp33_;
			BalaIterator* _tmp34_;
			BalaIterator* _tmp35_;
			_tmp29_ = attr;
			_tmp30_ = bala_attribute_get_args (_tmp29_);
			_tmp31_ = _tmp30_;
			_tmp32_ = bala_map_get_keys (_tmp31_);
			_tmp33_ = _tmp32_;
			_tmp34_ = bala_iterable_iterator ((BalaIterable*) _tmp33_);
			_tmp35_ = _tmp34_;
			_bala_iterable_unref0 (_tmp33_);
			_key_it = _tmp35_;
			while (TRUE) {
				BalaIterator* _tmp36_;
				gchar* key = NULL;
				BalaIterator* _tmp37_;
				gpointer _tmp38_;
				gboolean _tmp39_ = FALSE;
				const gchar* _tmp40_;
				GSequence* _tmp42_;
				const gchar* _tmp43_;
				gchar* _tmp44_;
				GCompareFunc _tmp45_;
				GSequenceIter* _tmp46_;
				_tmp36_ = _key_it;
				if (!bala_iterator_next (_tmp36_)) {
					break;
				}
				_tmp37_ = _key_it;
				_tmp38_ = bala_iterator_get (_tmp37_);
				key = (gchar*) _tmp38_;
				_tmp40_ = key;
				if (g_strcmp0 (_tmp40_, "cheader_filename") == 0) {
					BalaSymbol* _tmp41_;
					_tmp41_ = sym;
					_tmp39_ = BALA_IS_NAMESPACE (_tmp41_);
				} else {
					_tmp39_ = FALSE;
				}
				if (_tmp39_) {
					_g_free0 (key);
					continue;
				}
				_tmp42_ = keys;
				_tmp43_ = key;
				_tmp44_ = g_strdup (_tmp43_);
				_tmp45_ = ((GCompareFunc) g_strcmp0);
				_tmp46_ = g_sequence_insert_sorted (_tmp42_, _tmp44_, (GCompareDataFunc) _tmp45_, NULL);
				_g_free0 (key);
			}
			_bala_iterator_unref0 (_key_it);
		}
		if (need_cheaders) {
			BalaAttribute* _tmp49_;
			const gchar* _tmp50_;
			const gchar* _tmp51_;
			_tmp49_ = attr;
			_tmp50_ = bala_attribute_get_name (_tmp49_);
			_tmp51_ = _tmp50_;
			_tmp48_ = g_strcmp0 (_tmp51_, "CCode") == 0;
		} else {
			_tmp48_ = FALSE;
		}
		if (_tmp48_) {
			BalaAttribute* _tmp52_;
			_tmp52_ = attr;
			_tmp47_ = !bala_attribute_has_argument (_tmp52_, "cheader_filename");
		} else {
			_tmp47_ = FALSE;
		}
		if (_tmp47_) {
			GSequence* _tmp53_;
			gchar* _tmp54_;
			GCompareFunc _tmp55_;
			GSequenceIter* _tmp56_;
			_tmp53_ = keys;
			_tmp54_ = g_strdup ("cheader_filename");
			_tmp55_ = ((GCompareFunc) g_strcmp0);
			_tmp56_ = g_sequence_insert_sorted (_tmp53_, _tmp54_, (GCompareDataFunc) _tmp55_, NULL);
		}
		_tmp58_ = attr;
		_tmp59_ = bala_attribute_get_name (_tmp58_);
		_tmp60_ = _tmp59_;
		if (g_strcmp0 (_tmp60_, "CCode") == 0) {
			GSequence* _tmp61_;
			_tmp61_ = keys;
			_tmp57_ = g_sequence_get_length (_tmp61_) == 0;
		} else {
			_tmp57_ = FALSE;
		}
		if (_tmp57_) {
			_g_sequence_free0 (keys);
			continue;
		}
		_tmp62_ = attr;
		_tmp63_ = bala_attribute_get_name (_tmp62_);
		_tmp64_ = _tmp63_;
		if (g_strcmp0 (_tmp64_, "Source") == 0) {
			_g_sequence_free0 (keys);
			continue;
		}
		_tmp67_ = sym;
		if (_tmp67_ != NULL) {
			BalaAttribute* _tmp68_;
			BalaMap* _tmp69_;
			BalaMap* _tmp70_;
			gint _tmp71_;
			gint _tmp72_;
			_tmp68_ = attr;
			_tmp69_ = bala_attribute_get_args (_tmp68_);
			_tmp70_ = _tmp69_;
			_tmp71_ = bala_map_get_size (_tmp70_);
			_tmp72_ = _tmp71_;
			_tmp66_ = _tmp72_ == 1;
		} else {
			_tmp66_ = FALSE;
		}
		if (_tmp66_) {
			BalaAttribute* _tmp73_;
			const gchar* _tmp74_;
			const gchar* _tmp75_;
			_tmp73_ = attr;
			_tmp74_ = bala_attribute_get_name (_tmp73_);
			_tmp75_ = _tmp74_;
			_tmp65_ = g_strcmp0 (_tmp75_, "Version") == 0;
		} else {
			_tmp65_ = FALSE;
		}
		if (_tmp65_) {
			gchar* since_val = NULL;
			BalaAttribute* _tmp76_;
			gchar* _tmp77_;
			gboolean _tmp78_ = FALSE;
			const gchar* _tmp79_;
			_tmp76_ = attr;
			_tmp77_ = bala_attribute_get_string (_tmp76_, "since", NULL);
			since_val = _tmp77_;
			_tmp79_ = since_val;
			if (_tmp79_ != NULL) {
				BalaSymbol* _tmp80_;
				const gchar* _tmp81_;
				_tmp80_ = sym;
				_tmp81_ = since_val;
				_tmp78_ = bala_code_writer_skip_since_tag_check (self, _tmp80_, _tmp81_);
			} else {
				_tmp78_ = FALSE;
			}
			if (_tmp78_) {
				_g_free0 (since_val);
				_g_sequence_free0 (keys);
				continue;
			}
			_g_free0 (since_val);
		}
		if (!BALA_IS_PARAMETER (node)) {
			_tmp82_ = !BALA_IS_PROPERTY_ACCESSOR (node);
		} else {
			_tmp82_ = FALSE;
		}
		if (_tmp82_) {
			bala_code_writer_write_indent (self);
		}
		_tmp83_ = self->priv->stream;
		_tmp84_ = attr;
		_tmp85_ = bala_attribute_get_name (_tmp84_);
		_tmp86_ = _tmp85_;
		fprintf (_tmp83_, "[%s", _tmp86_);
		_tmp87_ = keys;
		if (g_sequence_get_length (_tmp87_) > 0) {
			FILE* _tmp88_;
			const gchar* separator = NULL;
			GSequenceIter* arg_iter = NULL;
			GSequence* _tmp89_;
			GSequenceIter* _tmp90_;
			FILE* _tmp111_;
			_tmp88_ = self->priv->stream;
			fputs (" (", _tmp88_);
			separator = "";
			_tmp89_ = keys;
			_tmp90_ = g_sequence_get_begin_iter (_tmp89_);
			arg_iter = _tmp90_;
			while (TRUE) {
				GSequenceIter* _tmp91_;
				const gchar* arg_name = NULL;
				GSequenceIter* _tmp92_;
				gconstpointer _tmp93_;
				GSequenceIter* _tmp94_;
				GSequenceIter* _tmp95_;
				const gchar* _tmp96_;
				_tmp91_ = arg_iter;
				if (!(!g_sequence_iter_is_end (_tmp91_))) {
					break;
				}
				_tmp92_ = arg_iter;
				_tmp93_ = g_sequence_get (_tmp92_);
				arg_name = (const gchar*) _tmp93_;
				_tmp94_ = arg_iter;
				_tmp95_ = g_sequence_iter_next (_tmp94_);
				arg_iter = _tmp95_;
				_tmp96_ = arg_name;
				if (g_strcmp0 (_tmp96_, "cheader_filename") == 0) {
					FILE* _tmp97_;
					const gchar* _tmp98_;
					BalaSymbol* _tmp99_;
					gchar* _tmp100_;
					gchar* _tmp101_;
					_tmp97_ = self->priv->stream;
					_tmp98_ = separator;
					_tmp99_ = sym;
					_tmp100_ = bala_code_writer_get_cheaders (self, _tmp99_);
					_tmp101_ = _tmp100_;
					fprintf (_tmp97_, "%scheader_filename = \"%s\"", _tmp98_, _tmp101_);
					_g_free0 (_tmp101_);
				} else {
					FILE* _tmp102_;
					const gchar* _tmp103_;
					const gchar* _tmp104_;
					BalaAttribute* _tmp105_;
					BalaMap* _tmp106_;
					BalaMap* _tmp107_;
					const gchar* _tmp108_;
					gpointer _tmp109_;
					gchar* _tmp110_;
					_tmp102_ = self->priv->stream;
					_tmp103_ = separator;
					_tmp104_ = arg_name;
					_tmp105_ = attr;
					_tmp106_ = bala_attribute_get_args (_tmp105_);
					_tmp107_ = _tmp106_;
					_tmp108_ = arg_name;
					_tmp109_ = bala_map_get (_tmp107_, _tmp108_);
					_tmp110_ = (gchar*) _tmp109_;
					fprintf (_tmp102_, "%s%s = %s", _tmp103_, _tmp104_, _tmp110_);
					_g_free0 (_tmp110_);
				}
				separator = ", ";
			}
			_tmp111_ = self->priv->stream;
			fputs (")", _tmp111_);
		}
		_tmp112_ = self->priv->stream;
		fputs ("]", _tmp112_);
		if (BALA_IS_PARAMETER (node)) {
			_tmp113_ = TRUE;
		} else {
			_tmp113_ = BALA_IS_PROPERTY_ACCESSOR (node);
		}
		if (_tmp113_) {
			bala_code_writer_write_string (self, " ");
		} else {
			bala_code_writer_write_newline (self);
		}
		_g_sequence_free0 (keys);
	}
	_tmp115_ = self->priv->type;
	if (_tmp115_ == BALA_CODE_WRITER_TYPE_FAST) {
		gboolean _tmp116_ = FALSE;
		if (BALA_IS_PARAMETER (node)) {
			_tmp116_ = TRUE;
		} else {
			_tmp116_ = BALA_IS_PROPERTY_ACCESSOR (node);
		}
		_tmp114_ = !_tmp116_;
	} else {
		_tmp114_ = FALSE;
	}
	if (_tmp114_) {
		BalaSourceReference* source_reference = NULL;
		BalaSourceReference* _tmp117_;
		BalaSourceReference* _tmp118_;
		BalaSourceReference* _tmp119_;
		BalaSourceReference* _tmp120_;
		_tmp117_ = bala_code_node_get_source_reference (node);
		_tmp118_ = _tmp117_;
		_tmp119_ = _bala_source_reference_ref0 (_tmp118_);
		source_reference = _tmp119_;
		_tmp120_ = source_reference;
		if (_tmp120_ != NULL) {
			gchar* filename = NULL;
			BalaSourceReference* _tmp121_;
			BalaSourceFile* _tmp122_;
			BalaSourceFile* _tmp123_;
			const gchar* _tmp124_;
			const gchar* _tmp125_;
			gchar* _tmp126_;
			const gchar* _tmp127_;
			BalaCodeContext* _tmp128_;
			const gchar* _tmp129_;
			const gchar* _tmp130_;
			FILE* _tmp138_;
			const gchar* _tmp139_;
			BalaSourceReference* _tmp140_;
			BalaSourceLocation _tmp141_ = {0};
			BalaSourceLocation _tmp142_;
			BalaSourceReference* _tmp143_;
			BalaSourceLocation _tmp144_ = {0};
			BalaSourceLocation _tmp145_;
			gchar* _tmp146_;
			gchar* _tmp147_;
			bala_code_writer_write_indent (self);
			_tmp121_ = source_reference;
			_tmp122_ = bala_source_reference_get_file (_tmp121_);
			_tmp123_ = _tmp122_;
			_tmp124_ = bala_source_file_get_filename (_tmp123_);
			_tmp125_ = _tmp124_;
			_tmp126_ = g_strdup (_tmp125_);
			filename = _tmp126_;
			_tmp127_ = filename;
			_tmp128_ = self->priv->context;
			_tmp129_ = bala_code_context_get_basedir (_tmp128_);
			_tmp130_ = _tmp129_;
			if (g_str_has_prefix (_tmp127_, _tmp130_)) {
				const gchar* _tmp131_;
				BalaCodeContext* _tmp132_;
				const gchar* _tmp133_;
				const gchar* _tmp134_;
				gint _tmp135_;
				gint _tmp136_;
				gchar* _tmp137_;
				_tmp131_ = filename;
				_tmp132_ = self->priv->context;
				_tmp133_ = bala_code_context_get_basedir (_tmp132_);
				_tmp134_ = _tmp133_;
				_tmp135_ = strlen (_tmp134_);
				_tmp136_ = _tmp135_;
				_tmp137_ = string_substring (_tmp131_, (glong) (_tmp136_ + 1), (glong) -1);
				_g_free0 (filename);
				filename = _tmp137_;
			}
			_tmp138_ = self->priv->stream;
			_tmp139_ = filename;
			_tmp140_ = source_reference;
			bala_source_reference_get_begin (_tmp140_, &_tmp141_);
			_tmp142_ = _tmp141_;
			_tmp143_ = source_reference;
			bala_source_reference_get_begin (_tmp143_, &_tmp144_);
			_tmp145_ = _tmp144_;
			_tmp146_ = g_strdup_printf ("[Source (filename = \"%s\", line = %i, column = %i)]", _tmp139_, _tmp142_.line, _tmp145_.column);
			_tmp147_ = _tmp146_;
			fputs (_tmp147_, _tmp138_);
			_g_free0 (_tmp147_);
			bala_code_writer_write_newline (self);
			_g_free0 (filename);
		}
		_bala_source_reference_unref0 (source_reference);
	}
	_g_sequence_free0 (attributes);
}

static void
bala_code_writer_write_accessibility (BalaCodeWriter* self,
                                      BalaSymbol* sym)
{
	BalaSymbolAccessibility _tmp0_;
	BalaSymbolAccessibility _tmp1_;
	const gchar* _tmp2_;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
	BalaCodeWriterType _tmp6_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sym != NULL);
	_tmp0_ = bala_symbol_get_access (sym);
	_tmp1_ = _tmp0_;
	_tmp2_ = bala_symbol_accessibility_to_string (_tmp1_);
	bala_code_writer_write_string (self, _tmp2_);
	bala_code_writer_write_string (self, " ");
	_tmp6_ = self->priv->type;
	if (_tmp6_ != BALA_CODE_WRITER_TYPE_EXTERNAL) {
		BalaCodeWriterType _tmp7_;
		_tmp7_ = self->priv->type;
		_tmp5_ = _tmp7_ != BALA_CODE_WRITER_TYPE_BAPIGEN;
	} else {
		_tmp5_ = FALSE;
	}
	if (_tmp5_) {
		gboolean _tmp8_;
		gboolean _tmp9_;
		_tmp8_ = bala_symbol_get_external (sym);
		_tmp9_ = _tmp8_;
		_tmp4_ = _tmp9_;
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		gboolean _tmp10_;
		gboolean _tmp11_;
		_tmp10_ = bala_symbol_get_external_package (sym);
		_tmp11_ = _tmp10_;
		_tmp3_ = !_tmp11_;
	} else {
		_tmp3_ = FALSE;
	}
	if (_tmp3_) {
		bala_code_writer_write_string (self, "extern ");
	}
}

static void
bala_code_writer_write_property_accessor_accessibility (BalaCodeWriter* self,
                                                        BalaSymbol* sym)
{
	BalaSymbolAccessibility _tmp0_;
	BalaSymbolAccessibility _tmp1_;
	BalaSymbolAccessibility _tmp2_;
	BalaSymbolAccessibility _tmp3_;
	const gchar* _tmp4_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sym != NULL);
	_tmp0_ = bala_symbol_get_access (sym);
	_tmp1_ = _tmp0_;
	if (_tmp1_ == BALA_SYMBOL_ACCESSIBILITY_PUBLIC) {
		return;
	}
	bala_code_writer_write_string (self, " ");
	_tmp2_ = bala_symbol_get_access (sym);
	_tmp3_ = _tmp2_;
	_tmp4_ = bala_symbol_accessibility_to_string (_tmp3_);
	bala_code_writer_write_string (self, _tmp4_);
}

static void
bala_code_writer_write_type_parameters (BalaCodeWriter* self,
                                        BalaList* type_params)
{
	gint _tmp0_;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (type_params != NULL);
	_tmp0_ = bala_collection_get_size ((BalaCollection*) type_params);
	_tmp1_ = _tmp0_;
	if (_tmp1_ > 0) {
		gboolean first = FALSE;
		bala_code_writer_write_string (self, "<");
		first = TRUE;
		{
			BalaList* _type_param_list = NULL;
			BalaList* _tmp2_;
			gint _type_param_size = 0;
			BalaList* _tmp3_;
			gint _tmp4_;
			gint _tmp5_;
			gint _type_param_index = 0;
			_tmp2_ = _bala_iterable_ref0 (type_params);
			_type_param_list = _tmp2_;
			_tmp3_ = _type_param_list;
			_tmp4_ = bala_collection_get_size ((BalaCollection*) _tmp3_);
			_tmp5_ = _tmp4_;
			_type_param_size = _tmp5_;
			_type_param_index = -1;
			while (TRUE) {
				gint _tmp6_;
				gint _tmp7_;
				BalaTypeParameter* type_param = NULL;
				BalaList* _tmp8_;
				gpointer _tmp9_;
				BalaTypeParameter* _tmp10_;
				const gchar* _tmp11_;
				const gchar* _tmp12_;
				_type_param_index = _type_param_index + 1;
				_tmp6_ = _type_param_index;
				_tmp7_ = _type_param_size;
				if (!(_tmp6_ < _tmp7_)) {
					break;
				}
				_tmp8_ = _type_param_list;
				_tmp9_ = bala_list_get (_tmp8_, _type_param_index);
				type_param = (BalaTypeParameter*) _tmp9_;
				if (first) {
					first = FALSE;
				} else {
					bala_code_writer_write_string (self, ",");
				}
				_tmp10_ = type_param;
				_tmp11_ = bala_symbol_get_name ((BalaSymbol*) _tmp10_);
				_tmp12_ = _tmp11_;
				bala_code_writer_write_identifier (self, _tmp12_);
				_bala_code_node_unref0 (type_param);
			}
			_bala_iterable_unref0 (_type_param_list);
		}
		bala_code_writer_write_string (self, ">");
	}
}

static void
bala_code_writer_class_init (BalaCodeWriterClass * klass,
                             gpointer klass_data)
{
	bala_code_writer_parent_class = g_type_class_peek_parent (klass);
	((BalaCodeVisitorClass *) klass)->finalize = bala_code_writer_finalize;
	g_type_class_adjust_private_offset (klass, &BalaCodeWriter_private_offset);
	((BalaCodeVisitorClass *) klass)->visit_using_directive = (void (*) (BalaCodeVisitor*, BalaUsingDirective*)) bala_code_writer_real_visit_using_directive;
	((BalaCodeVisitorClass *) klass)->visit_namespace = (void (*) (BalaCodeVisitor*, BalaNamespace*)) bala_code_writer_real_visit_namespace;
	((BalaCodeVisitorClass *) klass)->visit_class = (void (*) (BalaCodeVisitor*, BalaClass*)) bala_code_writer_real_visit_class;
	((BalaCodeVisitorClass *) klass)->visit_struct = (void (*) (BalaCodeVisitor*, BalaStruct*)) bala_code_writer_real_visit_struct;
	((BalaCodeVisitorClass *) klass)->visit_interface = (void (*) (BalaCodeVisitor*, BalaInterface*)) bala_code_writer_real_visit_interface;
	((BalaCodeVisitorClass *) klass)->visit_enum = (void (*) (BalaCodeVisitor*, BalaEnum*)) bala_code_writer_real_visit_enum;
	((BalaCodeVisitorClass *) klass)->visit_error_domain = (void (*) (BalaCodeVisitor*, BalaErrorDomain*)) bala_code_writer_real_visit_error_domain;
	((BalaCodeVisitorClass *) klass)->visit_constant = (void (*) (BalaCodeVisitor*, BalaConstant*)) bala_code_writer_real_visit_constant;
	((BalaCodeVisitorClass *) klass)->visit_field = (void (*) (BalaCodeVisitor*, BalaField*)) bala_code_writer_real_visit_field;
	((BalaCodeVisitorClass *) klass)->visit_delegate = (void (*) (BalaCodeVisitor*, BalaDelegate*)) bala_code_writer_real_visit_delegate;
	((BalaCodeVisitorClass *) klass)->visit_constructor = (void (*) (BalaCodeVisitor*, BalaConstructor*)) bala_code_writer_real_visit_constructor;
	((BalaCodeVisitorClass *) klass)->visit_destructor = (void (*) (BalaCodeVisitor*, BalaDestructor*)) bala_code_writer_real_visit_destructor;
	((BalaCodeVisitorClass *) klass)->visit_method = (void (*) (BalaCodeVisitor*, BalaMethod*)) bala_code_writer_real_visit_method;
	((BalaCodeVisitorClass *) klass)->visit_creation_method = (void (*) (BalaCodeVisitor*, BalaCreationMethod*)) bala_code_writer_real_visit_creation_method;
	((BalaCodeVisitorClass *) klass)->visit_property = (void (*) (BalaCodeVisitor*, BalaProperty*)) bala_code_writer_real_visit_property;
	((BalaCodeVisitorClass *) klass)->visit_signal = (void (*) (BalaCodeVisitor*, BalaSignal*)) bala_code_writer_real_visit_signal;
	((BalaCodeVisitorClass *) klass)->visit_block = (void (*) (BalaCodeVisitor*, BalaBlock*)) bala_code_writer_real_visit_block;
	((BalaCodeVisitorClass *) klass)->visit_empty_statement = (void (*) (BalaCodeVisitor*, BalaEmptyStatement*)) bala_code_writer_real_visit_empty_statement;
	((BalaCodeVisitorClass *) klass)->visit_declaration_statement = (void (*) (BalaCodeVisitor*, BalaDeclarationStatement*)) bala_code_writer_real_visit_declaration_statement;
	((BalaCodeVisitorClass *) klass)->visit_local_variable = (void (*) (BalaCodeVisitor*, BalaLocalVariable*)) bala_code_writer_real_visit_local_variable;
	((BalaCodeVisitorClass *) klass)->visit_initializer_list = (void (*) (BalaCodeVisitor*, BalaInitializerList*)) bala_code_writer_real_visit_initializer_list;
	((BalaCodeVisitorClass *) klass)->visit_expression_statement = (void (*) (BalaCodeVisitor*, BalaExpressionStatement*)) bala_code_writer_real_visit_expression_statement;
	((BalaCodeVisitorClass *) klass)->visit_if_statement = (void (*) (BalaCodeVisitor*, BalaIfStatement*)) bala_code_writer_real_visit_if_statement;
	((BalaCodeVisitorClass *) klass)->visit_switch_statement = (void (*) (BalaCodeVisitor*, BalaSwitchStatement*)) bala_code_writer_real_visit_switch_statement;
	((BalaCodeVisitorClass *) klass)->visit_switch_section = (void (*) (BalaCodeVisitor*, BalaSwitchSection*)) bala_code_writer_real_visit_switch_section;
	((BalaCodeVisitorClass *) klass)->visit_switch_label = (void (*) (BalaCodeVisitor*, BalaSwitchLabel*)) bala_code_writer_real_visit_switch_label;
	((BalaCodeVisitorClass *) klass)->visit_loop = (void (*) (BalaCodeVisitor*, BalaLoop*)) bala_code_writer_real_visit_loop;
	((BalaCodeVisitorClass *) klass)->visit_while_statement = (void (*) (BalaCodeVisitor*, BalaWhileStatement*)) bala_code_writer_real_visit_while_statement;
	((BalaCodeVisitorClass *) klass)->visit_do_statement = (void (*) (BalaCodeVisitor*, BalaDoStatement*)) bala_code_writer_real_visit_do_statement;
	((BalaCodeVisitorClass *) klass)->visit_for_statement = (void (*) (BalaCodeVisitor*, BalaForStatement*)) bala_code_writer_real_visit_for_statement;
	((BalaCodeVisitorClass *) klass)->visit_foreach_statement = (void (*) (BalaCodeVisitor*, BalaForeachStatement*)) bala_code_writer_real_visit_foreach_statement;
	((BalaCodeVisitorClass *) klass)->visit_break_statement = (void (*) (BalaCodeVisitor*, BalaBreakStatement*)) bala_code_writer_real_visit_break_statement;
	((BalaCodeVisitorClass *) klass)->visit_continue_statement = (void (*) (BalaCodeVisitor*, BalaContinueStatement*)) bala_code_writer_real_visit_continue_statement;
	((BalaCodeVisitorClass *) klass)->visit_return_statement = (void (*) (BalaCodeVisitor*, BalaReturnStatement*)) bala_code_writer_real_visit_return_statement;
	((BalaCodeVisitorClass *) klass)->visit_yield_statement = (void (*) (BalaCodeVisitor*, BalaYieldStatement*)) bala_code_writer_real_visit_yield_statement;
	((BalaCodeVisitorClass *) klass)->visit_throw_statement = (void (*) (BalaCodeVisitor*, BalaThrowStatement*)) bala_code_writer_real_visit_throw_statement;
	((BalaCodeVisitorClass *) klass)->visit_try_statement = (void (*) (BalaCodeVisitor*, BalaTryStatement*)) bala_code_writer_real_visit_try_statement;
	((BalaCodeVisitorClass *) klass)->visit_catch_clause = (void (*) (BalaCodeVisitor*, BalaCatchClause*)) bala_code_writer_real_visit_catch_clause;
	((BalaCodeVisitorClass *) klass)->visit_lock_statement = (void (*) (BalaCodeVisitor*, BalaLockStatement*)) bala_code_writer_real_visit_lock_statement;
	((BalaCodeVisitorClass *) klass)->visit_unlock_statement = (void (*) (BalaCodeVisitor*, BalaUnlockStatement*)) bala_code_writer_real_visit_unlock_statement;
	((BalaCodeVisitorClass *) klass)->visit_delete_statement = (void (*) (BalaCodeVisitor*, BalaDeleteStatement*)) bala_code_writer_real_visit_delete_statement;
	((BalaCodeVisitorClass *) klass)->visit_array_creation_expression = (void (*) (BalaCodeVisitor*, BalaArrayCreationExpression*)) bala_code_writer_real_visit_array_creation_expression;
	((BalaCodeVisitorClass *) klass)->visit_boolean_literal = (void (*) (BalaCodeVisitor*, BalaBooleanLiteral*)) bala_code_writer_real_visit_boolean_literal;
	((BalaCodeVisitorClass *) klass)->visit_character_literal = (void (*) (BalaCodeVisitor*, BalaCharacterLiteral*)) bala_code_writer_real_visit_character_literal;
	((BalaCodeVisitorClass *) klass)->visit_integer_literal = (void (*) (BalaCodeVisitor*, BalaIntegerLiteral*)) bala_code_writer_real_visit_integer_literal;
	((BalaCodeVisitorClass *) klass)->visit_real_literal = (void (*) (BalaCodeVisitor*, BalaRealLiteral*)) bala_code_writer_real_visit_real_literal;
	((BalaCodeVisitorClass *) klass)->visit_string_literal = (void (*) (BalaCodeVisitor*, BalaStringLiteral*)) bala_code_writer_real_visit_string_literal;
	((BalaCodeVisitorClass *) klass)->visit_null_literal = (void (*) (BalaCodeVisitor*, BalaNullLiteral*)) bala_code_writer_real_visit_null_literal;
	((BalaCodeVisitorClass *) klass)->visit_member_access = (void (*) (BalaCodeVisitor*, BalaMemberAccess*)) bala_code_writer_real_visit_member_access;
	((BalaCodeVisitorClass *) klass)->visit_method_call = (void (*) (BalaCodeVisitor*, BalaMethodCall*)) bala_code_writer_real_visit_method_call;
	((BalaCodeVisitorClass *) klass)->visit_element_access = (void (*) (BalaCodeVisitor*, BalaElementAccess*)) bala_code_writer_real_visit_element_access;
	((BalaCodeVisitorClass *) klass)->visit_slice_expression = (void (*) (BalaCodeVisitor*, BalaSliceExpression*)) bala_code_writer_real_visit_slice_expression;
	((BalaCodeVisitorClass *) klass)->visit_base_access = (void (*) (BalaCodeVisitor*, BalaBaseAccess*)) bala_code_writer_real_visit_base_access;
	((BalaCodeVisitorClass *) klass)->visit_postfix_expression = (void (*) (BalaCodeVisitor*, BalaPostfixExpression*)) bala_code_writer_real_visit_postfix_expression;
	((BalaCodeVisitorClass *) klass)->visit_object_creation_expression = (void (*) (BalaCodeVisitor*, BalaObjectCreationExpression*)) bala_code_writer_real_visit_object_creation_expression;
	((BalaCodeVisitorClass *) klass)->visit_sizeof_expression = (void (*) (BalaCodeVisitor*, BalaSizeofExpression*)) bala_code_writer_real_visit_sizeof_expression;
	((BalaCodeVisitorClass *) klass)->visit_typeof_expression = (void (*) (BalaCodeVisitor*, BalaTypeofExpression*)) bala_code_writer_real_visit_typeof_expression;
	((BalaCodeVisitorClass *) klass)->visit_unary_expression = (void (*) (BalaCodeVisitor*, BalaUnaryExpression*)) bala_code_writer_real_visit_unary_expression;
	((BalaCodeVisitorClass *) klass)->visit_cast_expression = (void (*) (BalaCodeVisitor*, BalaCastExpression*)) bala_code_writer_real_visit_cast_expression;
	((BalaCodeVisitorClass *) klass)->visit_pointer_indirection = (void (*) (BalaCodeVisitor*, BalaPointerIndirection*)) bala_code_writer_real_visit_pointer_indirection;
	((BalaCodeVisitorClass *) klass)->visit_addressof_expression = (void (*) (BalaCodeVisitor*, BalaAddressofExpression*)) bala_code_writer_real_visit_addressof_expression;
	((BalaCodeVisitorClass *) klass)->visit_reference_transfer_expression = (void (*) (BalaCodeVisitor*, BalaReferenceTransferExpression*)) bala_code_writer_real_visit_reference_transfer_expression;
	((BalaCodeVisitorClass *) klass)->visit_binary_expression = (void (*) (BalaCodeVisitor*, BalaBinaryExpression*)) bala_code_writer_real_visit_binary_expression;
	((BalaCodeVisitorClass *) klass)->visit_type_check = (void (*) (BalaCodeVisitor*, BalaTypeCheck*)) bala_code_writer_real_visit_type_check;
	((BalaCodeVisitorClass *) klass)->visit_conditional_expression = (void (*) (BalaCodeVisitor*, BalaConditionalExpression*)) bala_code_writer_real_visit_conditional_expression;
	((BalaCodeVisitorClass *) klass)->visit_lambda_expression = (void (*) (BalaCodeVisitor*, BalaLambdaExpression*)) bala_code_writer_real_visit_lambda_expression;
	((BalaCodeVisitorClass *) klass)->visit_assignment = (void (*) (BalaCodeVisitor*, BalaAssignment*)) bala_code_writer_real_visit_assignment;
}

static void
bala_code_writer_instance_init (BalaCodeWriter * self,
                                gpointer klass)
{
	self->priv = bala_code_writer_get_instance_private (self);
	self->priv->bol = TRUE;
	self->priv->override_header = NULL;
	self->priv->header_to_override = NULL;
}

static void
bala_code_writer_finalize (BalaCodeVisitor * obj)
{
	BalaCodeWriter * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BALA_TYPE_CODE_WRITER, BalaCodeWriter);
	_bala_code_context_unref0 (self->priv->context);
	_fclose0 (self->priv->stream);
	_bala_scope_unref0 (self->priv->current_scope);
	_g_free0 (self->priv->override_header);
	_g_free0 (self->priv->header_to_override);
	BALA_CODE_VISITOR_CLASS (bala_code_writer_parent_class)->finalize (obj);
}

/**
 * Code visitor generating Bala API file for the public interface.
 */
static GType
bala_code_writer_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (BalaCodeWriterClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) bala_code_writer_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BalaCodeWriter), 0, (GInstanceInitFunc) bala_code_writer_instance_init, NULL };
	GType bala_code_writer_type_id;
	bala_code_writer_type_id = g_type_register_static (BALA_TYPE_CODE_VISITOR, "BalaCodeWriter", &g_define_type_info, 0);
	BalaCodeWriter_private_offset = g_type_add_instance_private (bala_code_writer_type_id, sizeof (BalaCodeWriterPrivate));
	return bala_code_writer_type_id;
}

GType
bala_code_writer_get_type (void)
{
	static volatile gsize bala_code_writer_type_id__volatile = 0;
	if (g_once_init_enter (&bala_code_writer_type_id__volatile)) {
		GType bala_code_writer_type_id;
		bala_code_writer_type_id = bala_code_writer_get_type_once ();
		g_once_init_leave (&bala_code_writer_type_id__volatile, bala_code_writer_type_id);
	}
	return bala_code_writer_type_id__volatile;
}

static GType
bala_code_writer_type_get_type_once (void)
{
	static const GEnumValue values[] = {{BALA_CODE_WRITER_TYPE_EXTERNAL, "BALA_CODE_WRITER_TYPE_EXTERNAL", "external"}, {BALA_CODE_WRITER_TYPE_INTERNAL, "BALA_CODE_WRITER_TYPE_INTERNAL", "internal"}, {BALA_CODE_WRITER_TYPE_FAST, "BALA_CODE_WRITER_TYPE_FAST", "fast"}, {BALA_CODE_WRITER_TYPE_DUMP, "BALA_CODE_WRITER_TYPE_DUMP", "dump"}, {BALA_CODE_WRITER_TYPE_BAPIGEN, "BALA_CODE_WRITER_TYPE_BAPIGEN", "bapigen"}, {0, NULL, NULL}};
	GType bala_code_writer_type_type_id;
	bala_code_writer_type_type_id = g_enum_register_static ("BalaCodeWriterType", values);
	return bala_code_writer_type_type_id;
}

GType
bala_code_writer_type_get_type (void)
{
	static volatile gsize bala_code_writer_type_type_id__volatile = 0;
	if (g_once_init_enter (&bala_code_writer_type_type_id__volatile)) {
		GType bala_code_writer_type_type_id;
		bala_code_writer_type_type_id = bala_code_writer_type_get_type_once ();
		g_once_init_leave (&bala_code_writer_type_type_id__volatile, bala_code_writer_type_type_id);
	}
	return bala_code_writer_type_type_id__volatile;
}

static void
_bala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_bala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_bala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gint
_bala_array_length (gpointer array)
{
	gint length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

