/* treebuilder.c generated by balac, the Bala compiler
 * generated from treebuilder.bala, do not modify */

/* treebuilder.bala
 *
 * Copyright (C) 2011  Florian Brosch
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Florian Brosch <flo.brosch@gmail.com>
 */

#include <bala.h>
#include <glib-object.h>
#include <balagee.h>
#include <baladoc.h>
#include <glib.h>
#include <stdlib.h>
#include <string.h>
#include <balacodegen.h>
#include <glib/gstdio.h>
#include <gobject/gvaluecollector.h>

#define BALADOC_TYPE_TREE_BUILDER (baladoc_tree_builder_get_type ())
#define BALADOC_TREE_BUILDER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BALADOC_TYPE_TREE_BUILDER, BaladocTreeBuilder))
#define BALADOC_TREE_BUILDER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BALADOC_TYPE_TREE_BUILDER, BaladocTreeBuilderClass))
#define BALADOC_IS_TREE_BUILDER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BALADOC_TYPE_TREE_BUILDER))
#define BALADOC_IS_TREE_BUILDER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BALADOC_TYPE_TREE_BUILDER))
#define BALADOC_TREE_BUILDER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BALADOC_TYPE_TREE_BUILDER, BaladocTreeBuilderClass))

typedef struct _BaladocTreeBuilder BaladocTreeBuilder;
typedef struct _BaladocTreeBuilderClass BaladocTreeBuilderClass;
typedef struct _BaladocTreeBuilderPrivate BaladocTreeBuilderPrivate;

#define BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA (baladoc_tree_builder_package_meta_data_get_type ())
#define BALADOC_TREE_BUILDER_PACKAGE_META_DATA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA, BaladocTreeBuilderPackageMetaData))
#define BALADOC_TREE_BUILDER_PACKAGE_META_DATA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA, BaladocTreeBuilderPackageMetaDataClass))
#define BALADOC_TREE_BUILDER_IS_PACKAGE_META_DATA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA))
#define BALADOC_TREE_BUILDER_IS_PACKAGE_META_DATA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA))
#define BALADOC_TREE_BUILDER_PACKAGE_META_DATA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA, BaladocTreeBuilderPackageMetaDataClass))

typedef struct _BaladocTreeBuilderPackageMetaData BaladocTreeBuilderPackageMetaData;
typedef struct _BaladocTreeBuilderPackageMetaDataClass BaladocTreeBuilderPackageMetaDataClass;
#define _bala_iterable_unref0(var) ((var == NULL) ? NULL : (var = (bala_iterable_unref (var), NULL)))
#define _baladoc_tree_builder_package_meta_data_unref0(var) ((var == NULL) ? NULL : (var = (baladoc_tree_builder_package_meta_data_unref (var), NULL)))
#define _bala_map_unref0(var) ((var == NULL) ? NULL : (var = (bala_map_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _baladoc_api_tree_unref0(var) ((var == NULL) ? NULL : (var = (baladoc_api_tree_unref (var), NULL)))
#define _bala_code_node_unref0(var) ((var == NULL) ? NULL : (var = (bala_code_node_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _baladoc_api_source_comment_unref0(var) ((var == NULL) ? NULL : (var = (baladoc_api_source_comment_unref (var), NULL)))
#define _bala_source_reference_unref0(var) ((var == NULL) ? NULL : (var = (bala_source_reference_unref (var), NULL)))
#define _bala_comment_unref0(var) ((var == NULL) ? NULL : (var = (bala_comment_unref (var), NULL)))
#define _bala_map_iterator_unref0(var) ((var == NULL) ? NULL : (var = (bala_map_iterator_unref (var), NULL)))
typedef struct _BaladocTreeBuilderPackageMetaDataPrivate BaladocTreeBuilderPackageMetaDataPrivate;
#define _bala_source_file_unref0(var) ((var == NULL) ? NULL : (var = (bala_source_file_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _bala_code_visitor_unref0(var) ((var == NULL) ? NULL : (var = (bala_code_visitor_unref (var), NULL)))
#define _bala_code_context_unref0(var) ((var == NULL) ? NULL : (var = (bala_code_context_unref (var), NULL)))
typedef struct _BaladocTreeBuilderParamSpecPackageMetaData BaladocTreeBuilderParamSpecPackageMetaData;
#define _bala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _bala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _bala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _bala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _BaladocTreeBuilder {
	BalaCodeVisitor parent_instance;
	BaladocTreeBuilderPrivate * priv;
};

struct _BaladocTreeBuilderClass {
	BalaCodeVisitorClass parent_class;
};

struct _BaladocTreeBuilderPrivate {
	BalaArrayList* packages;
	BaladocTreeBuilderPackageMetaData* source_package;
	BalaHashMap* files;
	BalaHashMap* symbol_map;
	BaladocErrorReporter* reporter;
	BaladocSettings* settings;
	BaladocApiNode* current_node;
	BaladocApiTree* tree;
	BaladocApiClass* glib_error;
};

struct _BaladocTreeBuilderPackageMetaData {
	GTypeInstance parent_instance;
	volatile int ref_count;
	BaladocApiPackage* package;
	BalaHashMap* namespaces;
	BalaArrayList* files;
	BaladocTreeBuilderPackageMetaDataPrivate * priv;
};

struct _BaladocTreeBuilderPackageMetaDataClass {
	GTypeClass parent_class;
	void (*finalize) (BaladocTreeBuilderPackageMetaData *self);
};

struct _BaladocTreeBuilderParamSpecPackageMetaData {
	GParamSpec parent_instance;
};

static gint BaladocTreeBuilder_private_offset;
static gpointer baladoc_tree_builder_parent_class = NULL;
static gpointer baladoc_tree_builder_package_meta_data_parent_class = NULL;

GType baladoc_tree_builder_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (BaladocTreeBuilder, bala_code_visitor_unref)
static gpointer baladoc_tree_builder_package_meta_data_ref (gpointer instance);
static void baladoc_tree_builder_package_meta_data_unref (gpointer instance);
static GParamSpec* baladoc_tree_builder_param_spec_package_meta_data (const gchar* name,
                                                               const gchar* nick,
                                                               const gchar* blurb,
                                                               GType object_type,
                                                               GParamFlags flags) G_GNUC_UNUSED;
static void baladoc_tree_builder_value_set_package_meta_data (GValue* value,
                                                       gpointer v_object) G_GNUC_UNUSED;
static void baladoc_tree_builder_value_take_package_meta_data (GValue* value,
                                                        gpointer v_object) G_GNUC_UNUSED;
static gpointer baladoc_tree_builder_value_get_package_meta_data (const GValue* value) G_GNUC_UNUSED;
static GType baladoc_tree_builder_package_meta_data_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (BaladocTreeBuilderPackageMetaData, baladoc_tree_builder_package_meta_data_unref)
BaladocApiClass* baladoc_tree_builder_get_glib_error (BaladocTreeBuilder* self);
BalaHashMap* baladoc_tree_builder_get_symbol_map (BaladocTreeBuilder* self);
static BaladocApiPointer* baladoc_tree_builder_create_pointer (BaladocTreeBuilder* self,
                                                        BalaPointerType* vtyperef,
                                                        BaladocApiItem* parent,
                                                        BaladocApiNode* caller);
static BaladocApiArray* baladoc_tree_builder_create_array (BaladocTreeBuilder* self,
                                                    BalaArrayType* vtyperef,
                                                    BaladocApiItem* parent,
                                                    BaladocApiNode* caller);
static BaladocApiTypeReference* baladoc_tree_builder_create_type_reference (BaladocTreeBuilder* self,
                                                                     BalaDataType* vtyperef,
                                                                     BaladocApiItem* parent,
                                                                     BaladocApiNode* caller);
static void baladoc_tree_builder_process_attributes (BaladocTreeBuilder* self,
                                              BaladocApiSymbol* parent,
                                              GList* lst);
static BaladocApiSourceComment* baladoc_tree_builder_create_comment (BaladocTreeBuilder* self,
                                                              BalaComment* comment);
static gchar* baladoc_tree_builder_get_method_name (BaladocTreeBuilder* self,
                                             BalaMethod* element);
static BaladocTreeBuilderPackageMetaData* baladoc_tree_builder_get_package_meta_data (BaladocTreeBuilder* self,
                                                                               BaladocApiPackage* pkg);
static BaladocTreeBuilderPackageMetaData* baladoc_tree_builder_register_package (BaladocTreeBuilder* self,
                                                                          BaladocApiPackage* package);
static BaladocTreeBuilderPackageMetaData* baladoc_tree_builder_package_meta_data_new (BaladocApiPackage* package);
static BaladocTreeBuilderPackageMetaData* baladoc_tree_builder_package_meta_data_construct (GType object_type,
                                                                                     BaladocApiPackage* package);
static BaladocApiSourceFile* baladoc_tree_builder_register_source_file (BaladocTreeBuilder* self,
                                                                 BaladocTreeBuilderPackageMetaData* meta_data,
                                                                 BalaSourceFile* source_file);
static void baladoc_tree_builder_package_meta_data_register_source_file (BaladocTreeBuilderPackageMetaData* self,
                                                                  BalaSourceFile* file);
static BaladocApiSourceFile* baladoc_tree_builder_get_source_file (BaladocTreeBuilder* self,
                                                            BalaSymbol* symbol);
static BaladocApiPackage* baladoc_tree_builder_find_package_for_file (BaladocTreeBuilder* self,
                                                               BalaSourceFile* source_file);
static gboolean baladoc_tree_builder_package_meta_data_is_package_for_file (BaladocTreeBuilderPackageMetaData* self,
                                                                     BalaSourceFile* source_file);
static BaladocApiNamespace* baladoc_tree_builder_get_namespace (BaladocTreeBuilder* self,
                                                         BaladocApiPackage* pkg,
                                                         BalaSymbol* symbol,
                                                         BaladocApiSourceFile* file);
static BaladocApiNamespace* baladoc_tree_builder_package_meta_data_get_namespace (BaladocTreeBuilderPackageMetaData* self,
                                                                           BalaNamespace* vns,
                                                                           BaladocApiSourceFile* file);
static gchar* baladoc_tree_builder_get_package_name (BaladocTreeBuilder* self,
                                              const gchar* path);
static gboolean baladoc_tree_builder_add_package (BaladocTreeBuilder* self,
                                           BalaCodeContext* context,
                                           const gchar* pkg);
static void baladoc_tree_builder_add_deps (BaladocTreeBuilder* self,
                                    BalaCodeContext* context,
                                    const gchar* file_path,
                                    const gchar* pkg_name);
static void baladoc_tree_builder_add_depencies (BaladocTreeBuilder* self,
                                         BalaCodeContext* context,
                                         gchar** packages,
                                         gint packages_length1);
static void baladoc_tree_builder_add_documented_files (BaladocTreeBuilder* self,
                                                BalaCodeContext* context,
                                                gchar** sources,
                                                gint sources_length1);
static void baladoc_tree_builder_create_balac_tree (BaladocTreeBuilder* self,
                                             BalaCodeContext* context,
                                             BaladocSettings* settings);
static void baladoc_tree_builder_process_children (BaladocTreeBuilder* self,
                                            BaladocApiNode* node,
                                            BalaCodeNode* element);
static BaladocApiNode* baladoc_tree_builder_get_parent_node_for (BaladocTreeBuilder* self,
                                                          BalaSymbol* element);
static void baladoc_tree_builder_real_visit_namespace (BalaCodeVisitor* base,
                                                BalaNamespace* element);
static void baladoc_tree_builder_real_visit_class (BalaCodeVisitor* base,
                                            BalaClass* element);
static void baladoc_tree_builder_real_visit_interface (BalaCodeVisitor* base,
                                                BalaInterface* element);
static void baladoc_tree_builder_real_visit_struct (BalaCodeVisitor* base,
                                             BalaStruct* element);
static void baladoc_tree_builder_real_visit_field (BalaCodeVisitor* base,
                                            BalaField* element);
static void baladoc_tree_builder_real_visit_property (BalaCodeVisitor* base,
                                               BalaProperty* element);
static void baladoc_tree_builder_real_visit_creation_method (BalaCodeVisitor* base,
                                                      BalaCreationMethod* element);
static void baladoc_tree_builder_real_visit_method (BalaCodeVisitor* base,
                                             BalaMethod* element);
static void baladoc_tree_builder_real_visit_signal (BalaCodeVisitor* base,
                                             BalaSignal* element);
static void baladoc_tree_builder_real_visit_delegate (BalaCodeVisitor* base,
                                               BalaDelegate* element);
static void baladoc_tree_builder_real_visit_enum (BalaCodeVisitor* base,
                                           BalaEnum* element);
static void baladoc_tree_builder_real_visit_enum_value (BalaCodeVisitor* base,
                                                 BalaEnumValue* element);
static void baladoc_tree_builder_real_visit_constant (BalaCodeVisitor* base,
                                               BalaConstant* element);
static void baladoc_tree_builder_real_visit_error_domain (BalaCodeVisitor* base,
                                                   BalaErrorDomain* element);
static void baladoc_tree_builder_real_visit_error_code (BalaCodeVisitor* base,
                                                 BalaErrorCode* element);
static void baladoc_tree_builder_real_visit_type_parameter (BalaCodeVisitor* base,
                                                     BalaTypeParameter* element);
static void baladoc_tree_builder_real_visit_formal_parameter (BalaCodeVisitor* base,
                                                       BalaParameter* element);
BaladocApiTree* baladoc_tree_builder_build (BaladocTreeBuilder* self,
                                            BaladocSettings* settings,
                                            BaladocErrorReporter* reporter);
BaladocTreeBuilder* baladoc_tree_builder_new (void);
BaladocTreeBuilder* baladoc_tree_builder_construct (GType object_type);
static void baladoc_tree_builder_package_meta_data_finalize (BaladocTreeBuilderPackageMetaData * obj);
static GType baladoc_tree_builder_package_meta_data_get_type_once (void);
static void baladoc_tree_builder_finalize (BalaCodeVisitor * obj);
static GType baladoc_tree_builder_get_type_once (void);
static void _bala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _bala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _bala_array_length (gpointer array);

static inline gpointer
baladoc_tree_builder_get_instance_private (BaladocTreeBuilder* self)
{
	return G_STRUCT_MEMBER_P (self, BaladocTreeBuilder_private_offset);
}

static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}

BaladocApiClass*
baladoc_tree_builder_get_glib_error (BaladocTreeBuilder* self)
{
	BaladocApiClass* _tmp0_;
	BaladocApiClass* _tmp1_;
	BaladocApiClass* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->glib_error;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	result = _tmp1_;
	return result;
}

static gpointer
_bala_map_ref0 (gpointer self)
{
	return self ? bala_map_ref (self) : NULL;
}

BalaHashMap*
baladoc_tree_builder_get_symbol_map (BaladocTreeBuilder* self)
{
	BalaHashMap* _tmp0_;
	BalaHashMap* _tmp1_;
	BalaHashMap* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->symbol_map;
	_tmp1_ = _bala_map_ref0 (_tmp0_);
	result = _tmp1_;
	return result;
}

static gpointer
_bala_code_node_ref0 (gpointer self)
{
	return self ? bala_code_node_ref (self) : NULL;
}

static BaladocApiPointer*
baladoc_tree_builder_create_pointer (BaladocTreeBuilder* self,
                                     BalaPointerType* vtyperef,
                                     BaladocApiItem* parent,
                                     BaladocApiNode* caller)
{
	BaladocApiPointer* ptr = NULL;
	BaladocApiPointer* _tmp0_;
	BalaDataType* vntype = NULL;
	BalaDataType* _tmp1_;
	BalaDataType* _tmp2_;
	BalaDataType* _tmp3_;
	BalaDataType* _tmp4_;
	BaladocApiPointer* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (vtyperef != NULL, NULL);
	g_return_val_if_fail (parent != NULL, NULL);
	g_return_val_if_fail (caller != NULL, NULL);
	_tmp0_ = baladoc_api_pointer_new (parent, vtyperef);
	ptr = _tmp0_;
	_tmp1_ = bala_pointer_type_get_base_type (vtyperef);
	_tmp2_ = _tmp1_;
	_tmp3_ = _bala_code_node_ref0 (_tmp2_);
	vntype = _tmp3_;
	_tmp4_ = vntype;
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp4_, BALA_TYPE_POINTER_TYPE)) {
		BaladocApiPointer* _tmp5_;
		BalaDataType* _tmp6_;
		BaladocApiPointer* _tmp7_;
		BaladocApiPointer* _tmp8_;
		BaladocApiPointer* _tmp9_;
		_tmp5_ = ptr;
		_tmp6_ = vntype;
		_tmp7_ = ptr;
		_tmp8_ = baladoc_tree_builder_create_pointer (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, BALA_TYPE_POINTER_TYPE, BalaPointerType), (BaladocApiItem*) _tmp7_, caller);
		_tmp9_ = _tmp8_;
		baladoc_api_pointer_set_data_type (_tmp5_, (BaladocApiItem*) _tmp9_);
		_g_object_unref0 (_tmp9_);
	} else {
		BalaDataType* _tmp10_;
		_tmp10_ = vntype;
		if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp10_, BALA_TYPE_ARRAY_TYPE)) {
			BaladocApiPointer* _tmp11_;
			BalaDataType* _tmp12_;
			BaladocApiPointer* _tmp13_;
			BaladocApiArray* _tmp14_;
			BaladocApiArray* _tmp15_;
			_tmp11_ = ptr;
			_tmp12_ = vntype;
			_tmp13_ = ptr;
			_tmp14_ = baladoc_tree_builder_create_array (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, BALA_TYPE_ARRAY_TYPE, BalaArrayType), (BaladocApiItem*) _tmp13_, caller);
			_tmp15_ = _tmp14_;
			baladoc_api_pointer_set_data_type (_tmp11_, (BaladocApiItem*) _tmp15_);
			_g_object_unref0 (_tmp15_);
		} else {
			BaladocApiPointer* _tmp16_;
			BalaDataType* _tmp17_;
			BaladocApiPointer* _tmp18_;
			BaladocApiTypeReference* _tmp19_;
			BaladocApiTypeReference* _tmp20_;
			_tmp16_ = ptr;
			_tmp17_ = vntype;
			_tmp18_ = ptr;
			_tmp19_ = baladoc_tree_builder_create_type_reference (self, _tmp17_, (BaladocApiItem*) _tmp18_, caller);
			_tmp20_ = _tmp19_;
			baladoc_api_pointer_set_data_type (_tmp16_, (BaladocApiItem*) _tmp20_);
			_g_object_unref0 (_tmp20_);
		}
	}
	result = ptr;
	_bala_code_node_unref0 (vntype);
	return result;
}

static BaladocApiArray*
baladoc_tree_builder_create_array (BaladocTreeBuilder* self,
                                   BalaArrayType* vtyperef,
                                   BaladocApiItem* parent,
                                   BaladocApiNode* caller)
{
	BaladocApiArray* arr = NULL;
	BaladocApiArray* _tmp0_;
	BalaDataType* vntype = NULL;
	BalaDataType* _tmp1_;
	BalaDataType* _tmp2_;
	BalaDataType* _tmp3_;
	BalaDataType* _tmp4_;
	BaladocApiArray* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (vtyperef != NULL, NULL);
	g_return_val_if_fail (parent != NULL, NULL);
	g_return_val_if_fail (caller != NULL, NULL);
	_tmp0_ = baladoc_api_array_new (parent, vtyperef);
	arr = _tmp0_;
	_tmp1_ = bala_array_type_get_element_type (vtyperef);
	_tmp2_ = _tmp1_;
	_tmp3_ = _bala_code_node_ref0 (_tmp2_);
	vntype = _tmp3_;
	_tmp4_ = vntype;
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp4_, BALA_TYPE_ARRAY_TYPE)) {
		BaladocApiArray* _tmp5_;
		BalaDataType* _tmp6_;
		BaladocApiArray* _tmp7_;
		BaladocApiArray* _tmp8_;
		BaladocApiArray* _tmp9_;
		_tmp5_ = arr;
		_tmp6_ = vntype;
		_tmp7_ = arr;
		_tmp8_ = baladoc_tree_builder_create_array (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, BALA_TYPE_ARRAY_TYPE, BalaArrayType), (BaladocApiItem*) _tmp7_, caller);
		_tmp9_ = _tmp8_;
		baladoc_api_array_set_data_type (_tmp5_, (BaladocApiItem*) _tmp9_);
		_g_object_unref0 (_tmp9_);
	} else {
		BaladocApiArray* _tmp10_;
		BalaDataType* _tmp11_;
		BaladocApiArray* _tmp12_;
		BaladocApiTypeReference* _tmp13_;
		BaladocApiTypeReference* _tmp14_;
		_tmp10_ = arr;
		_tmp11_ = vntype;
		_tmp12_ = arr;
		_tmp13_ = baladoc_tree_builder_create_type_reference (self, _tmp11_, (BaladocApiItem*) _tmp12_, caller);
		_tmp14_ = _tmp13_;
		baladoc_api_array_set_data_type (_tmp10_, (BaladocApiItem*) _tmp14_);
		_g_object_unref0 (_tmp14_);
	}
	result = arr;
	_bala_code_node_unref0 (vntype);
	return result;
}

static gpointer
_bala_iterable_ref0 (gpointer self)
{
	return self ? bala_iterable_ref (self) : NULL;
}

static BaladocApiTypeReference*
baladoc_tree_builder_create_type_reference (BaladocTreeBuilder* self,
                                            BalaDataType* vtyperef,
                                            BaladocApiItem* parent,
                                            BaladocApiNode* caller)
{
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean is_nullable = FALSE;
	gchar* _tmp5_ = NULL;
	gboolean _tmp6_ = FALSE;
	gchar* signature = NULL;
	gchar* _tmp12_;
	gboolean _tmp13_ = FALSE;
	gboolean is_dynamic = FALSE;
	BaladocApiTypeReference* type_ref = NULL;
	const gchar* _tmp16_;
	BaladocApiTypeReference* _tmp17_;
	BaladocApiTypeReference* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (parent != NULL, NULL);
	g_return_val_if_fail (caller != NULL, NULL);
	if (vtyperef != NULL) {
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp3_ = bala_data_type_get_nullable (vtyperef);
		_tmp4_ = _tmp3_;
		_tmp2_ = _tmp4_;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		_tmp1_ = !G_TYPE_CHECK_INSTANCE_TYPE (vtyperef, BALA_TYPE_GENERIC_TYPE);
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		_tmp0_ = !G_TYPE_CHECK_INSTANCE_TYPE (vtyperef, BALA_TYPE_POINTER_TYPE);
	} else {
		_tmp0_ = FALSE;
	}
	is_nullable = _tmp0_;
	if (vtyperef != NULL) {
		BalaTypeSymbol* _tmp7_;
		BalaTypeSymbol* _tmp8_;
		_tmp7_ = bala_data_type_get_type_symbol (vtyperef);
		_tmp8_ = _tmp7_;
		_tmp6_ = _tmp8_ != NULL;
	} else {
		_tmp6_ = FALSE;
	}
	if (_tmp6_) {
		BalaTypeSymbol* _tmp9_;
		BalaTypeSymbol* _tmp10_;
		gchar* _tmp11_;
		_tmp9_ = bala_data_type_get_type_symbol (vtyperef);
		_tmp10_ = _tmp9_;
		_tmp11_ = bala_gvariant_module_get_dbus_signature ((BalaSymbol*) _tmp10_);
		_g_free0 (_tmp5_);
		_tmp5_ = _tmp11_;
	} else {
		_g_free0 (_tmp5_);
		_tmp5_ = NULL;
	}
	_tmp12_ = g_strdup (_tmp5_);
	signature = _tmp12_;
	if (vtyperef != NULL) {
		gboolean _tmp14_;
		gboolean _tmp15_;
		_tmp14_ = bala_data_type_get_is_dynamic (vtyperef);
		_tmp15_ = _tmp14_;
		_tmp13_ = _tmp15_;
	} else {
		_tmp13_ = FALSE;
	}
	is_dynamic = _tmp13_;
	_tmp16_ = signature;
	_tmp17_ = baladoc_api_typereference_new (parent, is_dynamic, is_nullable, _tmp16_, vtyperef);
	type_ref = _tmp17_;
	if (G_TYPE_CHECK_INSTANCE_TYPE (vtyperef, BALA_TYPE_POINTER_TYPE)) {
		BaladocApiTypeReference* _tmp18_;
		BaladocApiTypeReference* _tmp19_;
		BaladocApiPointer* _tmp20_;
		BaladocApiPointer* _tmp21_;
		_tmp18_ = type_ref;
		_tmp19_ = type_ref;
		_tmp20_ = baladoc_tree_builder_create_pointer (self, G_TYPE_CHECK_INSTANCE_CAST (vtyperef, BALA_TYPE_POINTER_TYPE, BalaPointerType), (BaladocApiItem*) _tmp19_, caller);
		_tmp21_ = _tmp20_;
		baladoc_api_typereference_set_data_type (_tmp18_, (BaladocApiItem*) _tmp21_);
		_g_object_unref0 (_tmp21_);
	} else {
		if (G_TYPE_CHECK_INSTANCE_TYPE (vtyperef, BALA_TYPE_ARRAY_TYPE)) {
			BaladocApiTypeReference* _tmp22_;
			BaladocApiTypeReference* _tmp23_;
			BaladocApiArray* _tmp24_;
			BaladocApiArray* _tmp25_;
			_tmp22_ = type_ref;
			_tmp23_ = type_ref;
			_tmp24_ = baladoc_tree_builder_create_array (self, G_TYPE_CHECK_INSTANCE_CAST (vtyperef, BALA_TYPE_ARRAY_TYPE, BalaArrayType), (BaladocApiItem*) _tmp23_, caller);
			_tmp25_ = _tmp24_;
			baladoc_api_typereference_set_data_type (_tmp22_, (BaladocApiItem*) _tmp25_);
			_g_object_unref0 (_tmp25_);
		}
	}
	if (vtyperef != NULL) {
		{
			BalaList* _vdtype_list = NULL;
			BalaList* _tmp26_;
			BalaList* _tmp27_;
			gint _vdtype_size = 0;
			BalaList* _tmp28_;
			gint _tmp29_;
			gint _tmp30_;
			gint _vdtype_index = 0;
			_tmp26_ = bala_data_type_get_type_arguments (vtyperef);
			_tmp27_ = _bala_iterable_ref0 (_tmp26_);
			_vdtype_list = _tmp27_;
			_tmp28_ = _vdtype_list;
			_tmp29_ = bala_collection_get_size ((BalaCollection*) _tmp28_);
			_tmp30_ = _tmp29_;
			_vdtype_size = _tmp30_;
			_vdtype_index = -1;
			while (TRUE) {
				gint _tmp31_;
				gint _tmp32_;
				BalaDataType* vdtype = NULL;
				BalaList* _tmp33_;
				gpointer _tmp34_;
				BaladocApiTypeReference* type_param = NULL;
				BalaDataType* _tmp35_;
				BaladocApiTypeReference* _tmp36_;
				BaladocApiTypeReference* _tmp37_;
				BaladocApiTypeReference* _tmp38_;
				BaladocApiTypeReference* _tmp39_;
				_vdtype_index = _vdtype_index + 1;
				_tmp31_ = _vdtype_index;
				_tmp32_ = _vdtype_size;
				if (!(_tmp31_ < _tmp32_)) {
					break;
				}
				_tmp33_ = _vdtype_list;
				_tmp34_ = bala_list_get (_tmp33_, _vdtype_index);
				vdtype = (BalaDataType*) _tmp34_;
				_tmp35_ = vdtype;
				_tmp36_ = type_ref;
				_tmp37_ = baladoc_tree_builder_create_type_reference (self, _tmp35_, (BaladocApiItem*) _tmp36_, caller);
				type_param = _tmp37_;
				_tmp38_ = type_ref;
				_tmp39_ = type_param;
				baladoc_api_typereference_add_type_argument (_tmp38_, _tmp39_);
				_g_object_unref0 (type_param);
				_bala_code_node_unref0 (vdtype);
			}
			_bala_iterable_unref0 (_vdtype_list);
		}
	}
	result = type_ref;
	_g_free0 (signature);
	_g_free0 (_tmp5_);
	return result;
}

static void
baladoc_tree_builder_process_attributes (BaladocTreeBuilder* self,
                                         BaladocApiSymbol* parent,
                                         GList* lst)
{
	g_return_if_fail (self != NULL);
	g_return_if_fail (parent != NULL);
	{
		GList* att_collection = NULL;
		GList* att_it = NULL;
		att_collection = lst;
		for (att_it = att_collection; att_it != NULL; att_it = att_it->next) {
			BalaAttribute* _tmp0_;
			BalaAttribute* att = NULL;
			_tmp0_ = _bala_code_node_ref0 ((BalaAttribute*) att_it->data);
			att = _tmp0_;
			{
				BaladocApiAttribute* new_attribute = NULL;
				BaladocApiSourceFile* _tmp1_;
				BaladocApiSourceFile* _tmp2_;
				BalaAttribute* _tmp3_;
				const gchar* _tmp4_;
				const gchar* _tmp5_;
				BalaAttribute* _tmp6_;
				BaladocApiAttribute* _tmp7_;
				BaladocApiAttribute* _tmp8_;
				BaladocApiAttribute* _tmp9_;
				_tmp1_ = baladoc_api_node_get_source_file ((BaladocApiNode*) parent);
				_tmp2_ = _tmp1_;
				_tmp3_ = att;
				_tmp4_ = bala_attribute_get_name (_tmp3_);
				_tmp5_ = _tmp4_;
				_tmp6_ = att;
				_tmp7_ = baladoc_api_attribute_new ((BaladocApiNode*) parent, _tmp2_, _tmp5_, _tmp6_);
				_tmp8_ = _tmp7_;
				_g_object_unref0 (_tmp2_);
				new_attribute = _tmp8_;
				_tmp9_ = new_attribute;
				baladoc_api_symbol_add_attribute (parent, _tmp9_);
				_g_object_unref0 (new_attribute);
				_bala_code_node_unref0 (att);
			}
		}
	}
}

static gpointer
_bala_source_reference_ref0 (gpointer self)
{
	return self ? bala_source_reference_ref (self) : NULL;
}

static BaladocApiSourceComment*
baladoc_tree_builder_create_comment (BaladocTreeBuilder* self,
                                     BalaComment* comment)
{
	BaladocApiSourceComment* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	if (comment != NULL) {
		BalaSourceReference* pos = NULL;
		BalaSourceReference* _tmp0_;
		BalaSourceReference* _tmp1_;
		BalaSourceReference* _tmp2_;
		BaladocApiSourceFile* file = NULL;
		BalaHashMap* _tmp3_;
		BalaSourceReference* _tmp4_;
		BalaSourceFile* _tmp5_;
		BalaSourceFile* _tmp6_;
		gpointer _tmp7_;
		_tmp0_ = bala_comment_get_source_reference (comment);
		_tmp1_ = _tmp0_;
		_tmp2_ = _bala_source_reference_ref0 (_tmp1_);
		pos = _tmp2_;
		_tmp3_ = self->priv->files;
		_tmp4_ = pos;
		_tmp5_ = bala_source_reference_get_file (_tmp4_);
		_tmp6_ = _tmp5_;
		_tmp7_ = bala_map_get ((BalaMap*) _tmp3_, _tmp6_);
		file = (BaladocApiSourceFile*) _tmp7_;
		if (G_TYPE_CHECK_INSTANCE_TYPE (comment, BALA_TYPE_GIR_COMMENT)) {
			BaladocApiGirSourceComment* tmp = NULL;
			const gchar* _tmp8_;
			const gchar* _tmp9_;
			BaladocApiSourceFile* _tmp10_;
			BalaSourceReference* _tmp11_;
			BalaSourceLocation _tmp12_ = {0};
			BalaSourceLocation _tmp13_;
			BalaSourceReference* _tmp14_;
			BalaSourceLocation _tmp15_ = {0};
			BalaSourceLocation _tmp16_;
			BalaSourceReference* _tmp17_;
			BalaSourceLocation _tmp18_ = {0};
			BalaSourceLocation _tmp19_;
			BalaSourceReference* _tmp20_;
			BalaSourceLocation _tmp21_ = {0};
			BalaSourceLocation _tmp22_;
			BaladocApiGirSourceComment* _tmp23_;
			BalaComment* _tmp24_;
			BalaComment* _tmp25_;
			BalaMapIterator* it = NULL;
			BalaMapIterator* _tmp51_;
			_tmp8_ = bala_comment_get_content (comment);
			_tmp9_ = _tmp8_;
			_tmp10_ = file;
			_tmp11_ = pos;
			bala_source_reference_get_begin (_tmp11_, &_tmp12_);
			_tmp13_ = _tmp12_;
			_tmp14_ = pos;
			bala_source_reference_get_begin (_tmp14_, &_tmp15_);
			_tmp16_ = _tmp15_;
			_tmp17_ = pos;
			bala_source_reference_get_end (_tmp17_, &_tmp18_);
			_tmp19_ = _tmp18_;
			_tmp20_ = pos;
			bala_source_reference_get_end (_tmp20_, &_tmp21_);
			_tmp22_ = _tmp21_;
			_tmp23_ = baladoc_api_gir_source_comment_new (_tmp9_, _tmp10_, _tmp13_.line, _tmp16_.column, _tmp19_.line, _tmp22_.column);
			tmp = _tmp23_;
			_tmp24_ = bala_gir_comment_get_return_content (G_TYPE_CHECK_INSTANCE_CAST (comment, BALA_TYPE_GIR_COMMENT, BalaGirComment));
			_tmp25_ = _tmp24_;
			if (_tmp25_ != NULL) {
				BalaSourceReference* return_pos = NULL;
				BalaComment* _tmp26_;
				BalaComment* _tmp27_;
				BalaSourceReference* _tmp28_;
				BalaSourceReference* _tmp29_;
				BalaSourceReference* _tmp30_;
				BaladocApiGirSourceComment* _tmp31_;
				BalaComment* _tmp32_;
				BalaComment* _tmp33_;
				const gchar* _tmp34_;
				const gchar* _tmp35_;
				BaladocApiSourceFile* _tmp36_;
				BalaSourceReference* _tmp37_;
				BalaSourceLocation _tmp38_ = {0};
				BalaSourceLocation _tmp39_;
				BalaSourceReference* _tmp40_;
				BalaSourceLocation _tmp41_ = {0};
				BalaSourceLocation _tmp42_;
				BalaSourceReference* _tmp43_;
				BalaSourceLocation _tmp44_ = {0};
				BalaSourceLocation _tmp45_;
				BalaSourceReference* _tmp46_;
				BalaSourceLocation _tmp47_ = {0};
				BalaSourceLocation _tmp48_;
				BaladocApiSourceComment* _tmp49_;
				BaladocApiSourceComment* _tmp50_;
				_tmp26_ = bala_gir_comment_get_return_content (G_TYPE_CHECK_INSTANCE_CAST (comment, BALA_TYPE_GIR_COMMENT, BalaGirComment));
				_tmp27_ = _tmp26_;
				_tmp28_ = bala_comment_get_source_reference (_tmp27_);
				_tmp29_ = _tmp28_;
				_tmp30_ = _bala_source_reference_ref0 (_tmp29_);
				return_pos = _tmp30_;
				_tmp31_ = tmp;
				_tmp32_ = bala_gir_comment_get_return_content (G_TYPE_CHECK_INSTANCE_CAST (comment, BALA_TYPE_GIR_COMMENT, BalaGirComment));
				_tmp33_ = _tmp32_;
				_tmp34_ = bala_comment_get_content (_tmp33_);
				_tmp35_ = _tmp34_;
				_tmp36_ = file;
				_tmp37_ = return_pos;
				bala_source_reference_get_begin (_tmp37_, &_tmp38_);
				_tmp39_ = _tmp38_;
				_tmp40_ = return_pos;
				bala_source_reference_get_begin (_tmp40_, &_tmp41_);
				_tmp42_ = _tmp41_;
				_tmp43_ = return_pos;
				bala_source_reference_get_end (_tmp43_, &_tmp44_);
				_tmp45_ = _tmp44_;
				_tmp46_ = return_pos;
				bala_source_reference_get_end (_tmp46_, &_tmp47_);
				_tmp48_ = _tmp47_;
				_tmp49_ = baladoc_api_source_comment_new (_tmp35_, _tmp36_, _tmp39_.line, _tmp42_.column, _tmp45_.line, _tmp48_.column);
				_tmp50_ = _tmp49_;
				baladoc_api_gir_source_comment_set_return_comment (_tmp31_, _tmp50_);
				_baladoc_api_source_comment_unref0 (_tmp50_);
				_bala_source_reference_unref0 (return_pos);
			}
			_tmp51_ = bala_gir_comment_parameter_iterator (G_TYPE_CHECK_INSTANCE_CAST (comment, BALA_TYPE_GIR_COMMENT, BalaGirComment));
			it = _tmp51_;
			while (TRUE) {
				BalaMapIterator* _tmp52_;
				BalaComment* bala_param = NULL;
				BalaMapIterator* _tmp53_;
				gpointer _tmp54_;
				BalaSourceReference* param_pos = NULL;
				BalaComment* _tmp55_;
				BalaSourceReference* _tmp56_;
				BalaSourceReference* _tmp57_;
				BalaSourceReference* _tmp58_;
				BaladocApiSourceComment* param_comment = NULL;
				BalaComment* _tmp59_;
				const gchar* _tmp60_;
				const gchar* _tmp61_;
				BaladocApiSourceFile* _tmp62_;
				BalaSourceReference* _tmp63_;
				BalaSourceLocation _tmp64_ = {0};
				BalaSourceLocation _tmp65_;
				BalaSourceReference* _tmp66_;
				BalaSourceLocation _tmp67_ = {0};
				BalaSourceLocation _tmp68_;
				BalaSourceReference* _tmp69_;
				BalaSourceLocation _tmp70_ = {0};
				BalaSourceLocation _tmp71_;
				BalaSourceReference* _tmp72_;
				BalaSourceLocation _tmp73_ = {0};
				BalaSourceLocation _tmp74_;
				BaladocApiSourceComment* _tmp75_;
				BaladocApiGirSourceComment* _tmp76_;
				BalaMapIterator* _tmp77_;
				gpointer _tmp78_;
				gchar* _tmp79_;
				BaladocApiSourceComment* _tmp80_;
				_tmp52_ = it;
				if (!bala_map_iterator_next (_tmp52_)) {
					break;
				}
				_tmp53_ = it;
				_tmp54_ = bala_map_iterator_get_value (_tmp53_);
				bala_param = (BalaComment*) _tmp54_;
				_tmp55_ = bala_param;
				_tmp56_ = bala_comment_get_source_reference (_tmp55_);
				_tmp57_ = _tmp56_;
				_tmp58_ = _bala_source_reference_ref0 (_tmp57_);
				param_pos = _tmp58_;
				_tmp59_ = bala_param;
				_tmp60_ = bala_comment_get_content (_tmp59_);
				_tmp61_ = _tmp60_;
				_tmp62_ = file;
				_tmp63_ = param_pos;
				bala_source_reference_get_begin (_tmp63_, &_tmp64_);
				_tmp65_ = _tmp64_;
				_tmp66_ = param_pos;
				bala_source_reference_get_begin (_tmp66_, &_tmp67_);
				_tmp68_ = _tmp67_;
				_tmp69_ = param_pos;
				bala_source_reference_get_end (_tmp69_, &_tmp70_);
				_tmp71_ = _tmp70_;
				_tmp72_ = param_pos;
				bala_source_reference_get_end (_tmp72_, &_tmp73_);
				_tmp74_ = _tmp73_;
				_tmp75_ = baladoc_api_source_comment_new (_tmp61_, _tmp62_, _tmp65_.line, _tmp68_.column, _tmp71_.line, _tmp74_.column);
				param_comment = _tmp75_;
				_tmp76_ = tmp;
				_tmp77_ = it;
				_tmp78_ = bala_map_iterator_get_key (_tmp77_);
				_tmp79_ = (gchar*) _tmp78_;
				_tmp80_ = param_comment;
				baladoc_api_gir_source_comment_add_parameter_content (_tmp76_, _tmp79_, _tmp80_);
				_g_free0 (_tmp79_);
				_baladoc_api_source_comment_unref0 (param_comment);
				_bala_source_reference_unref0 (param_pos);
				_bala_comment_unref0 (bala_param);
			}
			result = (BaladocApiSourceComment*) tmp;
			_bala_map_iterator_unref0 (it);
			_g_object_unref0 (file);
			_bala_source_reference_unref0 (pos);
			return result;
		} else {
			const gchar* _tmp81_;
			const gchar* _tmp82_;
			BaladocApiSourceFile* _tmp83_;
			BalaSourceReference* _tmp84_;
			BalaSourceLocation _tmp85_ = {0};
			BalaSourceLocation _tmp86_;
			BalaSourceReference* _tmp87_;
			BalaSourceLocation _tmp88_ = {0};
			BalaSourceLocation _tmp89_;
			BalaSourceReference* _tmp90_;
			BalaSourceLocation _tmp91_ = {0};
			BalaSourceLocation _tmp92_;
			BalaSourceReference* _tmp93_;
			BalaSourceLocation _tmp94_ = {0};
			BalaSourceLocation _tmp95_;
			BaladocApiSourceComment* _tmp96_;
			_tmp81_ = bala_comment_get_content (comment);
			_tmp82_ = _tmp81_;
			_tmp83_ = file;
			_tmp84_ = pos;
			bala_source_reference_get_begin (_tmp84_, &_tmp85_);
			_tmp86_ = _tmp85_;
			_tmp87_ = pos;
			bala_source_reference_get_begin (_tmp87_, &_tmp88_);
			_tmp89_ = _tmp88_;
			_tmp90_ = pos;
			bala_source_reference_get_end (_tmp90_, &_tmp91_);
			_tmp92_ = _tmp91_;
			_tmp93_ = pos;
			bala_source_reference_get_end (_tmp93_, &_tmp94_);
			_tmp95_ = _tmp94_;
			_tmp96_ = baladoc_api_source_comment_new (_tmp82_, _tmp83_, _tmp86_.line, _tmp89_.column, _tmp92_.line, _tmp95_.column);
			result = _tmp96_;
			_g_object_unref0 (file);
			_bala_source_reference_unref0 (pos);
			return result;
		}
		_g_object_unref0 (file);
		_bala_source_reference_unref0 (pos);
	}
	result = NULL;
	return result;
}

static gchar*
baladoc_tree_builder_get_method_name (BaladocTreeBuilder* self,
                                      BalaMethod* element)
{
	const gchar* _tmp17_;
	const gchar* _tmp18_;
	gchar* _tmp19_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (element != NULL, NULL);
	if (G_TYPE_CHECK_INSTANCE_TYPE (element, BALA_TYPE_CREATION_METHOD)) {
		const gchar* _tmp0_;
		const gchar* _tmp1_;
		_tmp0_ = bala_symbol_get_name ((BalaSymbol*) element);
		_tmp1_ = _tmp0_;
		if (g_strcmp0 (_tmp1_, ".new") == 0) {
			BalaSymbol* _tmp2_;
			BalaSymbol* _tmp3_;
			const gchar* _tmp4_;
			const gchar* _tmp5_;
			gchar* _tmp6_;
			_tmp2_ = bala_symbol_get_parent_symbol ((BalaSymbol*) element);
			_tmp3_ = _tmp2_;
			_tmp4_ = bala_symbol_get_name (_tmp3_);
			_tmp5_ = _tmp4_;
			_tmp6_ = g_strdup (_tmp5_);
			result = _tmp6_;
			return result;
		} else {
			BalaSymbol* _tmp7_;
			BalaSymbol* _tmp8_;
			const gchar* _tmp9_;
			const gchar* _tmp10_;
			gchar* _tmp11_;
			gchar* _tmp12_;
			const gchar* _tmp13_;
			const gchar* _tmp14_;
			gchar* _tmp15_;
			gchar* _tmp16_;
			_tmp7_ = bala_symbol_get_parent_symbol ((BalaSymbol*) element);
			_tmp8_ = _tmp7_;
			_tmp9_ = bala_symbol_get_name (_tmp8_);
			_tmp10_ = _tmp9_;
			_tmp11_ = g_strconcat (_tmp10_, ".", NULL);
			_tmp12_ = _tmp11_;
			_tmp13_ = bala_symbol_get_name ((BalaSymbol*) element);
			_tmp14_ = _tmp13_;
			_tmp15_ = g_strconcat (_tmp12_, _tmp14_, NULL);
			_tmp16_ = _tmp15_;
			_g_free0 (_tmp12_);
			result = _tmp16_;
			return result;
		}
	}
	_tmp17_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp18_ = _tmp17_;
	_tmp19_ = g_strdup (_tmp18_);
	result = _tmp19_;
	return result;
}

static BaladocTreeBuilderPackageMetaData*
baladoc_tree_builder_get_package_meta_data (BaladocTreeBuilder* self,
                                            BaladocApiPackage* pkg)
{
	BaladocTreeBuilderPackageMetaData* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (pkg != NULL, NULL);
	{
		BalaArrayList* _data_list = NULL;
		BalaArrayList* _tmp0_;
		BalaArrayList* _tmp1_;
		gint _data_size = 0;
		BalaArrayList* _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		gint _data_index = 0;
		_tmp0_ = self->priv->packages;
		_tmp1_ = _bala_iterable_ref0 (_tmp0_);
		_data_list = _tmp1_;
		_tmp2_ = _data_list;
		_tmp3_ = bala_collection_get_size ((BalaCollection*) _tmp2_);
		_tmp4_ = _tmp3_;
		_data_size = _tmp4_;
		_data_index = -1;
		while (TRUE) {
			gint _tmp5_;
			gint _tmp6_;
			BaladocTreeBuilderPackageMetaData* data = NULL;
			BalaArrayList* _tmp7_;
			gpointer _tmp8_;
			BaladocTreeBuilderPackageMetaData* _tmp9_;
			BaladocApiPackage* _tmp10_;
			_data_index = _data_index + 1;
			_tmp5_ = _data_index;
			_tmp6_ = _data_size;
			if (!(_tmp5_ < _tmp6_)) {
				break;
			}
			_tmp7_ = _data_list;
			_tmp8_ = bala_list_get ((BalaList*) _tmp7_, _data_index);
			data = (BaladocTreeBuilderPackageMetaData*) _tmp8_;
			_tmp9_ = data;
			_tmp10_ = _tmp9_->package;
			if (_tmp10_ == pkg) {
				result = data;
				_bala_iterable_unref0 (_data_list);
				return result;
			}
			_baladoc_tree_builder_package_meta_data_unref0 (data);
		}
		_bala_iterable_unref0 (_data_list);
	}
	result = NULL;
	return result;
}

static BaladocTreeBuilderPackageMetaData*
baladoc_tree_builder_register_package (BaladocTreeBuilder* self,
                                       BaladocApiPackage* package)
{
	BaladocTreeBuilderPackageMetaData* meta_data = NULL;
	BaladocTreeBuilderPackageMetaData* _tmp0_;
	BaladocApiTree* _tmp1_;
	BalaArrayList* _tmp2_;
	BaladocTreeBuilderPackageMetaData* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (package != NULL, NULL);
	_tmp0_ = baladoc_tree_builder_package_meta_data_new (package);
	meta_data = _tmp0_;
	_tmp1_ = self->priv->tree;
	baladoc_api_tree_add_package (_tmp1_, package);
	_tmp2_ = self->priv->packages;
	bala_collection_add ((BalaCollection*) _tmp2_, meta_data);
	result = meta_data;
	return result;
}

static BaladocApiSourceFile*
baladoc_tree_builder_register_source_file (BaladocTreeBuilder* self,
                                           BaladocTreeBuilderPackageMetaData* meta_data,
                                           BalaSourceFile* source_file)
{
	BaladocApiSourceFile* file = NULL;
	BaladocApiPackage* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	BaladocApiSourceFile* _tmp5_;
	BaladocApiSourceFile* _tmp6_;
	BalaHashMap* _tmp7_;
	BaladocApiSourceFile* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (meta_data != NULL, NULL);
	g_return_val_if_fail (source_file != NULL, NULL);
	_tmp0_ = meta_data->package;
	_tmp1_ = bala_source_file_get_relative_filename (source_file);
	_tmp2_ = _tmp1_;
	_tmp3_ = bala_source_file_get_csource_filename (source_file);
	_tmp4_ = _tmp3_;
	_tmp5_ = baladoc_api_source_file_new (_tmp0_, _tmp2_, _tmp4_, source_file);
	_tmp6_ = _tmp5_;
	_g_free0 (_tmp4_);
	_g_free0 (_tmp2_);
	file = _tmp6_;
	_tmp7_ = self->priv->files;
	bala_map_set ((BalaMap*) _tmp7_, source_file, file);
	baladoc_tree_builder_package_meta_data_register_source_file (meta_data, source_file);
	result = file;
	return result;
}

static BaladocApiSourceFile*
baladoc_tree_builder_get_source_file (BaladocTreeBuilder* self,
                                      BalaSymbol* symbol)
{
	BalaSourceReference* source_ref = NULL;
	BalaSourceReference* _tmp0_;
	BalaSourceReference* _tmp1_;
	BalaSourceReference* _tmp2_;
	BalaSourceReference* _tmp3_;
	BaladocApiSourceFile* file = NULL;
	BalaHashMap* _tmp4_;
	BalaSourceReference* _tmp5_;
	BalaSourceFile* _tmp6_;
	BalaSourceFile* _tmp7_;
	gpointer _tmp8_;
	BaladocApiSourceFile* _tmp9_;
	BaladocApiSourceFile* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (symbol != NULL, NULL);
	_tmp0_ = bala_code_node_get_source_reference ((BalaCodeNode*) symbol);
	_tmp1_ = _tmp0_;
	_tmp2_ = _bala_source_reference_ref0 (_tmp1_);
	source_ref = _tmp2_;
	_tmp3_ = source_ref;
	if (_tmp3_ == NULL) {
		result = NULL;
		_bala_source_reference_unref0 (source_ref);
		return result;
	}
	_tmp4_ = self->priv->files;
	_tmp5_ = source_ref;
	_tmp6_ = bala_source_reference_get_file (_tmp5_);
	_tmp7_ = _tmp6_;
	_tmp8_ = bala_map_get ((BalaMap*) _tmp4_, _tmp7_);
	file = (BaladocApiSourceFile*) _tmp8_;
	_tmp9_ = file;
	_bala_assert (_tmp9_ != NULL, "file != null");
	result = file;
	_bala_source_reference_unref0 (source_ref);
	return result;
}

static BaladocApiPackage*
baladoc_tree_builder_find_package_for_file (BaladocTreeBuilder* self,
                                            BalaSourceFile* source_file)
{
	BaladocApiPackage* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (source_file != NULL, NULL);
	{
		BalaArrayList* _pkg_list = NULL;
		BalaArrayList* _tmp0_;
		BalaArrayList* _tmp1_;
		gint _pkg_size = 0;
		BalaArrayList* _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		gint _pkg_index = 0;
		_tmp0_ = self->priv->packages;
		_tmp1_ = _bala_iterable_ref0 (_tmp0_);
		_pkg_list = _tmp1_;
		_tmp2_ = _pkg_list;
		_tmp3_ = bala_collection_get_size ((BalaCollection*) _tmp2_);
		_tmp4_ = _tmp3_;
		_pkg_size = _tmp4_;
		_pkg_index = -1;
		while (TRUE) {
			gint _tmp5_;
			gint _tmp6_;
			BaladocTreeBuilderPackageMetaData* pkg = NULL;
			BalaArrayList* _tmp7_;
			gpointer _tmp8_;
			BaladocTreeBuilderPackageMetaData* _tmp9_;
			_pkg_index = _pkg_index + 1;
			_tmp5_ = _pkg_index;
			_tmp6_ = _pkg_size;
			if (!(_tmp5_ < _tmp6_)) {
				break;
			}
			_tmp7_ = _pkg_list;
			_tmp8_ = bala_list_get ((BalaList*) _tmp7_, _pkg_index);
			pkg = (BaladocTreeBuilderPackageMetaData*) _tmp8_;
			_tmp9_ = pkg;
			if (baladoc_tree_builder_package_meta_data_is_package_for_file (_tmp9_, source_file)) {
				BaladocTreeBuilderPackageMetaData* _tmp10_;
				BaladocApiPackage* _tmp11_;
				BaladocApiPackage* _tmp12_;
				_tmp10_ = pkg;
				_tmp11_ = _tmp10_->package;
				_tmp12_ = _g_object_ref0 (_tmp11_);
				result = _tmp12_;
				_baladoc_tree_builder_package_meta_data_unref0 (pkg);
				_bala_iterable_unref0 (_pkg_list);
				return result;
			}
			_baladoc_tree_builder_package_meta_data_unref0 (pkg);
		}
		_bala_iterable_unref0 (_pkg_list);
	}
	result = NULL;
	return result;
}

static BaladocApiNamespace*
baladoc_tree_builder_get_namespace (BaladocTreeBuilder* self,
                                    BaladocApiPackage* pkg,
                                    BalaSymbol* symbol,
                                    BaladocApiSourceFile* file)
{
	BalaSymbol* namespace_symbol = NULL;
	BalaSymbol* _tmp0_;
	BaladocTreeBuilderPackageMetaData* meta_data = NULL;
	BaladocTreeBuilderPackageMetaData* _tmp6_;
	BalaSymbol* _tmp7_;
	BaladocApiNamespace* _tmp8_;
	BaladocApiNamespace* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (pkg != NULL, NULL);
	g_return_val_if_fail (symbol != NULL, NULL);
	_tmp0_ = _bala_code_node_ref0 (symbol);
	namespace_symbol = _tmp0_;
	while (TRUE) {
		BalaSymbol* _tmp1_;
		BalaSymbol* _tmp2_;
		BalaSymbol* _tmp3_;
		BalaSymbol* _tmp4_;
		BalaSymbol* _tmp5_;
		_tmp1_ = namespace_symbol;
		if (!(!G_TYPE_CHECK_INSTANCE_TYPE (_tmp1_, BALA_TYPE_NAMESPACE))) {
			break;
		}
		_tmp2_ = namespace_symbol;
		_tmp3_ = bala_symbol_get_parent_symbol (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp5_ = _bala_code_node_ref0 (_tmp4_);
		_bala_code_node_unref0 (namespace_symbol);
		namespace_symbol = _tmp5_;
	}
	_tmp6_ = baladoc_tree_builder_get_package_meta_data (self, pkg);
	meta_data = _tmp6_;
	_bala_assert (meta_data != NULL, "meta_data != null");
	_tmp7_ = namespace_symbol;
	_tmp8_ = baladoc_tree_builder_package_meta_data_get_namespace (meta_data, G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, BALA_TYPE_NAMESPACE, BalaNamespace), file);
	result = _tmp8_;
	_baladoc_tree_builder_package_meta_data_unref0 (meta_data);
	_bala_code_node_unref0 (namespace_symbol);
	return result;
}

static glong
string_strnlen (gchar* str,
                glong maxlen)
{
	gchar* end = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	glong result = 0L;
	_tmp0_ = memchr (str, 0, (gsize) maxlen);
	end = _tmp0_;
	_tmp1_ = end;
	if (_tmp1_ == NULL) {
		result = maxlen;
		return result;
	} else {
		gchar* _tmp2_;
		_tmp2_ = end;
		result = (glong) (_tmp2_ - str);
		return result;
	}
}

static gchar*
string_substring (const gchar* self,
                  glong offset,
                  glong len)
{
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	gchar* _tmp3_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	if (offset >= ((glong) 0)) {
		_tmp0_ = len >= ((glong) 0);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		string_length = string_strnlen ((gchar*) self, offset + len);
	} else {
		gint _tmp1_;
		gint _tmp2_;
		_tmp1_ = strlen (self);
		_tmp2_ = _tmp1_;
		string_length = (glong) _tmp2_;
	}
	if (offset < ((glong) 0)) {
		offset = string_length + offset;
		g_return_val_if_fail (offset >= ((glong) 0), NULL);
	} else {
		g_return_val_if_fail (offset <= string_length, NULL);
	}
	if (len < ((glong) 0)) {
		len = string_length - offset;
	}
	g_return_val_if_fail ((offset + len) <= string_length, NULL);
	_tmp3_ = g_strndup (((gchar*) self) + offset, (gsize) len);
	result = _tmp3_;
	return result;
}

static gint
string_last_index_of_char (const gchar* self,
                           gunichar c,
                           gint start_index)
{
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	gint result = 0;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = g_utf8_strrchr (((gchar*) self) + start_index, (gssize) -1, c);
	_result_ = _tmp0_;
	_tmp1_ = _result_;
	if (_tmp1_ != NULL) {
		gchar* _tmp2_;
		_tmp2_ = _result_;
		result = (gint) (_tmp2_ - ((gchar*) self));
		return result;
	} else {
		result = -1;
		return result;
	}
}

static gchar*
baladoc_tree_builder_get_package_name (BaladocTreeBuilder* self,
                                       const gchar* path)
{
	gchar* file_name = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (path != NULL, NULL);
	_tmp0_ = g_path_get_basename (path);
	file_name = _tmp0_;
	_tmp1_ = string_substring (file_name, (glong) 0, (glong) string_last_index_of_char (file_name, (gunichar) '.', 0));
	result = _tmp1_;
	_g_free0 (file_name);
	return result;
}

static gboolean
baladoc_tree_builder_add_package (BaladocTreeBuilder* self,
                                  BalaCodeContext* context,
                                  const gchar* pkg)
{
	gchar* bapi_name = NULL;
	gchar* _tmp0_;
	gchar* gir_name = NULL;
	gchar* _tmp1_;
	BaladocSettings* _tmp2_;
	gchar** _tmp3_;
	gint _tmp3__length1;
	gchar* _tmp12_ = NULL;
	gchar* _tmp13_;
	gchar* package_path = NULL;
	gchar* _tmp15_;
	const gchar* _tmp16_;
	BalaSourceFile* vfile = NULL;
	const gchar* _tmp19_;
	BalaSourceFile* _tmp20_;
	BalaSourceFile* _tmp21_;
	BaladocApiPackage* vdpkg = NULL;
	BaladocApiPackage* _tmp22_;
	BaladocApiPackage* _tmp23_;
	BaladocTreeBuilderPackageMetaData* _tmp24_;
	BaladocTreeBuilderPackageMetaData* _tmp25_;
	BalaSourceFile* _tmp26_;
	BaladocApiSourceFile* _tmp27_;
	BaladocApiSourceFile* _tmp28_;
	const gchar* _tmp29_;
	gchar* _tmp30_;
	gchar* _tmp31_;
	gchar* _tmp32_;
	gchar* _tmp33_;
	gchar* _tmp34_;
	gchar* _tmp35_;
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (context != NULL, FALSE);
	g_return_val_if_fail (pkg != NULL, FALSE);
	if (bala_code_context_has_package (context, pkg)) {
		result = TRUE;
		return result;
	}
	_tmp0_ = g_strconcat (pkg, ".bapi", NULL);
	bapi_name = _tmp0_;
	_tmp1_ = g_strconcat (pkg, ".gir", NULL);
	gir_name = _tmp1_;
	_tmp2_ = self->priv->settings;
	_tmp3_ = _tmp2_->source_files;
	_tmp3__length1 = _tmp2_->source_files_length1;
	{
		gchar** source_file_collection = NULL;
		gint source_file_collection_length1 = 0;
		gint _source_file_collection_size_ = 0;
		gint source_file_it = 0;
		source_file_collection = _tmp3_;
		source_file_collection_length1 = _tmp3__length1;
		for (source_file_it = 0; source_file_it < source_file_collection_length1; source_file_it = source_file_it + 1) {
			gchar* _tmp4_;
			gchar* source_file = NULL;
			_tmp4_ = g_strdup (source_file_collection[source_file_it]);
			source_file = _tmp4_;
			{
				gchar* basename = NULL;
				const gchar* _tmp5_;
				gchar* _tmp6_;
				gboolean _tmp7_ = FALSE;
				const gchar* _tmp8_;
				const gchar* _tmp9_;
				_tmp5_ = source_file;
				_tmp6_ = g_path_get_basename (_tmp5_);
				basename = _tmp6_;
				_tmp8_ = basename;
				_tmp9_ = bapi_name;
				if (g_strcmp0 (_tmp8_, _tmp9_) == 0) {
					_tmp7_ = TRUE;
				} else {
					const gchar* _tmp10_;
					const gchar* _tmp11_;
					_tmp10_ = basename;
					_tmp11_ = gir_name;
					_tmp7_ = g_strcmp0 (_tmp10_, _tmp11_) == 0;
				}
				if (_tmp7_) {
					result = TRUE;
					_g_free0 (basename);
					_g_free0 (source_file);
					_g_free0 (gir_name);
					_g_free0 (bapi_name);
					return result;
				}
				_g_free0 (basename);
				_g_free0 (source_file);
			}
		}
	}
	_tmp13_ = bala_code_context_get_bapi_path (context, pkg);
	_tmp12_ = _tmp13_;
	if (_tmp12_ == NULL) {
		gchar* _tmp14_;
		_tmp14_ = bala_code_context_get_gir_path (context, pkg);
		_g_free0 (_tmp12_);
		_tmp12_ = _tmp14_;
	}
	_tmp15_ = _tmp12_;
	_tmp12_ = NULL;
	package_path = _tmp15_;
	_tmp16_ = package_path;
	if (_tmp16_ == NULL) {
		gchar* _tmp17_;
		gchar* _tmp18_;
		_tmp17_ = g_strdup_printf ("Package `%s' not found in specified Bala API directories or GObject-In" \
"trospection GIR directories", pkg);
		_tmp18_ = _tmp17_;
		bala_report_error (NULL, _tmp18_);
		_g_free0 (_tmp18_);
		result = FALSE;
		_g_free0 (package_path);
		_g_free0 (_tmp12_);
		_g_free0 (gir_name);
		_g_free0 (bapi_name);
		return result;
	}
	bala_code_context_add_package (context, pkg);
	_tmp19_ = package_path;
	_tmp20_ = bala_source_file_new (context, BALA_SOURCE_FILE_TYPE_PACKAGE, _tmp19_, NULL, FALSE);
	vfile = _tmp20_;
	_tmp21_ = vfile;
	bala_code_context_add_source_file (context, _tmp21_);
	_tmp22_ = baladoc_api_package_new (pkg, TRUE, NULL);
	vdpkg = _tmp22_;
	_tmp23_ = vdpkg;
	_tmp24_ = baladoc_tree_builder_register_package (self, _tmp23_);
	_tmp25_ = _tmp24_;
	_tmp26_ = vfile;
	_tmp27_ = baladoc_tree_builder_register_source_file (self, _tmp25_, _tmp26_);
	_tmp28_ = _tmp27_;
	_g_object_unref0 (_tmp28_);
	_baladoc_tree_builder_package_meta_data_unref0 (_tmp25_);
	_tmp29_ = package_path;
	_tmp30_ = g_path_get_dirname (_tmp29_);
	_tmp31_ = _tmp30_;
	_tmp32_ = g_strdup_printf ("%s.deps", pkg);
	_tmp33_ = _tmp32_;
	_tmp34_ = g_build_filename (_tmp31_, _tmp33_, NULL);
	_tmp35_ = _tmp34_;
	baladoc_tree_builder_add_deps (self, context, _tmp35_, pkg);
	_g_free0 (_tmp35_);
	_g_free0 (_tmp33_);
	_g_free0 (_tmp31_);
	result = TRUE;
	_g_object_unref0 (vdpkg);
	_bala_source_file_unref0 (vfile);
	_g_free0 (package_path);
	_g_free0 (_tmp12_);
	_g_free0 (gir_name);
	_g_free0 (bapi_name);
	return result;
}

static gchar*
string_strip (const gchar* self)
{
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_strdup (self);
	_result_ = _tmp0_;
	g_strstrip (_result_);
	result = _result_;
	return result;
}

static void
baladoc_tree_builder_add_deps (BaladocTreeBuilder* self,
                               BalaCodeContext* context,
                               const gchar* file_path,
                               const gchar* pkg_name)
{
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (context != NULL);
	g_return_if_fail (file_path != NULL);
	g_return_if_fail (pkg_name != NULL);
	if (g_file_test (file_path, G_FILE_TEST_EXISTS)) {
		{
			gchar* deps_content = NULL;
			gulong deps_len = 0UL;
			gchar* _tmp0_ = NULL;
			gsize _tmp1_ = 0UL;
			const gchar* _tmp2_;
			gchar** _tmp3_;
			gchar** _tmp4_;
			g_file_get_contents (file_path, &_tmp0_, &_tmp1_, &_inner_error0_);
			_g_free0 (deps_content);
			deps_content = _tmp0_;
			deps_len = (gulong) _tmp1_;
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				_g_free0 (deps_content);
				if (_inner_error0_->domain == G_FILE_ERROR) {
					goto __catch0_g_file_error;
				}
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
				g_clear_error (&_inner_error0_);
				return;
			}
			_tmp2_ = deps_content;
			_tmp4_ = _tmp3_ = g_strsplit (_tmp2_, "\n", 0);
			{
				gchar** dep_collection = NULL;
				gint dep_collection_length1 = 0;
				gint _dep_collection_size_ = 0;
				gint dep_it = 0;
				dep_collection = _tmp4_;
				dep_collection_length1 = _bala_array_length (_tmp3_);
				for (dep_it = 0; dep_it < dep_collection_length1; dep_it = dep_it + 1) {
					gchar* _tmp5_;
					gchar* dep = NULL;
					_tmp5_ = g_strdup (dep_collection[dep_it]);
					dep = _tmp5_;
					{
						const gchar* _tmp6_;
						gchar* _tmp7_;
						const gchar* _tmp8_;
						_tmp6_ = dep;
						_tmp7_ = string_strip (_tmp6_);
						_g_free0 (dep);
						dep = _tmp7_;
						_tmp8_ = dep;
						if (g_strcmp0 (_tmp8_, "") != 0) {
							const gchar* _tmp9_;
							_tmp9_ = dep;
							if (!baladoc_tree_builder_add_package (self, context, _tmp9_)) {
								const gchar* _tmp10_;
								gchar* _tmp11_;
								gchar* _tmp12_;
								_tmp10_ = dep;
								_tmp11_ = g_strdup_printf ("%s, dependency of %s, not found in specified Bala API directories", _tmp10_, pkg_name);
								_tmp12_ = _tmp11_;
								bala_report_error (NULL, _tmp12_);
								_g_free0 (_tmp12_);
							}
						}
						_g_free0 (dep);
					}
				}
				dep_collection = (_bala_array_free (dep_collection, dep_collection_length1, (GDestroyNotify) g_free), NULL);
			}
			_g_free0 (deps_content);
		}
		goto __finally0;
		__catch0_g_file_error:
		{
			GError* e = NULL;
			GError* _tmp13_;
			const gchar* _tmp14_;
			gchar* _tmp15_;
			gchar* _tmp16_;
			e = _inner_error0_;
			_inner_error0_ = NULL;
			_tmp13_ = e;
			_tmp14_ = _tmp13_->message;
			_tmp15_ = g_strdup_printf ("Unable to read dependency file: %s", _tmp14_);
			_tmp16_ = _tmp15_;
			bala_report_error (NULL, _tmp16_);
			_g_free0 (_tmp16_);
			_g_error_free0 (e);
		}
		__finally0:
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return;
		}
	}
}

/**
 * Adds the specified packages to the list of used packages.
 *
 * @param context The code context
 * @param packages a list of package names
 */
static void
baladoc_tree_builder_add_depencies (BaladocTreeBuilder* self,
                                    BalaCodeContext* context,
                                    gchar** packages,
                                    gint packages_length1)
{
	g_return_if_fail (self != NULL);
	g_return_if_fail (context != NULL);
	{
		gchar** package_collection = NULL;
		gint package_collection_length1 = 0;
		gint _package_collection_size_ = 0;
		gint package_it = 0;
		package_collection = packages;
		package_collection_length1 = packages_length1;
		for (package_it = 0; package_it < package_collection_length1; package_it = package_it + 1) {
			gchar* _tmp0_;
			gchar* package = NULL;
			_tmp0_ = g_strdup (package_collection[package_it]);
			package = _tmp0_;
			{
				const gchar* _tmp1_;
				_tmp1_ = package;
				if (!baladoc_tree_builder_add_package (self, context, _tmp1_)) {
					const gchar* _tmp2_;
					gchar* _tmp3_;
					gchar* _tmp4_;
					_tmp2_ = package;
					_tmp3_ = g_strdup_printf ("Package `%s' not found in specified Bala API directories or GObject-In" \
"trospection GIR directories", _tmp2_);
					_tmp4_ = _tmp3_;
					bala_report_error (NULL, _tmp4_);
					_g_free0 (_tmp4_);
				}
				_g_free0 (package);
			}
		}
	}
}

/**
 * Add the specified source file to the context. Only .bala, .bapi, .gs,
 * and .c files are supported.
 */
static void
baladoc_tree_builder_add_documented_files (BaladocTreeBuilder* self,
                                           BalaCodeContext* context,
                                           gchar** sources,
                                           gint sources_length1)
{
	g_return_if_fail (self != NULL);
	g_return_if_fail (context != NULL);
	if (sources == NULL) {
		return;
	}
	{
		gchar** source_collection = NULL;
		gint source_collection_length1 = 0;
		gint _source_collection_size_ = 0;
		gint source_it = 0;
		source_collection = sources;
		source_collection_length1 = sources_length1;
		for (source_it = 0; source_it < source_collection_length1; source_it = source_it + 1) {
			gchar* _tmp0_;
			gchar* source = NULL;
			_tmp0_ = g_strdup (source_collection[source_it]);
			source = _tmp0_;
			{
				const gchar* _tmp1_;
				_tmp1_ = source;
				if (g_file_test (_tmp1_, G_FILE_TEST_EXISTS)) {
					gchar* rpath = NULL;
					const gchar* _tmp2_;
					gchar* _tmp3_;
					gboolean _tmp4_ = FALSE;
					const gchar* _tmp5_;
					_tmp2_ = source;
					_tmp3_ = bala_code_context_realpath (_tmp2_);
					rpath = _tmp3_;
					_tmp5_ = source;
					if (g_str_has_suffix (_tmp5_, ".bala")) {
						_tmp4_ = TRUE;
					} else {
						const gchar* _tmp6_;
						_tmp6_ = source;
						_tmp4_ = g_str_has_suffix (_tmp6_, ".gs");
					}
					if (_tmp4_) {
						BalaSourceFile* source_file = NULL;
						const gchar* _tmp7_;
						BalaSourceFile* _tmp8_;
						BaladocTreeBuilderPackageMetaData* _tmp9_;
						BaladocTreeBuilderPackageMetaData* _tmp15_;
						BalaSourceFile* _tmp16_;
						BaladocApiSourceFile* _tmp17_;
						BaladocApiSourceFile* _tmp18_;
						BalaProfile _tmp19_;
						BalaProfile _tmp20_;
						BalaSourceFile* _tmp41_;
						_tmp7_ = rpath;
						_tmp8_ = bala_source_file_new (context, BALA_SOURCE_FILE_TYPE_SOURCE, _tmp7_, NULL, FALSE);
						source_file = _tmp8_;
						_tmp9_ = self->priv->source_package;
						if (_tmp9_ == NULL) {
							BaladocSettings* _tmp10_;
							const gchar* _tmp11_;
							BaladocApiPackage* _tmp12_;
							BaladocApiPackage* _tmp13_;
							BaladocTreeBuilderPackageMetaData* _tmp14_;
							_tmp10_ = self->priv->settings;
							_tmp11_ = _tmp10_->pkg_name;
							_tmp12_ = baladoc_api_package_new (_tmp11_, FALSE, NULL);
							_tmp13_ = _tmp12_;
							_tmp14_ = baladoc_tree_builder_register_package (self, _tmp13_);
							_baladoc_tree_builder_package_meta_data_unref0 (self->priv->source_package);
							self->priv->source_package = _tmp14_;
							_g_object_unref0 (_tmp13_);
						}
						_tmp15_ = self->priv->source_package;
						_tmp16_ = source_file;
						_tmp17_ = baladoc_tree_builder_register_source_file (self, _tmp15_, _tmp16_);
						_tmp18_ = _tmp17_;
						_g_object_unref0 (_tmp18_);
						_tmp19_ = bala_code_context_get_profile (context);
						_tmp20_ = _tmp19_;
						if (_tmp20_ == BALA_PROFILE_POSIX) {
							BalaUsingDirective* ns_ref = NULL;
							BalaUnresolvedSymbol* _tmp21_;
							BalaUnresolvedSymbol* _tmp22_;
							BalaUsingDirective* _tmp23_;
							BalaUsingDirective* _tmp24_;
							BalaSourceFile* _tmp25_;
							BalaUsingDirective* _tmp26_;
							BalaNamespace* _tmp27_;
							BalaNamespace* _tmp28_;
							BalaUsingDirective* _tmp29_;
							_tmp21_ = bala_unresolved_symbol_new (NULL, "Posix", NULL);
							_tmp22_ = _tmp21_;
							_tmp23_ = bala_using_directive_new ((BalaSymbol*) _tmp22_, NULL);
							_tmp24_ = _tmp23_;
							_bala_code_node_unref0 (_tmp22_);
							ns_ref = _tmp24_;
							_tmp25_ = source_file;
							_tmp26_ = ns_ref;
							bala_source_file_add_using_directive (_tmp25_, _tmp26_);
							_tmp27_ = bala_code_context_get_root (context);
							_tmp28_ = _tmp27_;
							_tmp29_ = ns_ref;
							bala_namespace_add_using_directive (_tmp28_, _tmp29_);
							_bala_code_node_unref0 (ns_ref);
						} else {
							BalaProfile _tmp30_;
							BalaProfile _tmp31_;
							_tmp30_ = bala_code_context_get_profile (context);
							_tmp31_ = _tmp30_;
							if (_tmp31_ == BALA_PROFILE_GOBJECT) {
								BalaUsingDirective* ns_ref = NULL;
								BalaUnresolvedSymbol* _tmp32_;
								BalaUnresolvedSymbol* _tmp33_;
								BalaUsingDirective* _tmp34_;
								BalaUsingDirective* _tmp35_;
								BalaSourceFile* _tmp36_;
								BalaUsingDirective* _tmp37_;
								BalaNamespace* _tmp38_;
								BalaNamespace* _tmp39_;
								BalaUsingDirective* _tmp40_;
								_tmp32_ = bala_unresolved_symbol_new (NULL, "GLib", NULL);
								_tmp33_ = _tmp32_;
								_tmp34_ = bala_using_directive_new ((BalaSymbol*) _tmp33_, NULL);
								_tmp35_ = _tmp34_;
								_bala_code_node_unref0 (_tmp33_);
								ns_ref = _tmp35_;
								_tmp36_ = source_file;
								_tmp37_ = ns_ref;
								bala_source_file_add_using_directive (_tmp36_, _tmp37_);
								_tmp38_ = bala_code_context_get_root (context);
								_tmp39_ = _tmp38_;
								_tmp40_ = ns_ref;
								bala_namespace_add_using_directive (_tmp39_, _tmp40_);
								_bala_code_node_unref0 (ns_ref);
							}
						}
						_tmp41_ = source_file;
						bala_code_context_add_source_file (context, _tmp41_);
						_bala_source_file_unref0 (source_file);
					} else {
						gboolean _tmp42_ = FALSE;
						const gchar* _tmp43_;
						_tmp43_ = source;
						if (g_str_has_suffix (_tmp43_, ".bapi")) {
							_tmp42_ = TRUE;
						} else {
							const gchar* _tmp44_;
							_tmp44_ = source;
							_tmp42_ = g_str_has_suffix (_tmp44_, ".gir");
						}
						if (_tmp42_) {
							gchar* file_name = NULL;
							const gchar* _tmp45_;
							gchar* _tmp46_;
							BalaSourceFile* vfile = NULL;
							const gchar* _tmp47_;
							BalaSourceFile* _tmp48_;
							BalaSourceFile* _tmp49_;
							BaladocTreeBuilderPackageMetaData* _tmp50_;
							BaladocTreeBuilderPackageMetaData* _tmp56_;
							BalaSourceFile* _tmp57_;
							BaladocApiSourceFile* _tmp58_;
							BaladocApiSourceFile* _tmp59_;
							const gchar* _tmp60_;
							gchar* _tmp61_;
							gchar* _tmp62_;
							const gchar* _tmp63_;
							gchar* _tmp64_;
							gchar* _tmp65_;
							gchar* _tmp66_;
							gchar* _tmp67_;
							const gchar* _tmp68_;
							_tmp45_ = source;
							_tmp46_ = baladoc_tree_builder_get_package_name (self, _tmp45_);
							file_name = _tmp46_;
							_tmp47_ = rpath;
							_tmp48_ = bala_source_file_new (context, BALA_SOURCE_FILE_TYPE_PACKAGE, _tmp47_, NULL, FALSE);
							vfile = _tmp48_;
							_tmp49_ = vfile;
							bala_code_context_add_source_file (context, _tmp49_);
							_tmp50_ = self->priv->source_package;
							if (_tmp50_ == NULL) {
								BaladocSettings* _tmp51_;
								const gchar* _tmp52_;
								BaladocApiPackage* _tmp53_;
								BaladocApiPackage* _tmp54_;
								BaladocTreeBuilderPackageMetaData* _tmp55_;
								_tmp51_ = self->priv->settings;
								_tmp52_ = _tmp51_->pkg_name;
								_tmp53_ = baladoc_api_package_new (_tmp52_, FALSE, NULL);
								_tmp54_ = _tmp53_;
								_tmp55_ = baladoc_tree_builder_register_package (self, _tmp54_);
								_baladoc_tree_builder_package_meta_data_unref0 (self->priv->source_package);
								self->priv->source_package = _tmp55_;
								_g_object_unref0 (_tmp54_);
							}
							_tmp56_ = self->priv->source_package;
							_tmp57_ = vfile;
							_tmp58_ = baladoc_tree_builder_register_source_file (self, _tmp56_, _tmp57_);
							_tmp59_ = _tmp58_;
							_g_object_unref0 (_tmp59_);
							_tmp60_ = source;
							_tmp61_ = g_path_get_dirname (_tmp60_);
							_tmp62_ = _tmp61_;
							_tmp63_ = file_name;
							_tmp64_ = g_strdup_printf ("%s.deps", _tmp63_);
							_tmp65_ = _tmp64_;
							_tmp66_ = g_build_filename (_tmp62_, _tmp65_, NULL);
							_tmp67_ = _tmp66_;
							_tmp68_ = file_name;
							baladoc_tree_builder_add_deps (self, context, _tmp67_, _tmp68_);
							_g_free0 (_tmp67_);
							_g_free0 (_tmp65_);
							_g_free0 (_tmp62_);
							_bala_source_file_unref0 (vfile);
							_g_free0 (file_name);
						} else {
							const gchar* _tmp69_;
							_tmp69_ = source;
							if (g_str_has_suffix (_tmp69_, ".c")) {
								const gchar* _tmp70_;
								BaladocApiTree* _tmp71_;
								const gchar* _tmp72_;
								_tmp70_ = rpath;
								bala_code_context_add_c_source_file (context, _tmp70_);
								_tmp71_ = self->priv->tree;
								_tmp72_ = rpath;
								baladoc_api_tree_add_external_c_files (_tmp71_, _tmp72_);
							} else {
								const gchar* _tmp73_;
								gchar* _tmp74_;
								gchar* _tmp75_;
								_tmp73_ = source;
								_tmp74_ = g_strdup_printf ("%s is not a supported source file type. Only .bala, .bapi, .gs, and .c" \
" files are supported.", _tmp73_);
								_tmp75_ = _tmp74_;
								bala_report_error (NULL, _tmp75_);
								_g_free0 (_tmp75_);
							}
						}
					}
					_g_free0 (rpath);
				} else {
					const gchar* _tmp76_;
					gchar* _tmp77_;
					gchar* _tmp78_;
					_tmp76_ = source;
					_tmp77_ = g_strdup_printf ("%s not found", _tmp76_);
					_tmp78_ = _tmp77_;
					bala_report_error (NULL, _tmp78_);
					_g_free0 (_tmp78_);
				}
				_g_free0 (source);
			}
		}
	}
}

static void
baladoc_tree_builder_create_balac_tree (BaladocTreeBuilder* self,
                                        BalaCodeContext* context,
                                        BaladocSettings* settings)
{
	gboolean _tmp0_ = FALSE;
	gchar** _tmp1_;
	gint _tmp1__length1;
	BalaReport* _tmp2_;
	BalaReport* _tmp3_;
	gchar** _tmp4_;
	gint _tmp4__length1;
	gchar** _tmp5_;
	gint _tmp5__length1;
	const gchar* _tmp6_;
	const gchar* _tmp12_;
	gboolean _tmp18_ = FALSE;
	gboolean _tmp19_ = FALSE;
	const gchar* _tmp20_;
	gchar** _tmp23_;
	gint _tmp23__length1;
	BalaProfile _tmp27_;
	BalaProfile _tmp28_;
	gchar** _tmp31_;
	gint _tmp31__length1;
	BaladocErrorReporter* _tmp32_;
	gint _tmp33_;
	gint _tmp34_;
	gchar** _tmp35_;
	gint _tmp35__length1;
	BaladocErrorReporter* _tmp36_;
	gint _tmp37_;
	gint _tmp38_;
	BalaParser* parser = NULL;
	BalaParser* _tmp39_;
	BalaParser* _tmp40_;
	BalaReport* _tmp41_;
	BalaReport* _tmp42_;
	BalaGirParser* gir_parser = NULL;
	BalaGirParser* _tmp43_;
	BalaGirParser* _tmp44_;
	BalaReport* _tmp45_;
	BalaReport* _tmp46_;
	BalaReport* _tmp47_;
	BalaReport* _tmp48_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (context != NULL);
	g_return_if_fail (settings != NULL);
	bala_code_context_set_experimental (context, settings->experimental);
	if (settings->experimental) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = settings->experimental_non_null;
	}
	bala_code_context_set_experimental_non_null (context, _tmp0_);
	_tmp1_ = settings->bapi_directories;
	_tmp1__length1 = settings->bapi_directories_length1;
	bala_code_context_set_bapi_directories (context, _tmp1_, _tmp1__length1);
	_tmp2_ = bala_code_context_get_report (context);
	_tmp3_ = _tmp2_;
	bala_report_set_enable_warnings (_tmp3_, settings->verbose);
	_tmp4_ = settings->metadata_directories;
	_tmp4__length1 = settings->metadata_directories_length1;
	bala_code_context_set_metadata_directories (context, _tmp4_, _tmp4__length1);
	_tmp5_ = settings->gir_directories;
	_tmp5__length1 = settings->gir_directories_length1;
	bala_code_context_set_gir_directories (context, _tmp5_, _tmp5__length1);
	_tmp6_ = settings->basedir;
	if (_tmp6_ == NULL) {
		gchar* _tmp7_;
		gchar* _tmp8_;
		_tmp7_ = bala_code_context_realpath (".");
		_tmp8_ = _tmp7_;
		bala_code_context_set_basedir (context, _tmp8_);
		_g_free0 (_tmp8_);
	} else {
		const gchar* _tmp9_;
		gchar* _tmp10_;
		gchar* _tmp11_;
		_tmp9_ = settings->basedir;
		_tmp10_ = bala_code_context_realpath (_tmp9_);
		_tmp11_ = _tmp10_;
		bala_code_context_set_basedir (context, _tmp11_);
		_g_free0 (_tmp11_);
	}
	_tmp12_ = settings->directory;
	if (_tmp12_ != NULL) {
		const gchar* _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		_tmp13_ = settings->directory;
		_tmp14_ = bala_code_context_realpath (_tmp13_);
		_tmp15_ = _tmp14_;
		bala_code_context_set_directory (context, _tmp15_);
		_g_free0 (_tmp15_);
	} else {
		const gchar* _tmp16_;
		const gchar* _tmp17_;
		_tmp16_ = bala_code_context_get_basedir (context);
		_tmp17_ = _tmp16_;
		bala_code_context_set_directory (context, _tmp17_);
	}
	_tmp20_ = settings->profile;
	if (g_strcmp0 (_tmp20_, "gobject-2.0") == 0) {
		_tmp19_ = TRUE;
	} else {
		const gchar* _tmp21_;
		_tmp21_ = settings->profile;
		_tmp19_ = g_strcmp0 (_tmp21_, "gobject") == 0;
	}
	if (_tmp19_) {
		_tmp18_ = TRUE;
	} else {
		const gchar* _tmp22_;
		_tmp22_ = settings->profile;
		_tmp18_ = _tmp22_ == NULL;
	}
	if (_tmp18_) {
		bala_code_context_set_profile (context, BALA_PROFILE_GOBJECT);
		bala_code_context_add_define (context, "GOBJECT");
	}
	_tmp23_ = settings->defines;
	_tmp23__length1 = settings->defines_length1;
	if (_tmp23_ != NULL) {
		gchar** _tmp24_;
		gint _tmp24__length1;
		_tmp24_ = settings->defines;
		_tmp24__length1 = settings->defines_length1;
		{
			gchar** define_collection = NULL;
			gint define_collection_length1 = 0;
			gint _define_collection_size_ = 0;
			gint define_it = 0;
			define_collection = _tmp24_;
			define_collection_length1 = _tmp24__length1;
			for (define_it = 0; define_it < define_collection_length1; define_it = define_it + 1) {
				gchar* _tmp25_;
				gchar* define = NULL;
				_tmp25_ = g_strdup (define_collection[define_it]);
				define = _tmp25_;
				{
					const gchar* _tmp26_;
					_tmp26_ = define;
					bala_code_context_add_define (context, _tmp26_);
					_g_free0 (define);
				}
			}
		}
	}
	_tmp27_ = bala_code_context_get_profile (context);
	_tmp28_ = _tmp27_;
	if (_tmp28_ == BALA_PROFILE_GOBJECT) {
		const gchar* _tmp29_;
		_tmp29_ = settings->target_glib;
		if (_tmp29_ != NULL) {
			const gchar* _tmp30_;
			_tmp30_ = settings->target_glib;
			bala_code_context_set_target_glib_version (context, _tmp30_);
		}
		if (!baladoc_tree_builder_add_package (self, context, "glib-2.0")) {
			bala_report_error (NULL, "glib-2.0 not found in specified Bala API directories");
		}
		if (!baladoc_tree_builder_add_package (self, context, "gobject-2.0")) {
			bala_report_error (NULL, "gobject-2.0 not found in specified Bala API directories");
		}
	}
	_tmp31_ = settings->packages;
	_tmp31__length1 = settings->packages_length1;
	baladoc_tree_builder_add_depencies (self, context, _tmp31_, (gint) _tmp31__length1);
	_tmp32_ = self->priv->reporter;
	_tmp33_ = baladoc_error_reporter_get_errors (_tmp32_);
	_tmp34_ = _tmp33_;
	if (_tmp34_ > 0) {
		return;
	}
	_tmp35_ = settings->source_files;
	_tmp35__length1 = settings->source_files_length1;
	baladoc_tree_builder_add_documented_files (self, context, _tmp35_, (gint) _tmp35__length1);
	_tmp36_ = self->priv->reporter;
	_tmp37_ = baladoc_error_reporter_get_errors (_tmp36_);
	_tmp38_ = _tmp37_;
	if (_tmp38_ > 0) {
		return;
	}
	_tmp39_ = bala_parser_new ();
	parser = _tmp39_;
	_tmp40_ = parser;
	bala_parser_parse (_tmp40_, context);
	_tmp41_ = bala_code_context_get_report (context);
	_tmp42_ = _tmp41_;
	if (bala_report_get_errors (_tmp42_) > 0) {
		_bala_code_visitor_unref0 (parser);
		return;
	}
	_tmp43_ = bala_gir_parser_new ();
	gir_parser = _tmp43_;
	_tmp44_ = gir_parser;
	bala_gir_parser_parse (_tmp44_, context);
	_tmp45_ = bala_code_context_get_report (context);
	_tmp46_ = _tmp45_;
	if (bala_report_get_errors (_tmp46_) > 0) {
		_bala_code_visitor_unref0 (gir_parser);
		_bala_code_visitor_unref0 (parser);
		return;
	}
	bala_code_context_check (context);
	_tmp47_ = bala_code_context_get_report (context);
	_tmp48_ = _tmp47_;
	if (bala_report_get_errors (_tmp48_) > 0) {
		_bala_code_visitor_unref0 (gir_parser);
		_bala_code_visitor_unref0 (parser);
		return;
	}
	_bala_code_visitor_unref0 (gir_parser);
	_bala_code_visitor_unref0 (parser);
}

static void
baladoc_tree_builder_process_children (BaladocTreeBuilder* self,
                                       BaladocApiNode* node,
                                       BalaCodeNode* element)
{
	BaladocApiNode* old_node = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiNode* _tmp1_;
	BaladocApiNode* _tmp2_;
	BaladocApiNode* _tmp3_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (node != NULL);
	g_return_if_fail (element != NULL);
	_tmp0_ = self->priv->current_node;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	old_node = _tmp1_;
	_tmp2_ = _g_object_ref0 (node);
	_g_object_unref0 (self->priv->current_node);
	self->priv->current_node = _tmp2_;
	bala_code_node_accept_children (element, (BalaCodeVisitor*) self);
	_tmp3_ = _g_object_ref0 (old_node);
	_g_object_unref0 (self->priv->current_node);
	self->priv->current_node = _tmp3_;
	_g_object_unref0 (old_node);
}

static gpointer
_bala_source_file_ref0 (gpointer self)
{
	return self ? bala_source_file_ref (self) : NULL;
}

static BaladocApiNode*
baladoc_tree_builder_get_parent_node_for (BaladocTreeBuilder* self,
                                          BalaSymbol* element)
{
	BaladocApiNode* _tmp0_;
	BalaSourceFile* bala_source_file = NULL;
	BalaSourceReference* _tmp3_;
	BalaSourceReference* _tmp4_;
	BalaSourceFile* _tmp5_;
	BalaSourceFile* _tmp6_;
	BalaSourceFile* _tmp7_;
	BaladocApiPackage* package = NULL;
	BalaSourceFile* _tmp8_;
	BaladocApiPackage* _tmp9_;
	BaladocApiSourceFile* source_file = NULL;
	BaladocApiSourceFile* _tmp10_;
	BaladocApiPackage* _tmp11_;
	BaladocApiSourceFile* _tmp12_;
	BaladocApiNamespace* _tmp13_;
	BaladocApiNode* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (element != NULL, NULL);
	_tmp0_ = self->priv->current_node;
	if (_tmp0_ != NULL) {
		BaladocApiNode* _tmp1_;
		BaladocApiNode* _tmp2_;
		_tmp1_ = self->priv->current_node;
		_tmp2_ = _g_object_ref0 (_tmp1_);
		result = _tmp2_;
		return result;
	}
	_tmp3_ = bala_code_node_get_source_reference ((BalaCodeNode*) element);
	_tmp4_ = _tmp3_;
	_tmp5_ = bala_source_reference_get_file (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = _bala_source_file_ref0 (_tmp6_);
	bala_source_file = _tmp7_;
	_tmp8_ = bala_source_file;
	_tmp9_ = baladoc_tree_builder_find_package_for_file (self, _tmp8_);
	package = _tmp9_;
	_tmp10_ = baladoc_tree_builder_get_source_file (self, element);
	source_file = _tmp10_;
	_tmp11_ = package;
	_tmp12_ = source_file;
	_tmp13_ = baladoc_tree_builder_get_namespace (self, _tmp11_, element, _tmp12_);
	result = (BaladocApiNode*) _tmp13_;
	_g_object_unref0 (source_file);
	_g_object_unref0 (package);
	_bala_source_file_unref0 (bala_source_file);
	return result;
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_namespace (BalaCodeVisitor* base,
                                           BalaNamespace* element)
{
	BaladocTreeBuilder * self;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	bala_code_node_accept_children ((BalaCodeNode*) element, (BalaCodeVisitor*) self);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_class (BalaCodeVisitor* base,
                                       BalaClass* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiClass* node = NULL;
	BaladocApiNode* _tmp5_;
	BaladocApiSourceFile* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	BalaSymbolAccessibility _tmp9_;
	BalaSymbolAccessibility _tmp10_;
	BaladocApiSourceComment* _tmp11_;
	BaladocApiClass* _tmp12_;
	BalaHashMap* _tmp13_;
	BaladocApiClass* _tmp14_;
	BaladocApiNode* _tmp15_;
	BaladocApiClass* _tmp16_;
	BaladocApiClass* _tmp40_;
	GList* _tmp41_;
	BaladocApiClass* _tmp42_;
	gboolean _tmp43_ = FALSE;
	BaladocApiClass* _tmp44_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = parent;
	_tmp6_ = file;
	_tmp7_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp10_ = _tmp9_;
	_tmp11_ = comment;
	_tmp12_ = baladoc_api_class_new (_tmp5_, _tmp6_, _tmp8_, _tmp10_, _tmp11_, element);
	node = _tmp12_;
	_tmp13_ = self->priv->symbol_map;
	_tmp14_ = node;
	bala_map_set ((BalaMap*) _tmp13_, (BalaSymbol*) element, (BaladocApiSymbol*) _tmp14_);
	_tmp15_ = parent;
	_tmp16_ = node;
	baladoc_api_node_add_child (_tmp15_, (BaladocApiSymbol*) _tmp16_);
	{
		BalaList* _bala_type_ref_list = NULL;
		BalaList* _tmp17_;
		BalaList* _tmp18_;
		gint _bala_type_ref_size = 0;
		BalaList* _tmp19_;
		gint _tmp20_;
		gint _tmp21_;
		gint _bala_type_ref_index = 0;
		_tmp17_ = bala_class_get_base_types (element);
		_tmp18_ = _bala_iterable_ref0 (_tmp17_);
		_bala_type_ref_list = _tmp18_;
		_tmp19_ = _bala_type_ref_list;
		_tmp20_ = bala_collection_get_size ((BalaCollection*) _tmp19_);
		_tmp21_ = _tmp20_;
		_bala_type_ref_size = _tmp21_;
		_bala_type_ref_index = -1;
		while (TRUE) {
			gint _tmp22_;
			gint _tmp23_;
			BalaDataType* bala_type_ref = NULL;
			BalaList* _tmp24_;
			gpointer _tmp25_;
			BaladocApiTypeReference* type_ref = NULL;
			BalaDataType* _tmp26_;
			BaladocApiClass* _tmp27_;
			BaladocApiClass* _tmp28_;
			BaladocApiTypeReference* _tmp29_;
			BalaDataType* _tmp30_;
			BalaTypeSymbol* _tmp31_;
			BalaTypeSymbol* _tmp32_;
			_bala_type_ref_index = _bala_type_ref_index + 1;
			_tmp22_ = _bala_type_ref_index;
			_tmp23_ = _bala_type_ref_size;
			if (!(_tmp22_ < _tmp23_)) {
				break;
			}
			_tmp24_ = _bala_type_ref_list;
			_tmp25_ = bala_list_get (_tmp24_, _bala_type_ref_index);
			bala_type_ref = (BalaDataType*) _tmp25_;
			_tmp26_ = bala_type_ref;
			_tmp27_ = node;
			_tmp28_ = node;
			_tmp29_ = baladoc_tree_builder_create_type_reference (self, _tmp26_, (BaladocApiItem*) _tmp27_, (BaladocApiNode*) _tmp28_);
			type_ref = _tmp29_;
			_tmp30_ = bala_type_ref;
			_tmp31_ = bala_data_type_get_type_symbol (_tmp30_);
			_tmp32_ = _tmp31_;
			if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp32_, BALA_TYPE_INTERFACE)) {
				BaladocApiClass* _tmp33_;
				BaladocApiTypeReference* _tmp34_;
				_tmp33_ = node;
				_tmp34_ = type_ref;
				baladoc_api_class_add_interface (_tmp33_, _tmp34_);
			} else {
				BalaDataType* _tmp35_;
				BalaTypeSymbol* _tmp36_;
				BalaTypeSymbol* _tmp37_;
				_tmp35_ = bala_type_ref;
				_tmp36_ = bala_data_type_get_type_symbol (_tmp35_);
				_tmp37_ = _tmp36_;
				if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp37_, BALA_TYPE_CLASS)) {
					BaladocApiClass* _tmp38_;
					BaladocApiTypeReference* _tmp39_;
					_tmp38_ = node;
					_tmp39_ = type_ref;
					baladoc_api_class_set_base_type (_tmp38_, _tmp39_);
				}
			}
			_g_object_unref0 (type_ref);
			_bala_code_node_unref0 (bala_type_ref);
		}
		_bala_iterable_unref0 (_bala_type_ref_list);
	}
	_tmp40_ = node;
	_tmp41_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) _tmp40_, _tmp41_);
	_tmp42_ = node;
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) _tmp42_, (BalaCodeNode*) element);
	_tmp44_ = self->priv->glib_error;
	if (_tmp44_ == NULL) {
		BaladocApiClass* _tmp45_;
		gchar* _tmp46_;
		gchar* _tmp47_;
		_tmp45_ = node;
		_tmp46_ = baladoc_api_node_get_full_name ((BaladocApiNode*) _tmp45_);
		_tmp47_ = _tmp46_;
		_tmp43_ = g_strcmp0 (_tmp47_, "GLib.Error") == 0;
		_g_free0 (_tmp47_);
	} else {
		_tmp43_ = FALSE;
	}
	if (_tmp43_) {
		BaladocApiClass* _tmp48_;
		BaladocApiClass* _tmp49_;
		_tmp48_ = node;
		_tmp49_ = _g_object_ref0 (_tmp48_);
		_g_object_unref0 (self->priv->glib_error);
		self->priv->glib_error = _tmp49_;
	}
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_interface (BalaCodeVisitor* base,
                                           BalaInterface* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiInterface* node = NULL;
	BaladocApiNode* _tmp5_;
	BaladocApiSourceFile* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	BalaSymbolAccessibility _tmp9_;
	BalaSymbolAccessibility _tmp10_;
	BaladocApiSourceComment* _tmp11_;
	BaladocApiInterface* _tmp12_;
	BalaHashMap* _tmp13_;
	BaladocApiInterface* _tmp14_;
	BaladocApiNode* _tmp15_;
	BaladocApiInterface* _tmp16_;
	BaladocApiInterface* _tmp37_;
	GList* _tmp38_;
	BaladocApiInterface* _tmp39_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = parent;
	_tmp6_ = file;
	_tmp7_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp10_ = _tmp9_;
	_tmp11_ = comment;
	_tmp12_ = baladoc_api_interface_new (_tmp5_, _tmp6_, _tmp8_, _tmp10_, _tmp11_, element);
	node = _tmp12_;
	_tmp13_ = self->priv->symbol_map;
	_tmp14_ = node;
	bala_map_set ((BalaMap*) _tmp13_, (BalaSymbol*) element, (BaladocApiSymbol*) _tmp14_);
	_tmp15_ = parent;
	_tmp16_ = node;
	baladoc_api_node_add_child (_tmp15_, (BaladocApiSymbol*) _tmp16_);
	{
		BalaList* _bala_type_ref_list = NULL;
		BalaList* _tmp17_;
		BalaList* _tmp18_;
		gint _bala_type_ref_size = 0;
		BalaList* _tmp19_;
		gint _tmp20_;
		gint _tmp21_;
		gint _bala_type_ref_index = 0;
		_tmp17_ = bala_interface_get_prerequisites (element);
		_tmp18_ = _bala_iterable_ref0 (_tmp17_);
		_bala_type_ref_list = _tmp18_;
		_tmp19_ = _bala_type_ref_list;
		_tmp20_ = bala_collection_get_size ((BalaCollection*) _tmp19_);
		_tmp21_ = _tmp20_;
		_bala_type_ref_size = _tmp21_;
		_bala_type_ref_index = -1;
		while (TRUE) {
			gint _tmp22_;
			gint _tmp23_;
			BalaDataType* bala_type_ref = NULL;
			BalaList* _tmp24_;
			gpointer _tmp25_;
			BaladocApiTypeReference* type_ref = NULL;
			BalaDataType* _tmp26_;
			BaladocApiInterface* _tmp27_;
			BaladocApiInterface* _tmp28_;
			BaladocApiTypeReference* _tmp29_;
			BalaDataType* _tmp30_;
			BalaTypeSymbol* _tmp31_;
			BalaTypeSymbol* _tmp32_;
			_bala_type_ref_index = _bala_type_ref_index + 1;
			_tmp22_ = _bala_type_ref_index;
			_tmp23_ = _bala_type_ref_size;
			if (!(_tmp22_ < _tmp23_)) {
				break;
			}
			_tmp24_ = _bala_type_ref_list;
			_tmp25_ = bala_list_get (_tmp24_, _bala_type_ref_index);
			bala_type_ref = (BalaDataType*) _tmp25_;
			_tmp26_ = bala_type_ref;
			_tmp27_ = node;
			_tmp28_ = node;
			_tmp29_ = baladoc_tree_builder_create_type_reference (self, _tmp26_, (BaladocApiItem*) _tmp27_, (BaladocApiNode*) _tmp28_);
			type_ref = _tmp29_;
			_tmp30_ = bala_type_ref;
			_tmp31_ = bala_data_type_get_type_symbol (_tmp30_);
			_tmp32_ = _tmp31_;
			if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp32_, BALA_TYPE_INTERFACE)) {
				BaladocApiInterface* _tmp33_;
				BaladocApiTypeReference* _tmp34_;
				_tmp33_ = node;
				_tmp34_ = type_ref;
				baladoc_api_interface_add_interface (_tmp33_, _tmp34_);
			} else {
				BaladocApiInterface* _tmp35_;
				BaladocApiTypeReference* _tmp36_;
				_tmp35_ = node;
				_tmp36_ = type_ref;
				baladoc_api_interface_set_base_type (_tmp35_, _tmp36_);
			}
			_g_object_unref0 (type_ref);
			_bala_code_node_unref0 (bala_type_ref);
		}
		_bala_iterable_unref0 (_bala_type_ref_list);
	}
	_tmp37_ = node;
	_tmp38_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) _tmp37_, _tmp38_);
	_tmp39_ = node;
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) _tmp39_, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_struct (BalaCodeVisitor* base,
                                        BalaStruct* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiStruct* node = NULL;
	BaladocApiNode* _tmp5_;
	BaladocApiSourceFile* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	BalaSymbolAccessibility _tmp9_;
	BalaSymbolAccessibility _tmp10_;
	BaladocApiSourceComment* _tmp11_;
	BaladocApiStruct* _tmp12_;
	BalaHashMap* _tmp13_;
	BaladocApiStruct* _tmp14_;
	BaladocApiNode* _tmp15_;
	BaladocApiStruct* _tmp16_;
	BalaValueType* basetype = NULL;
	BalaDataType* _tmp17_;
	BalaDataType* _tmp18_;
	BalaValueType* _tmp19_;
	BalaValueType* _tmp20_;
	BaladocApiStruct* _tmp27_;
	GList* _tmp28_;
	BaladocApiStruct* _tmp29_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = parent;
	_tmp6_ = file;
	_tmp7_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp10_ = _tmp9_;
	_tmp11_ = comment;
	_tmp12_ = baladoc_api_struct_new (_tmp5_, _tmp6_, _tmp8_, _tmp10_, _tmp11_, element);
	node = _tmp12_;
	_tmp13_ = self->priv->symbol_map;
	_tmp14_ = node;
	bala_map_set ((BalaMap*) _tmp13_, (BalaSymbol*) element, (BaladocApiSymbol*) _tmp14_);
	_tmp15_ = parent;
	_tmp16_ = node;
	baladoc_api_node_add_child (_tmp15_, (BaladocApiSymbol*) _tmp16_);
	_tmp17_ = bala_struct_get_base_type (element);
	_tmp18_ = _tmp17_;
	_tmp19_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp18_, BALA_TYPE_VALUE_TYPE) ? ((BalaValueType*) _tmp18_) : NULL);
	basetype = _tmp19_;
	_tmp20_ = basetype;
	if (_tmp20_ != NULL) {
		BaladocApiStruct* _tmp21_;
		BalaValueType* _tmp22_;
		BaladocApiStruct* _tmp23_;
		BaladocApiStruct* _tmp24_;
		BaladocApiTypeReference* _tmp25_;
		BaladocApiTypeReference* _tmp26_;
		_tmp21_ = node;
		_tmp22_ = basetype;
		_tmp23_ = node;
		_tmp24_ = node;
		_tmp25_ = baladoc_tree_builder_create_type_reference (self, (BalaDataType*) _tmp22_, (BaladocApiItem*) _tmp23_, (BaladocApiNode*) _tmp24_);
		_tmp26_ = _tmp25_;
		baladoc_api_struct_set_base_type (_tmp21_, _tmp26_);
		_g_object_unref0 (_tmp26_);
	}
	_tmp27_ = node;
	_tmp28_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) _tmp27_, _tmp28_);
	_tmp29_ = node;
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) _tmp29_, (BalaCodeNode*) element);
	_bala_code_node_unref0 (basetype);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_field (BalaCodeVisitor* base,
                                       BalaField* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiField* node = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiField* _tmp9_;
	BalaDataType* _tmp10_;
	BalaDataType* _tmp11_;
	BaladocApiTypeReference* _tmp12_;
	BaladocApiTypeReference* _tmp13_;
	BalaHashMap* _tmp14_;
	GList* _tmp15_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_field_new (parent, file, _tmp6_, _tmp8_, comment, element);
	node = _tmp9_;
	_tmp10_ = bala_variable_get_variable_type ((BalaVariable*) element);
	_tmp11_ = _tmp10_;
	_tmp12_ = baladoc_tree_builder_create_type_reference (self, _tmp11_, (BaladocApiItem*) node, (BaladocApiNode*) node);
	_tmp13_ = _tmp12_;
	baladoc_api_field_set_field_type (node, _tmp13_);
	_g_object_unref0 (_tmp13_);
	_tmp14_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp14_, (BalaSymbol*) element, (BaladocApiSymbol*) node);
	baladoc_api_node_add_child (parent, (BaladocApiSymbol*) node);
	_tmp15_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) node, _tmp15_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_property (BalaCodeVisitor* base,
                                          BalaProperty* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiProperty* node = NULL;
	BaladocApiNode* _tmp5_;
	BaladocApiSourceFile* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	BalaSymbolAccessibility _tmp9_;
	BalaSymbolAccessibility _tmp10_;
	BaladocApiSourceComment* _tmp11_;
	BaladocApiProperty* _tmp12_;
	BaladocApiProperty* _tmp13_;
	BalaDataType* _tmp14_;
	BalaDataType* _tmp15_;
	BaladocApiProperty* _tmp16_;
	BaladocApiProperty* _tmp17_;
	BaladocApiTypeReference* _tmp18_;
	BaladocApiTypeReference* _tmp19_;
	BalaHashMap* _tmp20_;
	BaladocApiProperty* _tmp21_;
	BaladocApiNode* _tmp22_;
	BaladocApiProperty* _tmp23_;
	BalaPropertyAccessor* _tmp24_;
	BalaPropertyAccessor* _tmp25_;
	BalaPropertyAccessor* _tmp40_;
	BalaPropertyAccessor* _tmp41_;
	BaladocApiProperty* _tmp56_;
	GList* _tmp57_;
	BaladocApiProperty* _tmp58_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = parent;
	_tmp6_ = file;
	_tmp7_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp10_ = _tmp9_;
	_tmp11_ = comment;
	_tmp12_ = baladoc_api_property_new (_tmp5_, _tmp6_, _tmp8_, _tmp10_, _tmp11_, element);
	node = _tmp12_;
	_tmp13_ = node;
	_tmp14_ = bala_property_get_property_type (element);
	_tmp15_ = _tmp14_;
	_tmp16_ = node;
	_tmp17_ = node;
	_tmp18_ = baladoc_tree_builder_create_type_reference (self, _tmp15_, (BaladocApiItem*) _tmp16_, (BaladocApiNode*) _tmp17_);
	_tmp19_ = _tmp18_;
	baladoc_api_property_set_property_type (_tmp13_, _tmp19_);
	_g_object_unref0 (_tmp19_);
	_tmp20_ = self->priv->symbol_map;
	_tmp21_ = node;
	bala_map_set ((BalaMap*) _tmp20_, (BalaSymbol*) element, (BaladocApiSymbol*) _tmp21_);
	_tmp22_ = parent;
	_tmp23_ = node;
	baladoc_api_node_add_child (_tmp22_, (BaladocApiSymbol*) _tmp23_);
	_tmp24_ = bala_property_get_get_accessor (element);
	_tmp25_ = _tmp24_;
	if (_tmp25_ != NULL) {
		BalaPropertyAccessor* accessor = NULL;
		BalaPropertyAccessor* _tmp26_;
		BalaPropertyAccessor* _tmp27_;
		BalaPropertyAccessor* _tmp28_;
		BaladocApiProperty* _tmp29_;
		BaladocApiProperty* _tmp30_;
		BaladocApiSourceFile* _tmp31_;
		const gchar* _tmp32_;
		const gchar* _tmp33_;
		BalaPropertyAccessor* _tmp34_;
		BalaSymbolAccessibility _tmp35_;
		BalaSymbolAccessibility _tmp36_;
		BalaPropertyAccessor* _tmp37_;
		BaladocApiPropertyAccessor* _tmp38_;
		BaladocApiPropertyAccessor* _tmp39_;
		_tmp26_ = bala_property_get_get_accessor (element);
		_tmp27_ = _tmp26_;
		_tmp28_ = _bala_code_node_ref0 (_tmp27_);
		accessor = _tmp28_;
		_tmp29_ = node;
		_tmp30_ = node;
		_tmp31_ = file;
		_tmp32_ = bala_symbol_get_name ((BalaSymbol*) element);
		_tmp33_ = _tmp32_;
		_tmp34_ = accessor;
		_tmp35_ = bala_symbol_get_access ((BalaSymbol*) _tmp34_);
		_tmp36_ = _tmp35_;
		_tmp37_ = accessor;
		_tmp38_ = baladoc_api_property_accessor_new (_tmp30_, _tmp31_, _tmp33_, _tmp36_, _tmp37_);
		_tmp39_ = _tmp38_;
		baladoc_api_property_set_getter (_tmp29_, _tmp39_);
		_g_object_unref0 (_tmp39_);
		_bala_code_node_unref0 (accessor);
	}
	_tmp40_ = bala_property_get_set_accessor (element);
	_tmp41_ = _tmp40_;
	if (_tmp41_ != NULL) {
		BalaPropertyAccessor* accessor = NULL;
		BalaPropertyAccessor* _tmp42_;
		BalaPropertyAccessor* _tmp43_;
		BalaPropertyAccessor* _tmp44_;
		BaladocApiProperty* _tmp45_;
		BaladocApiProperty* _tmp46_;
		BaladocApiSourceFile* _tmp47_;
		const gchar* _tmp48_;
		const gchar* _tmp49_;
		BalaPropertyAccessor* _tmp50_;
		BalaSymbolAccessibility _tmp51_;
		BalaSymbolAccessibility _tmp52_;
		BalaPropertyAccessor* _tmp53_;
		BaladocApiPropertyAccessor* _tmp54_;
		BaladocApiPropertyAccessor* _tmp55_;
		_tmp42_ = bala_property_get_set_accessor (element);
		_tmp43_ = _tmp42_;
		_tmp44_ = _bala_code_node_ref0 (_tmp43_);
		accessor = _tmp44_;
		_tmp45_ = node;
		_tmp46_ = node;
		_tmp47_ = file;
		_tmp48_ = bala_symbol_get_name ((BalaSymbol*) element);
		_tmp49_ = _tmp48_;
		_tmp50_ = accessor;
		_tmp51_ = bala_symbol_get_access ((BalaSymbol*) _tmp50_);
		_tmp52_ = _tmp51_;
		_tmp53_ = accessor;
		_tmp54_ = baladoc_api_property_accessor_new (_tmp46_, _tmp47_, _tmp49_, _tmp52_, _tmp53_);
		_tmp55_ = _tmp54_;
		baladoc_api_property_set_setter (_tmp45_, _tmp55_);
		_g_object_unref0 (_tmp55_);
		_bala_code_node_unref0 (accessor);
	}
	_tmp56_ = node;
	_tmp57_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) _tmp56_, _tmp57_);
	_tmp58_ = node;
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) _tmp58_, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_creation_method (BalaCodeVisitor* base,
                                                 BalaCreationMethod* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiMethod* node = NULL;
	gchar* _tmp5_;
	gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiMethod* _tmp9_;
	BaladocApiMethod* _tmp10_;
	BalaDataType* _tmp11_;
	BalaDataType* _tmp12_;
	BaladocApiTypeReference* _tmp13_;
	BaladocApiTypeReference* _tmp14_;
	BalaHashMap* _tmp15_;
	GList* _tmp16_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = baladoc_tree_builder_get_method_name (self, (BalaMethod*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_method_new (parent, file, _tmp6_, _tmp8_, comment, (BalaMethod*) element);
	_tmp10_ = _tmp9_;
	_g_free0 (_tmp6_);
	node = _tmp10_;
	_tmp11_ = bala_callable_get_return_type ((BalaCallable*) element);
	_tmp12_ = _tmp11_;
	_tmp13_ = baladoc_tree_builder_create_type_reference (self, _tmp12_, (BaladocApiItem*) node, (BaladocApiNode*) node);
	_tmp14_ = _tmp13_;
	baladoc_api_callable_set_return_type ((BaladocApiCallable*) node, _tmp14_);
	_g_object_unref0 (_tmp14_);
	_tmp15_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp15_, (BalaSymbol*) element, (BaladocApiSymbol*) node);
	baladoc_api_node_add_child (parent, (BaladocApiSymbol*) node);
	_tmp16_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) node, _tmp16_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_method (BalaCodeVisitor* base,
                                        BalaMethod* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiMethod* node = NULL;
	gchar* _tmp5_;
	gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiMethod* _tmp9_;
	BaladocApiMethod* _tmp10_;
	BalaDataType* _tmp11_;
	BalaDataType* _tmp12_;
	BaladocApiTypeReference* _tmp13_;
	BaladocApiTypeReference* _tmp14_;
	BalaHashMap* _tmp15_;
	GList* _tmp16_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = baladoc_tree_builder_get_method_name (self, element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_method_new (parent, file, _tmp6_, _tmp8_, comment, element);
	_tmp10_ = _tmp9_;
	_g_free0 (_tmp6_);
	node = _tmp10_;
	_tmp11_ = bala_callable_get_return_type ((BalaCallable*) element);
	_tmp12_ = _tmp11_;
	_tmp13_ = baladoc_tree_builder_create_type_reference (self, _tmp12_, (BaladocApiItem*) node, (BaladocApiNode*) node);
	_tmp14_ = _tmp13_;
	baladoc_api_callable_set_return_type ((BaladocApiCallable*) node, _tmp14_);
	_g_object_unref0 (_tmp14_);
	_tmp15_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp15_, (BalaSymbol*) element, (BaladocApiSymbol*) node);
	baladoc_api_node_add_child (parent, (BaladocApiSymbol*) node);
	_tmp16_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) node, _tmp16_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_signal (BalaCodeVisitor* base,
                                        BalaSignal* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiSignal* node = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiSignal* _tmp9_;
	BalaDataType* _tmp10_;
	BalaDataType* _tmp11_;
	BaladocApiTypeReference* _tmp12_;
	BaladocApiTypeReference* _tmp13_;
	BalaHashMap* _tmp14_;
	GList* _tmp15_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_signal_new (parent, file, _tmp6_, _tmp8_, comment, element);
	node = _tmp9_;
	_tmp10_ = bala_callable_get_return_type ((BalaCallable*) element);
	_tmp11_ = _tmp10_;
	_tmp12_ = baladoc_tree_builder_create_type_reference (self, _tmp11_, (BaladocApiItem*) node, (BaladocApiNode*) node);
	_tmp13_ = _tmp12_;
	baladoc_api_callable_set_return_type ((BaladocApiCallable*) node, _tmp13_);
	_g_object_unref0 (_tmp13_);
	_tmp14_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp14_, (BalaSymbol*) element, (BaladocApiSymbol*) node);
	baladoc_api_node_add_child (parent, (BaladocApiSymbol*) node);
	_tmp15_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) node, _tmp15_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_delegate (BalaCodeVisitor* base,
                                          BalaDelegate* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiDelegate* node = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiDelegate* _tmp9_;
	BalaDataType* _tmp10_;
	BalaDataType* _tmp11_;
	BaladocApiTypeReference* _tmp12_;
	BaladocApiTypeReference* _tmp13_;
	BalaHashMap* _tmp14_;
	GList* _tmp15_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_delegate_new (parent, file, _tmp6_, _tmp8_, comment, element);
	node = _tmp9_;
	_tmp10_ = bala_callable_get_return_type ((BalaCallable*) element);
	_tmp11_ = _tmp10_;
	_tmp12_ = baladoc_tree_builder_create_type_reference (self, _tmp11_, (BaladocApiItem*) node, (BaladocApiNode*) node);
	_tmp13_ = _tmp12_;
	baladoc_api_callable_set_return_type ((BaladocApiCallable*) node, _tmp13_);
	_g_object_unref0 (_tmp13_);
	_tmp14_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp14_, (BalaSymbol*) element, (BaladocApiSymbol*) node);
	baladoc_api_node_add_child (parent, (BaladocApiSymbol*) node);
	_tmp15_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) node, _tmp15_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_enum (BalaCodeVisitor* base,
                                      BalaEnum* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiSymbol* node = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiEnum* _tmp9_;
	BalaHashMap* _tmp10_;
	GList* _tmp11_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_enum_new (parent, file, _tmp6_, _tmp8_, comment, element);
	node = (BaladocApiSymbol*) _tmp9_;
	_tmp10_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp10_, (BalaSymbol*) element, node);
	baladoc_api_node_add_child (parent, node);
	_tmp11_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, node, _tmp11_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_enum_value (BalaCodeVisitor* base,
                                            BalaEnumValue* element)
{
	BaladocTreeBuilder * self;
	BaladocApiEnum* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiSymbol* node = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	BaladocApiEnumValue* _tmp7_;
	BalaHashMap* _tmp8_;
	GList* _tmp9_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, BALADOC_API_TYPE_ENUM, BaladocApiEnum);
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = baladoc_api_enum_value_new (parent, file, _tmp6_, comment, element);
	node = (BaladocApiSymbol*) _tmp7_;
	_tmp8_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp8_, (BalaSymbol*) element, node);
	baladoc_api_node_add_child ((BaladocApiNode*) parent, node);
	_tmp9_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, node, _tmp9_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_constant (BalaCodeVisitor* base,
                                          BalaConstant* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiConstant* node = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiConstant* _tmp9_;
	BalaDataType* _tmp10_;
	BalaDataType* _tmp11_;
	BaladocApiTypeReference* _tmp12_;
	BaladocApiTypeReference* _tmp13_;
	BalaHashMap* _tmp14_;
	GList* _tmp15_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_constant_new (parent, file, _tmp6_, _tmp8_, comment, element);
	node = _tmp9_;
	_tmp10_ = bala_constant_get_type_reference (element);
	_tmp11_ = _tmp10_;
	_tmp12_ = baladoc_tree_builder_create_type_reference (self, _tmp11_, (BaladocApiItem*) node, (BaladocApiNode*) node);
	_tmp13_ = _tmp12_;
	baladoc_api_constant_set_constant_type (node, _tmp13_);
	_g_object_unref0 (_tmp13_);
	_tmp14_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp14_, (BalaSymbol*) element, (BaladocApiSymbol*) node);
	baladoc_api_node_add_child (parent, (BaladocApiSymbol*) node);
	_tmp15_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, (BaladocApiSymbol*) node, _tmp15_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_error_domain (BalaCodeVisitor* base,
                                              BalaErrorDomain* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp2_;
	BalaComment* _tmp3_;
	BaladocApiSourceComment* _tmp4_;
	BaladocApiSymbol* node = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	BalaSymbolAccessibility _tmp7_;
	BalaSymbolAccessibility _tmp8_;
	BaladocApiErrorDomain* _tmp9_;
	BalaHashMap* _tmp10_;
	GList* _tmp11_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_tree_builder_create_comment (self, _tmp3_);
	comment = _tmp4_;
	_tmp5_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_error_domain_new (parent, file, _tmp6_, _tmp8_, comment, element);
	node = (BaladocApiSymbol*) _tmp9_;
	_tmp10_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp10_, (BalaSymbol*) element, node);
	baladoc_api_node_add_child (parent, node);
	_tmp11_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, node, _tmp11_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_error_code (BalaCodeVisitor* base,
                                            BalaErrorCode* element)
{
	BaladocTreeBuilder * self;
	BaladocApiErrorDomain* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSourceFile* _tmp2_;
	BaladocApiSourceComment* comment = NULL;
	BalaComment* _tmp5_;
	BalaComment* _tmp6_;
	BaladocApiSourceComment* _tmp7_;
	BaladocApiSymbol* node = NULL;
	BaladocApiErrorDomain* _tmp8_;
	BaladocApiSourceFile* _tmp9_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	BaladocApiErrorCode* _tmp12_;
	BalaHashMap* _tmp13_;
	BaladocApiErrorDomain* _tmp14_;
	GList* _tmp15_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, BALADOC_API_TYPE_ERROR_DOMAIN, BaladocApiErrorDomain);
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = file;
	if (_tmp2_ == NULL) {
		BaladocApiErrorDomain* _tmp3_;
		BaladocApiSourceFile* _tmp4_;
		_tmp3_ = parent;
		_tmp4_ = baladoc_api_node_get_source_file ((BaladocApiNode*) _tmp3_);
		_g_object_unref0 (file);
		file = _tmp4_;
	}
	_tmp5_ = bala_symbol_get_comment ((BalaSymbol*) element);
	_tmp6_ = _tmp5_;
	_tmp7_ = baladoc_tree_builder_create_comment (self, _tmp6_);
	comment = _tmp7_;
	_tmp8_ = parent;
	_tmp9_ = file;
	_tmp10_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp11_ = _tmp10_;
	_tmp12_ = baladoc_api_error_code_new (_tmp8_, _tmp9_, _tmp11_, comment, element);
	node = (BaladocApiSymbol*) _tmp12_;
	_tmp13_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp13_, (BalaSymbol*) element, node);
	_tmp14_ = parent;
	baladoc_api_node_add_child ((BaladocApiNode*) _tmp14_, node);
	_tmp15_ = ((BalaCodeNode*) element)->attributes;
	baladoc_tree_builder_process_attributes (self, node, _tmp15_);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_baladoc_api_source_comment_unref0 (comment);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_type_parameter (BalaCodeVisitor* base,
                                                BalaTypeParameter* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiSymbol* node = NULL;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	BaladocApiTypeParameter* _tmp4_;
	BalaHashMap* _tmp5_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = baladoc_api_typeparameter_new (parent, file, _tmp3_, element);
	node = (BaladocApiSymbol*) _tmp4_;
	_tmp5_ = self->priv->symbol_map;
	bala_map_set ((BalaMap*) _tmp5_, (BalaSymbol*) element, node);
	baladoc_api_node_add_child (parent, node);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_tree_builder_real_visit_formal_parameter (BalaCodeVisitor* base,
                                                  BalaParameter* element)
{
	BaladocTreeBuilder * self;
	BaladocApiNode* parent = NULL;
	BaladocApiNode* _tmp0_;
	BaladocApiSourceFile* file = NULL;
	BaladocApiSourceFile* _tmp1_;
	BaladocApiParameter* node = NULL;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	BalaSymbolAccessibility _tmp4_;
	BalaSymbolAccessibility _tmp5_;
	BalaParameterDirection _tmp6_;
	BalaParameterDirection _tmp7_;
	gboolean _tmp8_;
	gboolean _tmp9_;
	BaladocApiParameter* _tmp10_;
	BalaDataType* _tmp11_;
	BalaDataType* _tmp12_;
	BaladocApiTypeReference* _tmp13_;
	BaladocApiTypeReference* _tmp14_;
	self = (BaladocTreeBuilder*) base;
	g_return_if_fail (element != NULL);
	_tmp0_ = baladoc_tree_builder_get_parent_node_for (self, (BalaSymbol*) element);
	parent = _tmp0_;
	_tmp1_ = baladoc_tree_builder_get_source_file (self, (BalaSymbol*) element);
	file = _tmp1_;
	_tmp2_ = bala_symbol_get_name ((BalaSymbol*) element);
	_tmp3_ = _tmp2_;
	_tmp4_ = bala_symbol_get_access ((BalaSymbol*) element);
	_tmp5_ = _tmp4_;
	_tmp6_ = bala_parameter_get_direction (element);
	_tmp7_ = _tmp6_;
	_tmp8_ = bala_parameter_get_ellipsis (element);
	_tmp9_ = _tmp8_;
	_tmp10_ = baladoc_api_parameter_new (parent, file, _tmp3_, _tmp5_, _tmp7_, _tmp9_, element);
	node = _tmp10_;
	_tmp11_ = bala_variable_get_variable_type ((BalaVariable*) element);
	_tmp12_ = _tmp11_;
	_tmp13_ = baladoc_tree_builder_create_type_reference (self, _tmp12_, (BaladocApiItem*) node, (BaladocApiNode*) node);
	_tmp14_ = _tmp13_;
	baladoc_api_parameter_set_parameter_type (node, _tmp14_);
	_g_object_unref0 (_tmp14_);
	baladoc_api_node_add_child (parent, (BaladocApiSymbol*) node);
	baladoc_tree_builder_process_children (self, (BaladocApiNode*) node, (BalaCodeNode*) element);
	_g_object_unref0 (node);
	_g_object_unref0 (file);
	_g_object_unref0 (parent);
}

static gpointer
_baladoc_api_tree_ref0 (gpointer self)
{
	return self ? baladoc_api_tree_ref (self) : NULL;
}

BaladocApiTree*
baladoc_tree_builder_build (BaladocTreeBuilder* self,
                            BaladocSettings* settings,
                            BaladocErrorReporter* reporter)
{
	BaladocSettings* _tmp0_;
	BaladocErrorReporter* _tmp1_;
	BalaCodeContext* context = NULL;
	BalaCodeContext* _tmp2_;
	BalaCodeContext* _tmp3_;
	BaladocApiTree* _tmp4_;
	BalaCodeContext* _tmp5_;
	BalaCodeContext* _tmp6_;
	BalaReport* _tmp7_;
	BalaReport* _tmp8_;
	BalaCodeContext* _tmp9_;
	BalaReport* _tmp10_;
	BalaReport* _tmp11_;
	BalaCodeContext* _tmp46_;
	BaladocApiTree* _tmp47_ = NULL;
	gint _tmp48_;
	gint _tmp49_;
	BaladocApiTree* _tmp51_;
	BaladocApiTree* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (settings != NULL, NULL);
	g_return_val_if_fail (reporter != NULL, NULL);
	_tmp0_ = _g_object_ref0 (settings);
	_g_object_unref0 (self->priv->settings);
	self->priv->settings = _tmp0_;
	_tmp1_ = _g_object_ref0 (reporter);
	_g_object_unref0 (self->priv->reporter);
	self->priv->reporter = _tmp1_;
	_tmp2_ = bala_code_context_get ();
	context = _tmp2_;
	_tmp3_ = context;
	_tmp4_ = baladoc_api_tree_new (reporter, settings, _tmp3_);
	_baladoc_api_tree_unref0 (self->priv->tree);
	self->priv->tree = _tmp4_;
	_tmp5_ = context;
	baladoc_tree_builder_create_balac_tree (self, _tmp5_, settings);
	_tmp6_ = context;
	_tmp7_ = bala_code_context_get_report (_tmp6_);
	_tmp8_ = _tmp7_;
	baladoc_error_reporter_set_warnings_offset (reporter, bala_report_get_warnings (_tmp8_));
	_tmp9_ = context;
	_tmp10_ = bala_code_context_get_report (_tmp9_);
	_tmp11_ = _tmp10_;
	baladoc_error_reporter_set_errors_offset (reporter, bala_report_get_errors (_tmp11_));
	{
		BalaList* _vfile_list = NULL;
		BalaCodeContext* _tmp12_;
		BalaList* _tmp13_;
		BalaList* _tmp14_;
		gint _vfile_size = 0;
		BalaList* _tmp15_;
		gint _tmp16_;
		gint _tmp17_;
		gint _vfile_index = 0;
		_tmp12_ = context;
		_tmp13_ = bala_code_context_get_source_files (_tmp12_);
		_tmp14_ = _bala_iterable_ref0 (_tmp13_);
		_vfile_list = _tmp14_;
		_tmp15_ = _vfile_list;
		_tmp16_ = bala_collection_get_size ((BalaCollection*) _tmp15_);
		_tmp17_ = _tmp16_;
		_vfile_size = _tmp17_;
		_vfile_index = -1;
		while (TRUE) {
			gint _tmp18_;
			gint _tmp19_;
			BalaSourceFile* vfile = NULL;
			BalaList* _tmp20_;
			gpointer _tmp21_;
			gboolean _tmp22_ = FALSE;
			gboolean _tmp23_ = FALSE;
			BalaSourceFile* _tmp24_;
			BalaSourceFileType _tmp25_;
			BalaSourceFileType _tmp26_;
			_vfile_index = _vfile_index + 1;
			_tmp18_ = _vfile_index;
			_tmp19_ = _vfile_size;
			if (!(_tmp18_ < _tmp19_)) {
				break;
			}
			_tmp20_ = _vfile_list;
			_tmp21_ = bala_list_get (_tmp20_, _vfile_index);
			vfile = (BalaSourceFile*) _tmp21_;
			_tmp24_ = vfile;
			_tmp25_ = bala_source_file_get_file_type (_tmp24_);
			_tmp26_ = _tmp25_;
			if (_tmp26_ == BALA_SOURCE_FILE_TYPE_PACKAGE) {
				BalaSourceFile* _tmp27_;
				BalaList* _tmp28_;
				gint _tmp29_;
				gint _tmp30_;
				_tmp27_ = vfile;
				_tmp28_ = bala_source_file_get_nodes (_tmp27_);
				_tmp29_ = bala_collection_get_size ((BalaCollection*) _tmp28_);
				_tmp30_ = _tmp29_;
				_tmp23_ = _tmp30_ > 0;
			} else {
				_tmp23_ = FALSE;
			}
			if (_tmp23_) {
				BalaHashMap* _tmp31_;
				BalaSourceFile* _tmp32_;
				_tmp31_ = self->priv->files;
				_tmp32_ = vfile;
				_tmp22_ = bala_map_contains ((BalaMap*) _tmp31_, _tmp32_) == FALSE;
			} else {
				_tmp22_ = FALSE;
			}
			if (_tmp22_) {
				BaladocApiPackage* vdpkg = NULL;
				BalaSourceFile* _tmp33_;
				const gchar* _tmp34_;
				const gchar* _tmp35_;
				gchar* _tmp36_;
				gchar* _tmp37_;
				BaladocApiPackage* _tmp38_;
				BaladocApiPackage* _tmp39_;
				BaladocApiPackage* _tmp40_;
				BaladocTreeBuilderPackageMetaData* _tmp41_;
				BaladocTreeBuilderPackageMetaData* _tmp42_;
				BalaSourceFile* _tmp43_;
				BaladocApiSourceFile* _tmp44_;
				BaladocApiSourceFile* _tmp45_;
				_tmp33_ = vfile;
				_tmp34_ = bala_source_file_get_filename (_tmp33_);
				_tmp35_ = _tmp34_;
				_tmp36_ = baladoc_tree_builder_get_package_name (self, _tmp35_);
				_tmp37_ = _tmp36_;
				_tmp38_ = baladoc_api_package_new (_tmp37_, TRUE, NULL);
				_tmp39_ = _tmp38_;
				_g_free0 (_tmp37_);
				vdpkg = _tmp39_;
				_tmp40_ = vdpkg;
				_tmp41_ = baladoc_tree_builder_register_package (self, _tmp40_);
				_tmp42_ = _tmp41_;
				_tmp43_ = vfile;
				_tmp44_ = baladoc_tree_builder_register_source_file (self, _tmp42_, _tmp43_);
				_tmp45_ = _tmp44_;
				_g_object_unref0 (_tmp45_);
				_baladoc_tree_builder_package_meta_data_unref0 (_tmp42_);
				_g_object_unref0 (vdpkg);
			}
			_bala_source_file_unref0 (vfile);
		}
		_bala_iterable_unref0 (_vfile_list);
	}
	_tmp46_ = context;
	bala_code_context_accept (_tmp46_, (BalaCodeVisitor*) self);
	_tmp48_ = baladoc_error_reporter_get_errors (reporter);
	_tmp49_ = _tmp48_;
	if (_tmp49_ == 0) {
		BaladocApiTree* _tmp50_;
		_tmp50_ = self->priv->tree;
		_tmp47_ = _tmp50_;
	} else {
		_tmp47_ = NULL;
	}
	_tmp51_ = _baladoc_api_tree_ref0 (_tmp47_);
	result = _tmp51_;
	_bala_code_context_unref0 (context);
	return result;
}

BaladocTreeBuilder*
baladoc_tree_builder_construct (GType object_type)
{
	BaladocTreeBuilder* self = NULL;
	self = (BaladocTreeBuilder*) bala_code_visitor_construct (object_type);
	return self;
}

BaladocTreeBuilder*
baladoc_tree_builder_new (void)
{
	return baladoc_tree_builder_construct (BALADOC_TYPE_TREE_BUILDER);
}

static BaladocTreeBuilderPackageMetaData*
baladoc_tree_builder_package_meta_data_construct (GType object_type,
                                                  BaladocApiPackage* package)
{
	BaladocTreeBuilderPackageMetaData* self = NULL;
	BaladocApiPackage* _tmp0_;
	g_return_val_if_fail (package != NULL, NULL);
	self = (BaladocTreeBuilderPackageMetaData*) g_type_create_instance (object_type);
	_tmp0_ = _g_object_ref0 (package);
	_g_object_unref0 (self->package);
	self->package = _tmp0_;
	return self;
}

static BaladocTreeBuilderPackageMetaData*
baladoc_tree_builder_package_meta_data_new (BaladocApiPackage* package)
{
	return baladoc_tree_builder_package_meta_data_construct (BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA, package);
}

static BaladocApiNamespace*
baladoc_tree_builder_package_meta_data_get_namespace (BaladocTreeBuilderPackageMetaData* self,
                                                      BalaNamespace* vns,
                                                      BaladocApiSourceFile* file)
{
	BaladocApiNamespace* ns = NULL;
	BalaHashMap* _tmp0_;
	gpointer _tmp1_;
	BaladocApiNamespace* _tmp2_;
	BaladocApiSourceComment* comment = NULL;
	BalaSourceReference* _tmp3_;
	BalaSourceReference* _tmp4_;
	BalaSymbol* parent_vns = NULL;
	BalaSymbol* _tmp71_;
	BalaSymbol* _tmp72_;
	BalaSymbol* _tmp73_;
	BalaSymbol* _tmp74_;
	BalaHashMap* _tmp91_;
	BaladocApiNamespace* _tmp92_;
	BaladocApiNamespace* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (vns != NULL, NULL);
	g_return_val_if_fail (file != NULL, NULL);
	_tmp0_ = self->namespaces;
	_tmp1_ = bala_map_get ((BalaMap*) _tmp0_, vns);
	ns = (BaladocApiNamespace*) _tmp1_;
	_tmp2_ = ns;
	if (_tmp2_ != NULL) {
		result = ns;
		return result;
	}
	comment = NULL;
	_tmp3_ = bala_code_node_get_source_reference ((BalaCodeNode*) vns);
	_tmp4_ = _tmp3_;
	if (_tmp4_ != NULL) {
		{
			BalaList* _c_list = NULL;
			BalaList* _tmp5_;
			BalaList* _tmp6_;
			gint _c_size = 0;
			BalaList* _tmp7_;
			gint _tmp8_;
			gint _tmp9_;
			gint _c_index = 0;
			_tmp5_ = bala_namespace_get_comments (vns);
			_tmp6_ = _bala_iterable_ref0 (_tmp5_);
			_c_list = _tmp6_;
			_tmp7_ = _c_list;
			_tmp8_ = bala_collection_get_size ((BalaCollection*) _tmp7_);
			_tmp9_ = _tmp8_;
			_c_size = _tmp9_;
			_c_index = -1;
			while (TRUE) {
				gint _tmp10_;
				gint _tmp11_;
				BalaComment* c = NULL;
				BalaList* _tmp12_;
				gpointer _tmp13_;
				gboolean _tmp14_ = FALSE;
				BalaComment* _tmp15_;
				BalaSourceReference* _tmp16_;
				BalaSourceReference* _tmp17_;
				BalaSourceFile* _tmp18_;
				BalaSourceFile* _tmp19_;
				BalaSourceFile* _tmp20_;
				BalaSourceFile* _tmp21_;
				_c_index = _c_index + 1;
				_tmp10_ = _c_index;
				_tmp11_ = _c_size;
				if (!(_tmp10_ < _tmp11_)) {
					break;
				}
				_tmp12_ = _c_list;
				_tmp13_ = bala_list_get (_tmp12_, _c_index);
				c = (BalaComment*) _tmp13_;
				_tmp15_ = c;
				_tmp16_ = bala_comment_get_source_reference (_tmp15_);
				_tmp17_ = _tmp16_;
				_tmp18_ = bala_source_reference_get_file (_tmp17_);
				_tmp19_ = _tmp18_;
				_tmp20_ = baladoc_api_source_file_get_data (file);
				_tmp21_ = _tmp20_;
				if (_tmp19_ == _tmp21_) {
					_tmp14_ = TRUE;
				} else {
					gboolean _tmp22_ = FALSE;
					BalaComment* _tmp23_;
					BalaSourceReference* _tmp24_;
					BalaSourceReference* _tmp25_;
					BalaSourceFile* _tmp26_;
					BalaSourceFile* _tmp27_;
					BalaSourceFileType _tmp28_;
					BalaSourceFileType _tmp29_;
					_tmp23_ = c;
					_tmp24_ = bala_comment_get_source_reference (_tmp23_);
					_tmp25_ = _tmp24_;
					_tmp26_ = bala_source_reference_get_file (_tmp25_);
					_tmp27_ = _tmp26_;
					_tmp28_ = bala_source_file_get_file_type (_tmp27_);
					_tmp29_ = _tmp28_;
					if (_tmp29_ == BALA_SOURCE_FILE_TYPE_SOURCE) {
						BalaSourceFile* _tmp30_;
						BalaSourceFile* _tmp31_;
						BalaSourceFileType _tmp32_;
						BalaSourceFileType _tmp33_;
						_tmp30_ = baladoc_api_source_file_get_data (file);
						_tmp31_ = _tmp30_;
						_tmp32_ = bala_source_file_get_file_type (G_TYPE_CHECK_INSTANCE_CAST (_tmp31_, BALA_TYPE_SOURCE_FILE, BalaSourceFile));
						_tmp33_ = _tmp32_;
						_tmp22_ = _tmp33_ == BALA_SOURCE_FILE_TYPE_SOURCE;
					} else {
						_tmp22_ = FALSE;
					}
					_tmp14_ = _tmp22_;
				}
				if (_tmp14_) {
					BalaSourceReference* pos = NULL;
					BalaComment* _tmp34_;
					BalaSourceReference* _tmp35_;
					BalaSourceReference* _tmp36_;
					BalaSourceReference* _tmp37_;
					BalaComment* _tmp38_;
					_tmp34_ = c;
					_tmp35_ = bala_comment_get_source_reference (_tmp34_);
					_tmp36_ = _tmp35_;
					_tmp37_ = _bala_source_reference_ref0 (_tmp36_);
					pos = _tmp37_;
					_tmp38_ = c;
					if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp38_, BALA_TYPE_GIR_COMMENT)) {
						BalaComment* _tmp39_;
						const gchar* _tmp40_;
						const gchar* _tmp41_;
						BalaSourceReference* _tmp42_;
						BalaSourceLocation _tmp43_ = {0};
						BalaSourceLocation _tmp44_;
						BalaSourceReference* _tmp45_;
						BalaSourceLocation _tmp46_ = {0};
						BalaSourceLocation _tmp47_;
						BalaSourceReference* _tmp48_;
						BalaSourceLocation _tmp49_ = {0};
						BalaSourceLocation _tmp50_;
						BalaSourceReference* _tmp51_;
						BalaSourceLocation _tmp52_ = {0};
						BalaSourceLocation _tmp53_;
						BaladocApiGirSourceComment* _tmp54_;
						_tmp39_ = c;
						_tmp40_ = bala_comment_get_content (_tmp39_);
						_tmp41_ = _tmp40_;
						_tmp42_ = pos;
						bala_source_reference_get_begin (_tmp42_, &_tmp43_);
						_tmp44_ = _tmp43_;
						_tmp45_ = pos;
						bala_source_reference_get_begin (_tmp45_, &_tmp46_);
						_tmp47_ = _tmp46_;
						_tmp48_ = pos;
						bala_source_reference_get_end (_tmp48_, &_tmp49_);
						_tmp50_ = _tmp49_;
						_tmp51_ = pos;
						bala_source_reference_get_end (_tmp51_, &_tmp52_);
						_tmp53_ = _tmp52_;
						_tmp54_ = baladoc_api_gir_source_comment_new (_tmp41_, file, _tmp44_.line, _tmp47_.column, _tmp50_.line, _tmp53_.column);
						_baladoc_api_source_comment_unref0 (comment);
						comment = (BaladocApiSourceComment*) _tmp54_;
					} else {
						BalaComment* _tmp55_;
						const gchar* _tmp56_;
						const gchar* _tmp57_;
						BalaSourceReference* _tmp58_;
						BalaSourceLocation _tmp59_ = {0};
						BalaSourceLocation _tmp60_;
						BalaSourceReference* _tmp61_;
						BalaSourceLocation _tmp62_ = {0};
						BalaSourceLocation _tmp63_;
						BalaSourceReference* _tmp64_;
						BalaSourceLocation _tmp65_ = {0};
						BalaSourceLocation _tmp66_;
						BalaSourceReference* _tmp67_;
						BalaSourceLocation _tmp68_ = {0};
						BalaSourceLocation _tmp69_;
						BaladocApiSourceComment* _tmp70_;
						_tmp55_ = c;
						_tmp56_ = bala_comment_get_content (_tmp55_);
						_tmp57_ = _tmp56_;
						_tmp58_ = pos;
						bala_source_reference_get_begin (_tmp58_, &_tmp59_);
						_tmp60_ = _tmp59_;
						_tmp61_ = pos;
						bala_source_reference_get_begin (_tmp61_, &_tmp62_);
						_tmp63_ = _tmp62_;
						_tmp64_ = pos;
						bala_source_reference_get_end (_tmp64_, &_tmp65_);
						_tmp66_ = _tmp65_;
						_tmp67_ = pos;
						bala_source_reference_get_end (_tmp67_, &_tmp68_);
						_tmp69_ = _tmp68_;
						_tmp70_ = baladoc_api_source_comment_new (_tmp57_, file, _tmp60_.line, _tmp63_.column, _tmp66_.line, _tmp69_.column);
						_baladoc_api_source_comment_unref0 (comment);
						comment = _tmp70_;
					}
					_bala_source_reference_unref0 (pos);
					_bala_comment_unref0 (c);
					break;
				}
				_bala_comment_unref0 (c);
			}
			_bala_iterable_unref0 (_c_list);
		}
	}
	_tmp71_ = bala_symbol_get_parent_symbol ((BalaSymbol*) vns);
	_tmp72_ = _tmp71_;
	_tmp73_ = _bala_code_node_ref0 (_tmp72_);
	parent_vns = _tmp73_;
	_tmp74_ = parent_vns;
	if (_tmp74_ == NULL) {
		BaladocApiPackage* _tmp75_;
		const gchar* _tmp76_;
		const gchar* _tmp77_;
		BaladocApiSourceComment* _tmp78_;
		BaladocApiNamespace* _tmp79_;
		BaladocApiPackage* _tmp80_;
		BaladocApiNamespace* _tmp81_;
		_tmp75_ = self->package;
		_tmp76_ = bala_symbol_get_name ((BalaSymbol*) vns);
		_tmp77_ = _tmp76_;
		_tmp78_ = comment;
		_tmp79_ = baladoc_api_namespace_new ((BaladocApiNode*) _tmp75_, file, _tmp77_, _tmp78_, vns);
		_g_object_unref0 (ns);
		ns = _tmp79_;
		_tmp80_ = self->package;
		_tmp81_ = ns;
		baladoc_api_node_add_child ((BaladocApiNode*) _tmp80_, (BaladocApiSymbol*) _tmp81_);
	} else {
		BaladocApiNamespace* parent_ns = NULL;
		BalaSymbol* _tmp82_;
		BaladocApiNamespace* _tmp83_;
		BaladocApiNamespace* _tmp84_;
		const gchar* _tmp85_;
		const gchar* _tmp86_;
		BaladocApiSourceComment* _tmp87_;
		BaladocApiNamespace* _tmp88_;
		BaladocApiNamespace* _tmp89_;
		BaladocApiNamespace* _tmp90_;
		_tmp82_ = parent_vns;
		_tmp83_ = baladoc_tree_builder_package_meta_data_get_namespace (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp82_, BALA_TYPE_NAMESPACE, BalaNamespace), file);
		parent_ns = _tmp83_;
		_tmp84_ = parent_ns;
		_tmp85_ = bala_symbol_get_name ((BalaSymbol*) vns);
		_tmp86_ = _tmp85_;
		_tmp87_ = comment;
		_tmp88_ = baladoc_api_namespace_new ((BaladocApiNode*) _tmp84_, file, _tmp86_, _tmp87_, vns);
		_g_object_unref0 (ns);
		ns = _tmp88_;
		_tmp89_ = parent_ns;
		_tmp90_ = ns;
		baladoc_api_node_add_child ((BaladocApiNode*) _tmp89_, (BaladocApiSymbol*) _tmp90_);
		_g_object_unref0 (parent_ns);
	}
	_tmp91_ = self->namespaces;
	_tmp92_ = ns;
	bala_map_set ((BalaMap*) _tmp91_, vns, _tmp92_);
	result = ns;
	_bala_code_node_unref0 (parent_vns);
	_baladoc_api_source_comment_unref0 (comment);
	return result;
}

static void
baladoc_tree_builder_package_meta_data_register_source_file (BaladocTreeBuilderPackageMetaData* self,
                                                             BalaSourceFile* file)
{
	BalaArrayList* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (file != NULL);
	_tmp0_ = self->files;
	bala_collection_add ((BalaCollection*) _tmp0_, file);
}

static gboolean
baladoc_tree_builder_package_meta_data_is_package_for_file (BaladocTreeBuilderPackageMetaData* self,
                                                            BalaSourceFile* source_file)
{
	gboolean _tmp0_ = FALSE;
	BalaSourceFileType _tmp1_;
	BalaSourceFileType _tmp2_;
	BalaArrayList* _tmp6_;
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (source_file != NULL, FALSE);
	_tmp1_ = bala_source_file_get_file_type (source_file);
	_tmp2_ = _tmp1_;
	if (_tmp2_ == BALA_SOURCE_FILE_TYPE_SOURCE) {
		BaladocApiPackage* _tmp3_;
		gboolean _tmp4_;
		gboolean _tmp5_;
		_tmp3_ = self->package;
		_tmp4_ = baladoc_api_package_get_is_package (_tmp3_);
		_tmp5_ = _tmp4_;
		_tmp0_ = !_tmp5_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		result = TRUE;
		return result;
	}
	_tmp6_ = self->files;
	result = bala_collection_contains ((BalaCollection*) _tmp6_, source_file);
	return result;
}

static void
baladoc_tree_builder_value_package_meta_data_init (GValue* value)
{
	value->data[0].v_pointer = NULL;
}

static void
baladoc_tree_builder_value_package_meta_data_free_value (GValue* value)
{
	if (value->data[0].v_pointer) {
		baladoc_tree_builder_package_meta_data_unref (value->data[0].v_pointer);
	}
}

static void
baladoc_tree_builder_value_package_meta_data_copy_value (const GValue* src_value,
                                                         GValue* dest_value)
{
	if (src_value->data[0].v_pointer) {
		dest_value->data[0].v_pointer = baladoc_tree_builder_package_meta_data_ref (src_value->data[0].v_pointer);
	} else {
		dest_value->data[0].v_pointer = NULL;
	}
}

static gpointer
baladoc_tree_builder_value_package_meta_data_peek_pointer (const GValue* value)
{
	return value->data[0].v_pointer;
}

static gchar*
baladoc_tree_builder_value_package_meta_data_collect_value (GValue* value,
                                                            guint n_collect_values,
                                                            GTypeCValue* collect_values,
                                                            guint collect_flags)
{
	if (collect_values[0].v_pointer) {
		BaladocTreeBuilderPackageMetaData * object;
		object = collect_values[0].v_pointer;
		if (object->parent_instance.g_class == NULL) {
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
		}
		value->data[0].v_pointer = baladoc_tree_builder_package_meta_data_ref (object);
	} else {
		value->data[0].v_pointer = NULL;
	}
	return NULL;
}

static gchar*
baladoc_tree_builder_value_package_meta_data_lcopy_value (const GValue* value,
                                                          guint n_collect_values,
                                                          GTypeCValue* collect_values,
                                                          guint collect_flags)
{
	BaladocTreeBuilderPackageMetaData ** object_p;
	object_p = collect_values[0].v_pointer;
	if (!object_p) {
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
	}
	if (!value->data[0].v_pointer) {
		*object_p = NULL;
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
		*object_p = value->data[0].v_pointer;
	} else {
		*object_p = baladoc_tree_builder_package_meta_data_ref (value->data[0].v_pointer);
	}
	return NULL;
}

static GParamSpec*
baladoc_tree_builder_param_spec_package_meta_data (const gchar* name,
                                                   const gchar* nick,
                                                   const gchar* blurb,
                                                   GType object_type,
                                                   GParamFlags flags)
{
	BaladocTreeBuilderParamSpecPackageMetaData* spec;
	g_return_val_if_fail (g_type_is_a (object_type, BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA), NULL);
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
	G_PARAM_SPEC (spec)->value_type = object_type;
	return G_PARAM_SPEC (spec);
}

static gpointer
baladoc_tree_builder_value_get_package_meta_data (const GValue* value)
{
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA), NULL);
	return value->data[0].v_pointer;
}

static void
baladoc_tree_builder_value_set_package_meta_data (GValue* value,
                                                  gpointer v_object)
{
	BaladocTreeBuilderPackageMetaData * old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
		baladoc_tree_builder_package_meta_data_ref (value->data[0].v_pointer);
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		baladoc_tree_builder_package_meta_data_unref (old);
	}
}

static void
baladoc_tree_builder_value_take_package_meta_data (GValue* value,
                                                   gpointer v_object)
{
	BaladocTreeBuilderPackageMetaData * old;
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA));
	old = value->data[0].v_pointer;
	if (v_object) {
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA));
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
		value->data[0].v_pointer = v_object;
	} else {
		value->data[0].v_pointer = NULL;
	}
	if (old) {
		baladoc_tree_builder_package_meta_data_unref (old);
	}
}

static void
baladoc_tree_builder_package_meta_data_class_init (BaladocTreeBuilderPackageMetaDataClass * klass,
                                                   gpointer klass_data)
{
	baladoc_tree_builder_package_meta_data_parent_class = g_type_class_peek_parent (klass);
	((BaladocTreeBuilderPackageMetaDataClass *) klass)->finalize = baladoc_tree_builder_package_meta_data_finalize;
}

static void
baladoc_tree_builder_package_meta_data_instance_init (BaladocTreeBuilderPackageMetaData * self,
                                                      gpointer klass)
{
	GHashFunc _tmp0_;
	GEqualFunc _tmp1_;
	GEqualFunc _tmp2_;
	BalaHashMap* _tmp3_;
	GEqualFunc _tmp4_;
	BalaArrayList* _tmp5_;
	_tmp0_ = g_direct_hash;
	_tmp1_ = g_direct_equal;
	_tmp2_ = g_direct_equal;
	_tmp3_ = bala_hash_map_new (BALA_TYPE_NAMESPACE, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, BALADOC_API_TYPE_NAMESPACE, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, _tmp0_, _tmp1_, _tmp2_);
	self->namespaces = _tmp3_;
	_tmp4_ = g_direct_equal;
	_tmp5_ = bala_array_list_new (BALA_TYPE_SOURCE_FILE, (GBoxedCopyFunc) bala_source_file_ref, (GDestroyNotify) bala_source_file_unref, _tmp4_);
	self->files = _tmp5_;
	self->ref_count = 1;
}

static void
baladoc_tree_builder_package_meta_data_finalize (BaladocTreeBuilderPackageMetaData * obj)
{
	BaladocTreeBuilderPackageMetaData * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA, BaladocTreeBuilderPackageMetaData);
	g_signal_handlers_destroy (self);
	_g_object_unref0 (self->package);
	_bala_map_unref0 (self->namespaces);
	_bala_iterable_unref0 (self->files);
}

static GType
baladoc_tree_builder_package_meta_data_get_type_once (void)
{
	static const GTypeValueTable g_define_type_value_table = { baladoc_tree_builder_value_package_meta_data_init, baladoc_tree_builder_value_package_meta_data_free_value, baladoc_tree_builder_value_package_meta_data_copy_value, baladoc_tree_builder_value_package_meta_data_peek_pointer, "p", baladoc_tree_builder_value_package_meta_data_collect_value, "p", baladoc_tree_builder_value_package_meta_data_lcopy_value };
	static const GTypeInfo g_define_type_info = { sizeof (BaladocTreeBuilderPackageMetaDataClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) baladoc_tree_builder_package_meta_data_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BaladocTreeBuilderPackageMetaData), 0, (GInstanceInitFunc) baladoc_tree_builder_package_meta_data_instance_init, &g_define_type_value_table };
	static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
	GType baladoc_tree_builder_package_meta_data_type_id;
	baladoc_tree_builder_package_meta_data_type_id = g_type_register_fundamental (g_type_fundamental_next (), "BaladocTreeBuilderPackageMetaData", &g_define_type_info, &g_define_type_fundamental_info, 0);
	return baladoc_tree_builder_package_meta_data_type_id;
}

static GType
baladoc_tree_builder_package_meta_data_get_type (void)
{
	static volatile gsize baladoc_tree_builder_package_meta_data_type_id__volatile = 0;
	if (g_once_init_enter (&baladoc_tree_builder_package_meta_data_type_id__volatile)) {
		GType baladoc_tree_builder_package_meta_data_type_id;
		baladoc_tree_builder_package_meta_data_type_id = baladoc_tree_builder_package_meta_data_get_type_once ();
		g_once_init_leave (&baladoc_tree_builder_package_meta_data_type_id__volatile, baladoc_tree_builder_package_meta_data_type_id);
	}
	return baladoc_tree_builder_package_meta_data_type_id__volatile;
}

static gpointer
baladoc_tree_builder_package_meta_data_ref (gpointer instance)
{
	BaladocTreeBuilderPackageMetaData * self;
	self = instance;
	g_atomic_int_inc (&self->ref_count);
	return instance;
}

static void
baladoc_tree_builder_package_meta_data_unref (gpointer instance)
{
	BaladocTreeBuilderPackageMetaData * self;
	self = instance;
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
		BALADOC_TREE_BUILDER_PACKAGE_META_DATA_GET_CLASS (self)->finalize (self);
		g_type_free_instance ((GTypeInstance *) self);
	}
}

static void
baladoc_tree_builder_class_init (BaladocTreeBuilderClass * klass,
                                 gpointer klass_data)
{
	baladoc_tree_builder_parent_class = g_type_class_peek_parent (klass);
	((BalaCodeVisitorClass *) klass)->finalize = baladoc_tree_builder_finalize;
	g_type_class_adjust_private_offset (klass, &BaladocTreeBuilder_private_offset);
	((BalaCodeVisitorClass *) klass)->visit_namespace = (void (*) (BalaCodeVisitor*, BalaNamespace*)) baladoc_tree_builder_real_visit_namespace;
	((BalaCodeVisitorClass *) klass)->visit_class = (void (*) (BalaCodeVisitor*, BalaClass*)) baladoc_tree_builder_real_visit_class;
	((BalaCodeVisitorClass *) klass)->visit_interface = (void (*) (BalaCodeVisitor*, BalaInterface*)) baladoc_tree_builder_real_visit_interface;
	((BalaCodeVisitorClass *) klass)->visit_struct = (void (*) (BalaCodeVisitor*, BalaStruct*)) baladoc_tree_builder_real_visit_struct;
	((BalaCodeVisitorClass *) klass)->visit_field = (void (*) (BalaCodeVisitor*, BalaField*)) baladoc_tree_builder_real_visit_field;
	((BalaCodeVisitorClass *) klass)->visit_property = (void (*) (BalaCodeVisitor*, BalaProperty*)) baladoc_tree_builder_real_visit_property;
	((BalaCodeVisitorClass *) klass)->visit_creation_method = (void (*) (BalaCodeVisitor*, BalaCreationMethod*)) baladoc_tree_builder_real_visit_creation_method;
	((BalaCodeVisitorClass *) klass)->visit_method = (void (*) (BalaCodeVisitor*, BalaMethod*)) baladoc_tree_builder_real_visit_method;
	((BalaCodeVisitorClass *) klass)->visit_signal = (void (*) (BalaCodeVisitor*, BalaSignal*)) baladoc_tree_builder_real_visit_signal;
	((BalaCodeVisitorClass *) klass)->visit_delegate = (void (*) (BalaCodeVisitor*, BalaDelegate*)) baladoc_tree_builder_real_visit_delegate;
	((BalaCodeVisitorClass *) klass)->visit_enum = (void (*) (BalaCodeVisitor*, BalaEnum*)) baladoc_tree_builder_real_visit_enum;
	((BalaCodeVisitorClass *) klass)->visit_enum_value = (void (*) (BalaCodeVisitor*, BalaEnumValue*)) baladoc_tree_builder_real_visit_enum_value;
	((BalaCodeVisitorClass *) klass)->visit_constant = (void (*) (BalaCodeVisitor*, BalaConstant*)) baladoc_tree_builder_real_visit_constant;
	((BalaCodeVisitorClass *) klass)->visit_error_domain = (void (*) (BalaCodeVisitor*, BalaErrorDomain*)) baladoc_tree_builder_real_visit_error_domain;
	((BalaCodeVisitorClass *) klass)->visit_error_code = (void (*) (BalaCodeVisitor*, BalaErrorCode*)) baladoc_tree_builder_real_visit_error_code;
	((BalaCodeVisitorClass *) klass)->visit_type_parameter = (void (*) (BalaCodeVisitor*, BalaTypeParameter*)) baladoc_tree_builder_real_visit_type_parameter;
	((BalaCodeVisitorClass *) klass)->visit_formal_parameter = (void (*) (BalaCodeVisitor*, BalaParameter*)) baladoc_tree_builder_real_visit_formal_parameter;
}

static void
baladoc_tree_builder_instance_init (BaladocTreeBuilder * self,
                                    gpointer klass)
{
	GEqualFunc _tmp0_;
	BalaArrayList* _tmp1_;
	GHashFunc _tmp2_;
	GEqualFunc _tmp3_;
	GEqualFunc _tmp4_;
	BalaHashMap* _tmp5_;
	GHashFunc _tmp6_;
	GEqualFunc _tmp7_;
	GEqualFunc _tmp8_;
	BalaHashMap* _tmp9_;
	self->priv = baladoc_tree_builder_get_instance_private (self);
	_tmp0_ = g_direct_equal;
	_tmp1_ = bala_array_list_new (BALADOC_TREE_BUILDER_TYPE_PACKAGE_META_DATA, (GBoxedCopyFunc) baladoc_tree_builder_package_meta_data_ref, (GDestroyNotify) baladoc_tree_builder_package_meta_data_unref, _tmp0_);
	self->priv->packages = _tmp1_;
	_tmp2_ = g_direct_hash;
	_tmp3_ = g_direct_equal;
	_tmp4_ = g_direct_equal;
	_tmp5_ = bala_hash_map_new (BALA_TYPE_SOURCE_FILE, (GBoxedCopyFunc) bala_source_file_ref, (GDestroyNotify) bala_source_file_unref, BALADOC_API_TYPE_SOURCE_FILE, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, _tmp2_, _tmp3_, _tmp4_);
	self->priv->files = _tmp5_;
	_tmp6_ = g_direct_hash;
	_tmp7_ = g_direct_equal;
	_tmp8_ = g_direct_equal;
	_tmp9_ = bala_hash_map_new (BALA_TYPE_SYMBOL, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, BALADOC_API_TYPE_SYMBOL, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, _tmp6_, _tmp7_, _tmp8_);
	self->priv->symbol_map = _tmp9_;
	self->priv->glib_error = NULL;
}

static void
baladoc_tree_builder_finalize (BalaCodeVisitor * obj)
{
	BaladocTreeBuilder * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BALADOC_TYPE_TREE_BUILDER, BaladocTreeBuilder);
	_bala_iterable_unref0 (self->priv->packages);
	_baladoc_tree_builder_package_meta_data_unref0 (self->priv->source_package);
	_bala_map_unref0 (self->priv->files);
	_bala_map_unref0 (self->priv->symbol_map);
	_g_object_unref0 (self->priv->reporter);
	_g_object_unref0 (self->priv->settings);
	_g_object_unref0 (self->priv->current_node);
	_baladoc_api_tree_unref0 (self->priv->tree);
	_g_object_unref0 (self->priv->glib_error);
	BALA_CODE_VISITOR_CLASS (baladoc_tree_builder_parent_class)->finalize (obj);
}

/**
 * Creates an simpler, minimized, more abstract AST for balacs AST.
 */
static GType
baladoc_tree_builder_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (BaladocTreeBuilderClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) baladoc_tree_builder_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BaladocTreeBuilder), 0, (GInstanceInitFunc) baladoc_tree_builder_instance_init, NULL };
	GType baladoc_tree_builder_type_id;
	baladoc_tree_builder_type_id = g_type_register_static (BALA_TYPE_CODE_VISITOR, "BaladocTreeBuilder", &g_define_type_info, 0);
	BaladocTreeBuilder_private_offset = g_type_add_instance_private (baladoc_tree_builder_type_id, sizeof (BaladocTreeBuilderPrivate));
	return baladoc_tree_builder_type_id;
}

GType
baladoc_tree_builder_get_type (void)
{
	static volatile gsize baladoc_tree_builder_type_id__volatile = 0;
	if (g_once_init_enter (&baladoc_tree_builder_type_id__volatile)) {
		GType baladoc_tree_builder_type_id;
		baladoc_tree_builder_type_id = baladoc_tree_builder_get_type_once ();
		g_once_init_leave (&baladoc_tree_builder_type_id__volatile, baladoc_tree_builder_type_id);
	}
	return baladoc_tree_builder_type_id__volatile;
}

static void
_bala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_bala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_bala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gint
_bala_array_length (gpointer array)
{
	gint length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

