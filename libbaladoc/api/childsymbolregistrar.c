/* childsymbolregistrar.c generated by balac, the Bala compiler
 * generated from childsymbolregistrar.bala, do not modify */

/* childsymbolregistrar.bala
 *
 * Copyright (C) 2011  Florian Brosch
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Florian Brosch <flo.brosch@gmail.com>
 */

#include "baladoc.h"
#include <glib.h>
#include <balagee.h>
#include <glib-object.h>

enum  {
	BALADOC_API_CHILD_SYMBOL_REGISTRAR_0_PROPERTY,
	BALADOC_API_CHILD_SYMBOL_REGISTRAR_NUM_PROPERTIES
};
static GParamSpec* baladoc_api_child_symbol_registrar_properties[BALADOC_API_CHILD_SYMBOL_REGISTRAR_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _bala_iterator_unref0(var) ((var == NULL) ? NULL : (var = (bala_iterator_unref (var), NULL)))
#define _bala_iterable_unref0(var) ((var == NULL) ? NULL : (var = (bala_iterable_unref (var), NULL)))

static gpointer baladoc_api_child_symbol_registrar_parent_class = NULL;

static void baladoc_api_child_symbol_registrar_real_visit_tree (BaladocApiVisitor* base,
                                                         BaladocApiTree* item);
static void baladoc_api_child_symbol_registrar_real_visit_package (BaladocApiVisitor* base,
                                                            BaladocApiPackage* item);
static void baladoc_api_child_symbol_registrar_real_visit_namespace (BaladocApiVisitor* base,
                                                              BaladocApiNamespace* item);
static void baladoc_api_child_symbol_registrar_real_visit_interface (BaladocApiVisitor* base,
                                                              BaladocApiInterface* item);
static void baladoc_api_child_symbol_registrar_real_visit_class (BaladocApiVisitor* base,
                                                          BaladocApiClass* item);
static void baladoc_api_child_symbol_registrar_real_visit_struct (BaladocApiVisitor* base,
                                                           BaladocApiStruct* item);
static void baladoc_api_child_symbol_registrar_real_visit_property (BaladocApiVisitor* base,
                                                             BaladocApiProperty* item);
static GType baladoc_api_child_symbol_registrar_get_type_once (void);

/**
 * {@inheritDoc}
 */
static void
baladoc_api_child_symbol_registrar_real_visit_tree (BaladocApiVisitor* base,
                                                    BaladocApiTree* item)
{
	BaladocApiChildSymbolRegistrar * self;
	self = (BaladocApiChildSymbolRegistrar*) base;
	g_return_if_fail (item != NULL);
	baladoc_api_tree_accept_children (item, (BaladocApiVisitor*) self);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_api_child_symbol_registrar_real_visit_package (BaladocApiVisitor* base,
                                                       BaladocApiPackage* item)
{
	BaladocApiChildSymbolRegistrar * self;
	self = (BaladocApiChildSymbolRegistrar*) base;
	g_return_if_fail (item != NULL);
	baladoc_api_node_accept_all_children ((BaladocApiNode*) item, (BaladocApiVisitor*) self, FALSE);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_api_child_symbol_registrar_real_visit_namespace (BaladocApiVisitor* base,
                                                         BaladocApiNamespace* item)
{
	BaladocApiChildSymbolRegistrar * self;
	self = (BaladocApiChildSymbolRegistrar*) base;
	g_return_if_fail (item != NULL);
	baladoc_api_node_accept_all_children ((BaladocApiNode*) item, (BaladocApiVisitor*) self, FALSE);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_api_child_symbol_registrar_real_visit_interface (BaladocApiVisitor* base,
                                                         BaladocApiInterface* item)
{
	BaladocApiChildSymbolRegistrar * self;
	BalaCollection* interfaces = NULL;
	BalaCollection* _tmp0_;
	BaladocApiTypeReference* _tmp9_;
	BaladocApiTypeReference* _tmp10_;
	self = (BaladocApiChildSymbolRegistrar*) base;
	g_return_if_fail (item != NULL);
	_tmp0_ = baladoc_api_interface_get_implemented_interface_list (item);
	interfaces = _tmp0_;
	{
		BalaIterator* _type_ref_it = NULL;
		BalaCollection* _tmp1_;
		BalaIterator* _tmp2_;
		_tmp1_ = interfaces;
		_tmp2_ = bala_iterable_iterator ((BalaIterable*) _tmp1_);
		_type_ref_it = _tmp2_;
		while (TRUE) {
			BalaIterator* _tmp3_;
			BaladocApiTypeReference* type_ref = NULL;
			BalaIterator* _tmp4_;
			gpointer _tmp5_;
			BaladocApiTypeReference* _tmp6_;
			BaladocApiItem* _tmp7_;
			BaladocApiItem* _tmp8_;
			_tmp3_ = _type_ref_it;
			if (!bala_iterator_next (_tmp3_)) {
				break;
			}
			_tmp4_ = _type_ref_it;
			_tmp5_ = bala_iterator_get (_tmp4_);
			type_ref = (BaladocApiTypeReference*) _tmp5_;
			_tmp6_ = type_ref;
			_tmp7_ = baladoc_api_typereference_get_data_type (_tmp6_);
			_tmp8_ = _tmp7_;
			baladoc_api_interface_register_related_interface (G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, BALADOC_API_TYPE_INTERFACE, BaladocApiInterface), item);
			_g_object_unref0 (type_ref);
		}
		_bala_iterator_unref0 (_type_ref_it);
	}
	_tmp9_ = baladoc_api_interface_get_base_type (item);
	_tmp10_ = _tmp9_;
	if (_tmp10_ != NULL) {
		BaladocApiTypeReference* _tmp11_;
		BaladocApiTypeReference* _tmp12_;
		BaladocApiItem* _tmp13_;
		BaladocApiItem* _tmp14_;
		_tmp11_ = baladoc_api_interface_get_base_type (item);
		_tmp12_ = _tmp11_;
		_tmp13_ = baladoc_api_typereference_get_data_type (_tmp12_);
		_tmp14_ = _tmp13_;
		baladoc_api_class_register_derived_interface (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, BALADOC_API_TYPE_CLASS, BaladocApiClass), item);
	}
	baladoc_api_node_accept_all_children ((BaladocApiNode*) item, (BaladocApiVisitor*) self, FALSE);
	_bala_iterable_unref0 (interfaces);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_api_child_symbol_registrar_real_visit_class (BaladocApiVisitor* base,
                                                     BaladocApiClass* item)
{
	BaladocApiChildSymbolRegistrar * self;
	BalaCollection* interfaces = NULL;
	BalaCollection* _tmp0_;
	BaladocApiTypeReference* _tmp9_;
	BaladocApiTypeReference* _tmp10_;
	self = (BaladocApiChildSymbolRegistrar*) base;
	g_return_if_fail (item != NULL);
	_tmp0_ = baladoc_api_class_get_implemented_interface_list (item);
	interfaces = _tmp0_;
	{
		BalaIterator* _type_ref_it = NULL;
		BalaCollection* _tmp1_;
		BalaIterator* _tmp2_;
		_tmp1_ = interfaces;
		_tmp2_ = bala_iterable_iterator ((BalaIterable*) _tmp1_);
		_type_ref_it = _tmp2_;
		while (TRUE) {
			BalaIterator* _tmp3_;
			BaladocApiTypeReference* type_ref = NULL;
			BalaIterator* _tmp4_;
			gpointer _tmp5_;
			BaladocApiTypeReference* _tmp6_;
			BaladocApiItem* _tmp7_;
			BaladocApiItem* _tmp8_;
			_tmp3_ = _type_ref_it;
			if (!bala_iterator_next (_tmp3_)) {
				break;
			}
			_tmp4_ = _type_ref_it;
			_tmp5_ = bala_iterator_get (_tmp4_);
			type_ref = (BaladocApiTypeReference*) _tmp5_;
			_tmp6_ = type_ref;
			_tmp7_ = baladoc_api_typereference_get_data_type (_tmp6_);
			_tmp8_ = _tmp7_;
			baladoc_api_interface_register_implementation (G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, BALADOC_API_TYPE_INTERFACE, BaladocApiInterface), item);
			_g_object_unref0 (type_ref);
		}
		_bala_iterator_unref0 (_type_ref_it);
	}
	_tmp9_ = baladoc_api_class_get_base_type (item);
	_tmp10_ = _tmp9_;
	if (_tmp10_ != NULL) {
		BaladocApiTypeReference* _tmp11_;
		BaladocApiTypeReference* _tmp12_;
		BaladocApiItem* _tmp13_;
		BaladocApiItem* _tmp14_;
		_tmp11_ = baladoc_api_class_get_base_type (item);
		_tmp12_ = _tmp11_;
		_tmp13_ = baladoc_api_typereference_get_data_type (_tmp12_);
		_tmp14_ = _tmp13_;
		baladoc_api_class_register_child_class (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, BALADOC_API_TYPE_CLASS, BaladocApiClass), item);
	}
	baladoc_api_node_accept_all_children ((BaladocApiNode*) item, (BaladocApiVisitor*) self, FALSE);
	_bala_iterable_unref0 (interfaces);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_api_child_symbol_registrar_real_visit_struct (BaladocApiVisitor* base,
                                                      BaladocApiStruct* item)
{
	BaladocApiChildSymbolRegistrar * self;
	BaladocApiTypeReference* _tmp0_;
	BaladocApiTypeReference* _tmp1_;
	self = (BaladocApiChildSymbolRegistrar*) base;
	g_return_if_fail (item != NULL);
	_tmp0_ = baladoc_api_struct_get_base_type (item);
	_tmp1_ = _tmp0_;
	if (_tmp1_ != NULL) {
		BaladocApiTypeReference* _tmp2_;
		BaladocApiTypeReference* _tmp3_;
		BaladocApiItem* _tmp4_;
		BaladocApiItem* _tmp5_;
		_tmp2_ = baladoc_api_struct_get_base_type (item);
		_tmp3_ = _tmp2_;
		_tmp4_ = baladoc_api_typereference_get_data_type (_tmp3_);
		_tmp5_ = _tmp4_;
		baladoc_api_struct_register_child_struct (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, BALADOC_API_TYPE_STRUCT, BaladocApiStruct), item);
	}
	baladoc_api_node_accept_all_children ((BaladocApiNode*) item, (BaladocApiVisitor*) self, FALSE);
}

/**
 * {@inheritDoc}
 */
static void
baladoc_api_child_symbol_registrar_real_visit_property (BaladocApiVisitor* base,
                                                        BaladocApiProperty* item)
{
	BaladocApiChildSymbolRegistrar * self;
	self = (BaladocApiChildSymbolRegistrar*) base;
	g_return_if_fail (item != NULL);
	baladoc_api_node_accept_all_children ((BaladocApiNode*) item, (BaladocApiVisitor*) self, FALSE);
}

BaladocApiChildSymbolRegistrar*
baladoc_api_child_symbol_registrar_construct (GType object_type)
{
	BaladocApiChildSymbolRegistrar * self = NULL;
	self = (BaladocApiChildSymbolRegistrar*) baladoc_api_visitor_construct (object_type);
	return self;
}

BaladocApiChildSymbolRegistrar*
baladoc_api_child_symbol_registrar_new (void)
{
	return baladoc_api_child_symbol_registrar_construct (BALADOC_API_TYPE_CHILD_SYMBOL_REGISTRAR);
}

static void
baladoc_api_child_symbol_registrar_class_init (BaladocApiChildSymbolRegistrarClass * klass,
                                               gpointer klass_data)
{
	baladoc_api_child_symbol_registrar_parent_class = g_type_class_peek_parent (klass);
	((BaladocApiVisitorClass *) klass)->visit_tree = (void (*) (BaladocApiVisitor*, BaladocApiTree*)) baladoc_api_child_symbol_registrar_real_visit_tree;
	((BaladocApiVisitorClass *) klass)->visit_package = (void (*) (BaladocApiVisitor*, BaladocApiPackage*)) baladoc_api_child_symbol_registrar_real_visit_package;
	((BaladocApiVisitorClass *) klass)->visit_namespace = (void (*) (BaladocApiVisitor*, BaladocApiNamespace*)) baladoc_api_child_symbol_registrar_real_visit_namespace;
	((BaladocApiVisitorClass *) klass)->visit_interface = (void (*) (BaladocApiVisitor*, BaladocApiInterface*)) baladoc_api_child_symbol_registrar_real_visit_interface;
	((BaladocApiVisitorClass *) klass)->visit_class = (void (*) (BaladocApiVisitor*, BaladocApiClass*)) baladoc_api_child_symbol_registrar_real_visit_class;
	((BaladocApiVisitorClass *) klass)->visit_struct = (void (*) (BaladocApiVisitor*, BaladocApiStruct*)) baladoc_api_child_symbol_registrar_real_visit_struct;
	((BaladocApiVisitorClass *) klass)->visit_property = (void (*) (BaladocApiVisitor*, BaladocApiProperty*)) baladoc_api_child_symbol_registrar_real_visit_property;
}

static void
baladoc_api_child_symbol_registrar_instance_init (BaladocApiChildSymbolRegistrar * self,
                                                  gpointer klass)
{
}

static GType
baladoc_api_child_symbol_registrar_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (BaladocApiChildSymbolRegistrarClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) baladoc_api_child_symbol_registrar_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BaladocApiChildSymbolRegistrar), 0, (GInstanceInitFunc) baladoc_api_child_symbol_registrar_instance_init, NULL };
	GType baladoc_api_child_symbol_registrar_type_id;
	baladoc_api_child_symbol_registrar_type_id = g_type_register_static (BALADOC_API_TYPE_VISITOR, "BaladocApiChildSymbolRegistrar", &g_define_type_info, 0);
	return baladoc_api_child_symbol_registrar_type_id;
}

GType
baladoc_api_child_symbol_registrar_get_type (void)
{
	static volatile gsize baladoc_api_child_symbol_registrar_type_id__volatile = 0;
	if (g_once_init_enter (&baladoc_api_child_symbol_registrar_type_id__volatile)) {
		GType baladoc_api_child_symbol_registrar_type_id;
		baladoc_api_child_symbol_registrar_type_id = baladoc_api_child_symbol_registrar_get_type_once ();
		g_once_init_leave (&baladoc_api_child_symbol_registrar_type_id__volatile, baladoc_api_child_symbol_registrar_type_id);
	}
	return baladoc_api_child_symbol_registrar_type_id__volatile;
}

