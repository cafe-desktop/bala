/* girdocumentationimporter.c generated by balac, the Bala compiler
 * generated from girdocumentationimporter.bala, do not modify */

/* girdocumentationimporter.bala
 *
 * Copyright (C) 2008-2010  Jürg Billeter
 * Copyright (C) 2011       Luca Bruno
 * Copyright (C) 2011-2014  Florian Brosch
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 * 	Jürg Billeter <j@bitron.ch>
 * 	Luca Bruno <lucabru@src.gnome.org>
 *  Florian Brosch <flo.brosch@gmail.com>
 */

#include "baladoc.h"
#include <bala.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <balagee.h>
#include <glib-object.h>

enum  {
	BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_0_PROPERTY,
	BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_FILE_EXTENSION_PROPERTY,
	BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_NUM_PROPERTIES
};
static GParamSpec* baladoc_importer_gir_documentation_importer_properties[BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_NUM_PROPERTIES];
#define _bala_markup_reader_unref0(var) ((var == NULL) ? NULL : (var = (bala_markup_reader_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _bala_source_file_unref0(var) ((var == NULL) ? NULL : (var = (bala_source_file_unref (var), NULL)))
#define _bala_iterable_unref0(var) ((var == NULL) ? NULL : (var = (bala_iterable_unref (var), NULL)))

#define BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_TYPE_IMPLICIT_PARAMETER_POS (baladoc_importer_gir_documentation_importer_implicit_parameter_pos_get_type ())
typedef struct _BaladocImporterGirDocumentationImporterImplicitParameterPos BaladocImporterGirDocumentationImporterImplicitParameterPos;
#define _bala_source_reference_unref0(var) ((var == NULL) ? NULL : (var = (bala_source_reference_unref (var), NULL)))
#define _baladoc_api_source_comment_unref0(var) ((var == NULL) ? NULL : (var = (baladoc_api_source_comment_unref (var), NULL)))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))

struct _BaladocImporterGirDocumentationImporterPrivate {
	BalaMarkupTokenType current_token;
	BalaSourceLocation begin;
	BalaSourceLocation end;
	BalaMarkupReader* reader;
	BaladocDocumentationParser* parser;
	BaladocApiSourceFile* file;
	gchar* parent_c_identifier;
};

struct _BaladocImporterGirDocumentationImporterImplicitParameterPos {
	gint parameter;
	gint position;
};

static gint BaladocImporterGirDocumentationImporter_private_offset;
static gpointer baladoc_importer_gir_documentation_importer_parent_class = NULL;

#define BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_GIR_VERSION "1.2"
static void baladoc_importer_gir_documentation_importer_real_process (BaladocImporterDocumentationImporter* base,
                                                               const gchar* source_file);
static void baladoc_importer_gir_documentation_importer_next (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_error (BaladocImporterGirDocumentationImporter* self,
                                                        const gchar* message);
static void baladoc_importer_gir_documentation_importer_parse_repository (BaladocImporterGirDocumentationImporter* self);
static BaladocApiParameter* baladoc_importer_gir_documentation_importer_find_parameter (BaladocImporterGirDocumentationImporter* self,
                                                                                 BaladocApiNode* node,
                                                                                 const gchar* name);
static inline gchar* baladoc_importer_gir_documentation_importer_get_cparameter_name (BaladocImporterGirDocumentationImporter* self,
                                                                        gchar** param_names,
                                                                        gint param_names_length1,
                                                                        gint length_pos);
static GType baladoc_importer_gir_documentation_importer_implicit_parameter_pos_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static BaladocImporterGirDocumentationImporterImplicitParameterPos* baladoc_importer_gir_documentation_importer_implicit_parameter_pos_dup (const BaladocImporterGirDocumentationImporterImplicitParameterPos* self);
static void baladoc_importer_gir_documentation_importer_implicit_parameter_pos_free (BaladocImporterGirDocumentationImporterImplicitParameterPos* self);
static void baladoc_importer_gir_documentation_importer_attach_comment (BaladocImporterGirDocumentationImporter* self,
                                                                 const gchar* cname,
                                                                 BaladocApiGirSourceComment* comment,
                                                                 gchar** param_names,
                                                                 gint param_names_length1,
                                                                 BaladocImporterGirDocumentationImporterImplicitParameterPos* destroy_notifies,
                                                                 gint destroy_notifies_length1,
                                                                 BaladocImporterGirDocumentationImporterImplicitParameterPos* closures,
                                                                 gint closures_length1,
                                                                 BaladocImporterGirDocumentationImporterImplicitParameterPos* array_lengths,
                                                                 gint array_lengths_length1,
                                                                 gint array_length_ret);
G_GNUC_INTERNAL void baladoc_api_parameter_set_implicit_destroy_cparameter_name (BaladocApiParameter* self,
                                                                 const gchar* value);
G_GNUC_INTERNAL void baladoc_api_parameter_set_implicit_closure_cparameter_name (BaladocApiParameter* self,
                                                                 const gchar* value);
G_GNUC_INTERNAL void baladoc_api_parameter_set_implicit_array_length_cparameter_name (BaladocApiParameter* self,
                                                                      const gchar* value);
G_GNUC_INTERNAL void baladoc_api_callable_set_implicit_array_length_cparameter_name (BaladocApiCallable* self,
                                                                     const gchar* value);
G_GNUC_INTERNAL void baladoc_api_node_set_documentation (BaladocApiNode* self,
                                         BaladocContentComment* value);
static void baladoc_importer_gir_documentation_importer_warning (BaladocImporterGirDocumentationImporter* self,
                                                          const gchar* message);
static void baladoc_importer_gir_documentation_importer_start_element (BaladocImporterGirDocumentationImporter* self,
                                                                const gchar* name);
static void baladoc_importer_gir_documentation_importer_end_element (BaladocImporterGirDocumentationImporter* self,
                                                              const gchar* name);
static void baladoc_importer_gir_documentation_importer_parse_namespace (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_include (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_package (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_c_include (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_skip_element (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_alias (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_enumeration (BaladocImporterGirDocumentationImporter* self,
                                                                    const gchar* element_name);
static void baladoc_importer_gir_documentation_importer_parse_bitfield (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_method (BaladocImporterGirDocumentationImporter* self,
                                                               const gchar* element_name);
static void baladoc_importer_gir_documentation_importer_parse_callback (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_record (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_class (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_interface (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_boxed (BaladocImporterGirDocumentationImporter* self,
                                                              const gchar* element_name);
static void baladoc_importer_gir_documentation_importer_parse_union (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_constant (BaladocImporterGirDocumentationImporter* self);
static BaladocApiGirSourceComment* baladoc_importer_gir_documentation_importer_parse_symbol_doc (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_type (BaladocImporterGirDocumentationImporter* self,
                                                             gint* array_length_pos);
static BaladocApiSourceComment* baladoc_importer_gir_documentation_importer_parse_doc (BaladocImporterGirDocumentationImporter* self,
                                                                                const gchar* element_name);
static void baladoc_importer_gir_documentation_importer_parse_enumeration_member (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_return_value (BaladocImporterGirDocumentationImporter* self,
                                                                     BaladocApiSourceComment* * comment,
                                                                     gint* array_length_ret);
static void baladoc_importer_gir_documentation_importer_parse_parameter (BaladocImporterGirDocumentationImporter* self,
                                                                  BaladocApiSourceComment* * comment,
                                                                  gchar* * param_name,
                                                                  gint* destroy_pos,
                                                                  gint* closure_pos,
                                                                  gint* array_length_pos);
static void baladoc_importer_gir_documentation_importer_parse_field (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_constructor (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_property (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_signal (BaladocImporterGirDocumentationImporter* self);
static void baladoc_importer_gir_documentation_importer_parse_function (BaladocImporterGirDocumentationImporter* self,
                                                                 const gchar* element_name);
static void _bala_array_add3 (gchar** * array,
                       gint* length,
                       gint* size,
                       gchar* value);
static void baladoc_importer_gir_documentation_importer_implicit_parameter_pos_init (BaladocImporterGirDocumentationImporterImplicitParameterPos *self,
                                                                              gint parameter,
                                                                              gint position);
static void _bala_array_add4 (BaladocImporterGirDocumentationImporterImplicitParameterPos* * array,
                       gint* length,
                       gint* size,
                       const BaladocImporterGirDocumentationImporterImplicitParameterPos* value);
static void _bala_array_add5 (BaladocImporterGirDocumentationImporterImplicitParameterPos* * array,
                       gint* length,
                       gint* size,
                       const BaladocImporterGirDocumentationImporterImplicitParameterPos* value);
static void _bala_array_add6 (BaladocImporterGirDocumentationImporterImplicitParameterPos* * array,
                       gint* length,
                       gint* size,
                       const BaladocImporterGirDocumentationImporterImplicitParameterPos* value);
static void baladoc_importer_gir_documentation_importer_finalize (GObject * obj);
static GType baladoc_importer_gir_documentation_importer_get_type_once (void);
static void _bala_baladoc_importer_gir_documentation_importer_get_property (GObject * object,
                                                                     guint property_id,
                                                                     GValue * value,
                                                                     GParamSpec * pspec);
static void _bala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _bala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);

static inline gpointer
baladoc_importer_gir_documentation_importer_get_instance_private (BaladocImporterGirDocumentationImporter* self)
{
	return G_STRUCT_MEMBER_P (self, BaladocImporterGirDocumentationImporter_private_offset);
}

static const gchar*
baladoc_importer_gir_documentation_importer_real_get_file_extension (BaladocImporterDocumentationImporter* base)
{
	const gchar* result;
	BaladocImporterGirDocumentationImporter* self;
	self = (BaladocImporterGirDocumentationImporter*) base;
	result = "gir";
	return result;
}

static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}

BaladocImporterGirDocumentationImporter*
baladoc_importer_gir_documentation_importer_construct (GType object_type,
                                                       BaladocApiTree* tree,
                                                       BaladocDocumentationParser* parser,
                                                       BaladocModuleLoader* modules,
                                                       BaladocSettings* settings,
                                                       BaladocErrorReporter* reporter)
{
	BaladocImporterGirDocumentationImporter * self = NULL;
	BaladocDocumentationParser* _tmp0_;
	g_return_val_if_fail (tree != NULL, NULL);
	g_return_val_if_fail (parser != NULL, NULL);
	g_return_val_if_fail (modules != NULL, NULL);
	g_return_val_if_fail (settings != NULL, NULL);
	g_return_val_if_fail (reporter != NULL, NULL);
	self = (BaladocImporterGirDocumentationImporter*) baladoc_importer_documentation_importer_construct (object_type, tree, modules, settings);
	_tmp0_ = _g_object_ref0 (parser);
	_g_object_unref0 (self->priv->parser);
	self->priv->parser = _tmp0_;
	return self;
}

BaladocImporterGirDocumentationImporter*
baladoc_importer_gir_documentation_importer_new (BaladocApiTree* tree,
                                                 BaladocDocumentationParser* parser,
                                                 BaladocModuleLoader* modules,
                                                 BaladocSettings* settings,
                                                 BaladocErrorReporter* reporter)
{
	return baladoc_importer_gir_documentation_importer_construct (BALADOC_IMPORTER_TYPE_GIR_DOCUMENTATION_IMPORTER, tree, parser, modules, settings, reporter);
}

static void
baladoc_importer_gir_documentation_importer_real_process (BaladocImporterDocumentationImporter* base,
                                                          const gchar* source_file)
{
	BaladocImporterGirDocumentationImporter * self;
	BalaSourceFile* data = NULL;
	BaladocApiTree* _tmp0_;
	BalaCodeContext* _tmp1_;
	BalaCodeContext* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	BalaSourceFile* _tmp5_;
	BalaSourceFile* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	BaladocApiPackage* _tmp9_;
	BaladocApiPackage* _tmp10_;
	BalaSourceFile* _tmp11_;
	BaladocApiSourceFile* _tmp12_;
	BalaMarkupReader* _tmp13_;
	self = (BaladocImporterGirDocumentationImporter*) base;
	g_return_if_fail (source_file != NULL);
	_tmp0_ = ((BaladocImporterDocumentationImporter*) self)->tree;
	_tmp1_ = baladoc_api_tree_get_context (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = g_path_get_basename (source_file);
	_tmp4_ = _tmp3_;
	_tmp5_ = bala_source_file_new (_tmp2_, BALA_SOURCE_FILE_TYPE_PACKAGE, _tmp4_, NULL, FALSE);
	_tmp6_ = _tmp5_;
	_g_free0 (_tmp4_);
	data = _tmp6_;
	_tmp7_ = g_path_get_basename (source_file);
	_tmp8_ = _tmp7_;
	_tmp9_ = baladoc_api_package_new (_tmp8_, TRUE, NULL);
	_tmp10_ = _tmp9_;
	_tmp11_ = data;
	_tmp12_ = baladoc_api_source_file_new (_tmp10_, source_file, NULL, _tmp11_);
	_g_object_unref0 (self->priv->file);
	self->priv->file = _tmp12_;
	_g_object_unref0 (_tmp10_);
	_g_free0 (_tmp8_);
	_tmp13_ = bala_markup_reader_new (source_file);
	_bala_markup_reader_unref0 (self->priv->reader);
	self->priv->reader = _tmp13_;
	{
		gboolean _tmp14_ = FALSE;
		_tmp14_ = TRUE;
		while (TRUE) {
			BalaMarkupTokenType _tmp20_;
			if (!_tmp14_) {
				gboolean _tmp15_ = FALSE;
				BalaMarkupTokenType _tmp16_;
				_tmp16_ = self->priv->current_token;
				if (_tmp16_ != BALA_MARKUP_TOKEN_TYPE_START_ELEMENT) {
					BalaMarkupReader* _tmp17_;
					const gchar* _tmp18_;
					const gchar* _tmp19_;
					_tmp17_ = self->priv->reader;
					_tmp18_ = bala_markup_reader_get_name (_tmp17_);
					_tmp19_ = _tmp18_;
					_tmp15_ = g_strcmp0 (_tmp19_, "repository") != 0;
				} else {
					_tmp15_ = FALSE;
				}
				if (!_tmp15_) {
					break;
				}
			}
			_tmp14_ = FALSE;
			baladoc_importer_gir_documentation_importer_next (self);
			_tmp20_ = self->priv->current_token;
			if (_tmp20_ == BALA_MARKUP_TOKEN_TYPE_EOF) {
				baladoc_importer_gir_documentation_importer_error (self, "unexpected end of file");
				_bala_source_file_unref0 (data);
				return;
			}
		}
	}
	baladoc_importer_gir_documentation_importer_parse_repository (self);
	_bala_markup_reader_unref0 (self->priv->reader);
	self->priv->reader = NULL;
	_g_object_unref0 (self->priv->file);
	self->priv->file = NULL;
	_bala_source_file_unref0 (data);
}

static gpointer
_bala_iterable_ref0 (gpointer self)
{
	return self ? bala_iterable_ref (self) : NULL;
}

static BaladocApiParameter*
baladoc_importer_gir_documentation_importer_find_parameter (BaladocImporterGirDocumentationImporter* self,
                                                            BaladocApiNode* node,
                                                            const gchar* name)
{
	BalaList* parameters = NULL;
	BalaList* _tmp0_;
	BaladocApiParameter* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (node != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	_tmp0_ = baladoc_api_node_get_children_by_type (node, BALADOC_API_NODE_TYPE_FORMAL_PARAMETER, FALSE);
	parameters = _tmp0_;
	{
		BalaList* _param_list = NULL;
		BalaList* _tmp1_;
		BalaList* _tmp2_;
		gint _param_size = 0;
		BalaList* _tmp3_;
		gint _tmp4_;
		gint _tmp5_;
		gint _param_index = 0;
		_tmp1_ = parameters;
		_tmp2_ = _bala_iterable_ref0 (_tmp1_);
		_param_list = _tmp2_;
		_tmp3_ = _param_list;
		_tmp4_ = bala_collection_get_size ((BalaCollection*) _tmp3_);
		_tmp5_ = _tmp4_;
		_param_size = _tmp5_;
		_param_index = -1;
		while (TRUE) {
			gint _tmp6_;
			gint _tmp7_;
			BaladocApiNode* param = NULL;
			BalaList* _tmp8_;
			gpointer _tmp9_;
			BaladocApiNode* _tmp10_;
			const gchar* _tmp11_;
			const gchar* _tmp12_;
			_param_index = _param_index + 1;
			_tmp6_ = _param_index;
			_tmp7_ = _param_size;
			if (!(_tmp6_ < _tmp7_)) {
				break;
			}
			_tmp8_ = _param_list;
			_tmp9_ = bala_list_get (_tmp8_, _param_index);
			param = (BaladocApiNode*) _tmp9_;
			_tmp10_ = param;
			_tmp11_ = baladoc_api_node_get_name ((BaladocApiNode*) G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, BALADOC_API_TYPE_PARAMETER, BaladocApiParameter));
			_tmp12_ = _tmp11_;
			if (g_strcmp0 (_tmp12_, name) == 0) {
				BaladocApiNode* _tmp13_;
				BaladocApiParameter* _tmp14_;
				_tmp13_ = param;
				_tmp14_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, BALADOC_API_TYPE_PARAMETER, BaladocApiParameter));
				result = _tmp14_;
				_g_object_unref0 (param);
				_bala_iterable_unref0 (_param_list);
				_bala_iterable_unref0 (parameters);
				return result;
			}
			_g_object_unref0 (param);
		}
		_bala_iterable_unref0 (_param_list);
	}
	result = NULL;
	_bala_iterable_unref0 (parameters);
	return result;
}

static inline gchar*
baladoc_importer_gir_documentation_importer_get_cparameter_name (BaladocImporterGirDocumentationImporter* self,
                                                                 gchar** param_names,
                                                                 gint param_names_length1,
                                                                 gint length_pos)
{
	gboolean _tmp0_ = FALSE;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	if (length_pos < 0) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = param_names_length1 < length_pos;
	}
	if (_tmp0_) {
		result = NULL;
		return result;
	}
	_tmp1_ = param_names[length_pos];
	_tmp2_ = g_strdup (_tmp1_);
	result = _tmp2_;
	return result;
}

static void
baladoc_importer_gir_documentation_importer_attach_comment (BaladocImporterGirDocumentationImporter* self,
                                                            const gchar* cname,
                                                            BaladocApiGirSourceComment* comment,
                                                            gchar** param_names,
                                                            gint param_names_length1,
                                                            BaladocImporterGirDocumentationImporterImplicitParameterPos* destroy_notifies,
                                                            gint destroy_notifies_length1,
                                                            BaladocImporterGirDocumentationImporterImplicitParameterPos* closures,
                                                            gint closures_length1,
                                                            BaladocImporterGirDocumentationImporterImplicitParameterPos* array_lengths,
                                                            gint array_lengths_length1,
                                                            gint array_length_ret)
{
	BaladocApiNode* node = NULL;
	BaladocApiTree* _tmp0_;
	BaladocApiNode* _tmp1_;
	BaladocApiNode* _tmp2_;
	BaladocContentComment* content = NULL;
	BaladocDocumentationParser* _tmp34_;
	BaladocApiNode* _tmp35_;
	BaladocContentComment* _tmp36_;
	BaladocContentComment* _tmp37_;
	BaladocApiNode* _tmp38_;
	BaladocContentComment* _tmp39_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (cname != NULL);
	if (comment == NULL) {
		return;
	}
	_tmp0_ = ((BaladocImporterDocumentationImporter*) self)->tree;
	_tmp1_ = baladoc_api_tree_search_symbol_cstr (_tmp0_, NULL, cname);
	node = _tmp1_;
	_tmp2_ = node;
	if (_tmp2_ == NULL) {
		_g_object_unref0 (node);
		return;
	}
	if (param_names != NULL) {
		BaladocApiNode* _tmp30_;
		{
			BaladocImporterGirDocumentationImporterImplicitParameterPos* pos_collection = NULL;
			gint pos_collection_length1 = 0;
			gint _pos_collection_size_ = 0;
			gint pos_it = 0;
			pos_collection = destroy_notifies;
			pos_collection_length1 = destroy_notifies_length1;
			for (pos_it = 0; pos_it < pos_collection_length1; pos_it = pos_it + 1) {
				BaladocImporterGirDocumentationImporterImplicitParameterPos pos = {0};
				pos = pos_collection[pos_it];
				{
					BaladocApiParameter* param = NULL;
					BaladocApiNode* _tmp3_;
					BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp4_;
					const gchar* _tmp5_;
					BaladocApiParameter* _tmp6_;
					BaladocApiParameter* _tmp7_;
					BaladocApiParameter* _tmp8_;
					BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp9_;
					gchar* _tmp10_;
					gchar* _tmp11_;
					_tmp3_ = node;
					_tmp4_ = pos;
					_tmp5_ = param_names[_tmp4_.parameter];
					_tmp6_ = baladoc_importer_gir_documentation_importer_find_parameter (self, _tmp3_, _tmp5_);
					param = _tmp6_;
					_tmp7_ = param;
					if (_tmp7_ == NULL) {
						_g_object_unref0 (param);
						continue;
					}
					_tmp8_ = param;
					_tmp9_ = pos;
					_tmp10_ = baladoc_importer_gir_documentation_importer_get_cparameter_name (self, param_names, (gint) param_names_length1, _tmp9_.position);
					_tmp11_ = _tmp10_;
					baladoc_api_parameter_set_implicit_destroy_cparameter_name (_tmp8_, _tmp11_);
					_g_free0 (_tmp11_);
					_g_object_unref0 (param);
				}
			}
		}
		{
			BaladocImporterGirDocumentationImporterImplicitParameterPos* pos_collection = NULL;
			gint pos_collection_length1 = 0;
			gint _pos_collection_size_ = 0;
			gint pos_it = 0;
			pos_collection = closures;
			pos_collection_length1 = closures_length1;
			for (pos_it = 0; pos_it < pos_collection_length1; pos_it = pos_it + 1) {
				BaladocImporterGirDocumentationImporterImplicitParameterPos pos = {0};
				pos = pos_collection[pos_it];
				{
					BaladocApiParameter* param = NULL;
					BaladocApiNode* _tmp12_;
					BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp13_;
					const gchar* _tmp14_;
					BaladocApiParameter* _tmp15_;
					BaladocApiParameter* _tmp16_;
					BaladocApiParameter* _tmp17_;
					BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp18_;
					gchar* _tmp19_;
					gchar* _tmp20_;
					_tmp12_ = node;
					_tmp13_ = pos;
					_tmp14_ = param_names[_tmp13_.parameter];
					_tmp15_ = baladoc_importer_gir_documentation_importer_find_parameter (self, _tmp12_, _tmp14_);
					param = _tmp15_;
					_tmp16_ = param;
					if (_tmp16_ == NULL) {
						_g_object_unref0 (param);
						continue;
					}
					_tmp17_ = param;
					_tmp18_ = pos;
					_tmp19_ = baladoc_importer_gir_documentation_importer_get_cparameter_name (self, param_names, (gint) param_names_length1, _tmp18_.position);
					_tmp20_ = _tmp19_;
					baladoc_api_parameter_set_implicit_closure_cparameter_name (_tmp17_, _tmp20_);
					_g_free0 (_tmp20_);
					_g_object_unref0 (param);
				}
			}
		}
		{
			BaladocImporterGirDocumentationImporterImplicitParameterPos* pos_collection = NULL;
			gint pos_collection_length1 = 0;
			gint _pos_collection_size_ = 0;
			gint pos_it = 0;
			pos_collection = array_lengths;
			pos_collection_length1 = array_lengths_length1;
			for (pos_it = 0; pos_it < pos_collection_length1; pos_it = pos_it + 1) {
				BaladocImporterGirDocumentationImporterImplicitParameterPos pos = {0};
				pos = pos_collection[pos_it];
				{
					BaladocApiParameter* param = NULL;
					BaladocApiNode* _tmp21_;
					BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp22_;
					const gchar* _tmp23_;
					BaladocApiParameter* _tmp24_;
					BaladocApiParameter* _tmp25_;
					BaladocApiParameter* _tmp26_;
					BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp27_;
					gchar* _tmp28_;
					gchar* _tmp29_;
					_tmp21_ = node;
					_tmp22_ = pos;
					_tmp23_ = param_names[_tmp22_.parameter];
					_tmp24_ = baladoc_importer_gir_documentation_importer_find_parameter (self, _tmp21_, _tmp23_);
					param = _tmp24_;
					_tmp25_ = param;
					if (_tmp25_ == NULL) {
						_g_object_unref0 (param);
						continue;
					}
					_tmp26_ = param;
					_tmp27_ = pos;
					_tmp28_ = baladoc_importer_gir_documentation_importer_get_cparameter_name (self, param_names, (gint) param_names_length1, _tmp27_.position);
					_tmp29_ = _tmp28_;
					baladoc_api_parameter_set_implicit_array_length_cparameter_name (_tmp26_, _tmp29_);
					_g_free0 (_tmp29_);
					_g_object_unref0 (param);
				}
			}
		}
		_tmp30_ = node;
		if (BALADOC_API_IS_CALLABLE (_tmp30_)) {
			BaladocApiNode* _tmp31_;
			gchar* _tmp32_;
			gchar* _tmp33_;
			_tmp31_ = node;
			_tmp32_ = baladoc_importer_gir_documentation_importer_get_cparameter_name (self, param_names, (gint) param_names_length1, array_length_ret);
			_tmp33_ = _tmp32_;
			baladoc_api_callable_set_implicit_array_length_cparameter_name (G_TYPE_CHECK_INSTANCE_CAST (_tmp31_, BALADOC_API_TYPE_CALLABLE, BaladocApiCallable), _tmp33_);
			_g_free0 (_tmp33_);
		}
	}
	_tmp34_ = self->priv->parser;
	_tmp35_ = node;
	_tmp36_ = baladoc_documentation_parser_parse (_tmp34_, _tmp35_, (BaladocApiSourceComment*) comment);
	content = _tmp36_;
	_tmp37_ = content;
	if (_tmp37_ == NULL) {
		_g_object_unref0 (content);
		_g_object_unref0 (node);
		return;
	}
	_tmp38_ = node;
	_tmp39_ = content;
	baladoc_api_node_set_documentation (_tmp38_, _tmp39_);
	_g_object_unref0 (content);
	_g_object_unref0 (node);
}

static void
baladoc_importer_gir_documentation_importer_warning (BaladocImporterGirDocumentationImporter* self,
                                                     const gchar* message)
{
	BaladocApiSourceFile* _tmp0_;
	BalaSourceFile* _tmp1_;
	BalaSourceFile* _tmp2_;
	BalaSourceLocation _tmp3_;
	BalaSourceLocation _tmp4_;
	BalaSourceReference* _tmp5_;
	BalaSourceReference* _tmp6_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (message != NULL);
	_tmp0_ = self->priv->file;
	_tmp1_ = baladoc_api_source_file_get_data (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = self->priv->begin;
	_tmp4_ = self->priv->end;
	_tmp5_ = bala_source_reference_new (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, BALA_TYPE_SOURCE_FILE, BalaSourceFile), &_tmp3_, &_tmp4_);
	_tmp6_ = _tmp5_;
	bala_report_warning (_tmp6_, message);
	_bala_source_reference_unref0 (_tmp6_);
}

static void
baladoc_importer_gir_documentation_importer_error (BaladocImporterGirDocumentationImporter* self,
                                                   const gchar* message)
{
	BaladocApiSourceFile* _tmp0_;
	BalaSourceFile* _tmp1_;
	BalaSourceFile* _tmp2_;
	BalaSourceLocation _tmp3_;
	BalaSourceLocation _tmp4_;
	BalaSourceReference* _tmp5_;
	BalaSourceReference* _tmp6_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (message != NULL);
	_tmp0_ = self->priv->file;
	_tmp1_ = baladoc_api_source_file_get_data (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = self->priv->begin;
	_tmp4_ = self->priv->end;
	_tmp5_ = bala_source_reference_new (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, BALA_TYPE_SOURCE_FILE, BalaSourceFile), &_tmp3_, &_tmp4_);
	_tmp6_ = _tmp5_;
	bala_report_error (_tmp6_, message);
	_bala_source_reference_unref0 (_tmp6_);
}

static void
baladoc_importer_gir_documentation_importer_next (BaladocImporterGirDocumentationImporter* self)
{
	BalaMarkupReader* _tmp0_;
	BalaSourceLocation _tmp1_ = {0};
	BalaSourceLocation _tmp2_ = {0};
	BalaMarkupTokenType _tmp3_;
	gboolean _tmp4_ = FALSE;
	BalaMarkupTokenType _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->reader;
	_tmp3_ = bala_markup_reader_read_token (_tmp0_, &_tmp1_, &_tmp2_);
	self->priv->begin = _tmp1_;
	self->priv->end = _tmp2_;
	self->priv->current_token = _tmp3_;
	_tmp5_ = self->priv->current_token;
	if (_tmp5_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT) {
		BalaMarkupReader* _tmp6_;
		const gchar* _tmp7_;
		const gchar* _tmp8_;
		_tmp6_ = self->priv->reader;
		_tmp7_ = bala_markup_reader_get_name (_tmp6_);
		_tmp8_ = _tmp7_;
		_tmp4_ = g_strcmp0 (_tmp8_, "annotation") == 0;
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		baladoc_importer_gir_documentation_importer_next (self);
		baladoc_importer_gir_documentation_importer_next (self);
	}
}

static void
baladoc_importer_gir_documentation_importer_start_element (BaladocImporterGirDocumentationImporter* self,
                                                           const gchar* name)
{
	gboolean _tmp0_ = FALSE;
	BalaMarkupTokenType _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (name != NULL);
	_tmp1_ = self->priv->current_token;
	if (_tmp1_ != BALA_MARKUP_TOKEN_TYPE_START_ELEMENT) {
		_tmp0_ = TRUE;
	} else {
		BalaMarkupReader* _tmp2_;
		const gchar* _tmp3_;
		const gchar* _tmp4_;
		_tmp2_ = self->priv->reader;
		_tmp3_ = bala_markup_reader_get_name (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp0_ = g_strcmp0 (_tmp4_, name) != 0;
	}
	if (_tmp0_) {
		gchar* _tmp5_;
		gchar* _tmp6_;
		_tmp5_ = g_strdup_printf ("expected start element of `%s'", name);
		_tmp6_ = _tmp5_;
		baladoc_importer_gir_documentation_importer_error (self, _tmp6_);
		_g_free0 (_tmp6_);
	}
}

static void
baladoc_importer_gir_documentation_importer_end_element (BaladocImporterGirDocumentationImporter* self,
                                                         const gchar* name)
{
	gboolean _tmp0_ = FALSE;
	BalaMarkupTokenType _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (name != NULL);
	_tmp1_ = self->priv->current_token;
	if (_tmp1_ != BALA_MARKUP_TOKEN_TYPE_END_ELEMENT) {
		_tmp0_ = TRUE;
	} else {
		BalaMarkupReader* _tmp2_;
		const gchar* _tmp3_;
		const gchar* _tmp4_;
		_tmp2_ = self->priv->reader;
		_tmp3_ = bala_markup_reader_get_name (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp0_ = g_strcmp0 (_tmp4_, name) != 0;
	}
	if (_tmp0_) {
		gchar* _tmp5_;
		gchar* _tmp6_;
		_tmp5_ = g_strdup_printf ("expected end element of `%s'", name);
		_tmp6_ = _tmp5_;
		baladoc_importer_gir_documentation_importer_error (self, _tmp6_);
		_g_free0 (_tmp6_);
	}
	baladoc_importer_gir_documentation_importer_next (self);
}

static void
baladoc_importer_gir_documentation_importer_parse_repository (BaladocImporterGirDocumentationImporter* self)
{
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gboolean _tmp3_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "repository");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "version");
	_tmp2_ = _tmp1_;
	_tmp3_ = g_strcmp0 (_tmp2_, BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_GIR_VERSION) != 0;
	_g_free0 (_tmp2_);
	if (_tmp3_) {
		BalaMarkupReader* _tmp4_;
		gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		_tmp4_ = self->priv->reader;
		_tmp5_ = bala_markup_reader_get_attribute (_tmp4_, "version");
		_tmp6_ = _tmp5_;
		_tmp7_ = g_strdup_printf ("unsupported GIR version %s (supported: %s)", _tmp6_, BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_GIR_VERSION);
		_tmp8_ = _tmp7_;
		baladoc_importer_gir_documentation_importer_error (self, _tmp8_);
		_g_free0 (_tmp8_);
		_g_free0 (_tmp6_);
		return;
	}
	baladoc_importer_gir_documentation_importer_next (self);
	while (TRUE) {
		BalaMarkupTokenType _tmp9_;
		BalaMarkupReader* _tmp10_;
		const gchar* _tmp11_;
		const gchar* _tmp12_;
		_tmp9_ = self->priv->current_token;
		if (!(_tmp9_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp10_ = self->priv->reader;
		_tmp11_ = bala_markup_reader_get_name (_tmp10_);
		_tmp12_ = _tmp11_;
		if (g_strcmp0 (_tmp12_, "namespace") == 0) {
			baladoc_importer_gir_documentation_importer_parse_namespace (self);
		} else {
			BalaMarkupReader* _tmp13_;
			const gchar* _tmp14_;
			const gchar* _tmp15_;
			_tmp13_ = self->priv->reader;
			_tmp14_ = bala_markup_reader_get_name (_tmp13_);
			_tmp15_ = _tmp14_;
			if (g_strcmp0 (_tmp15_, "include") == 0) {
				baladoc_importer_gir_documentation_importer_parse_include (self);
			} else {
				BalaMarkupReader* _tmp16_;
				const gchar* _tmp17_;
				const gchar* _tmp18_;
				_tmp16_ = self->priv->reader;
				_tmp17_ = bala_markup_reader_get_name (_tmp16_);
				_tmp18_ = _tmp17_;
				if (g_strcmp0 (_tmp18_, "package") == 0) {
					baladoc_importer_gir_documentation_importer_parse_package (self);
				} else {
					BalaMarkupReader* _tmp19_;
					const gchar* _tmp20_;
					const gchar* _tmp21_;
					_tmp19_ = self->priv->reader;
					_tmp20_ = bala_markup_reader_get_name (_tmp19_);
					_tmp21_ = _tmp20_;
					if (g_strcmp0 (_tmp21_, "c:include") == 0) {
						baladoc_importer_gir_documentation_importer_parse_c_include (self);
					} else {
						BalaMarkupReader* _tmp22_;
						const gchar* _tmp23_;
						const gchar* _tmp24_;
						gchar* _tmp25_;
						gchar* _tmp26_;
						_tmp22_ = self->priv->reader;
						_tmp23_ = bala_markup_reader_get_name (_tmp22_);
						_tmp24_ = _tmp23_;
						_tmp25_ = g_strdup_printf ("unknown child element `%s' in `repository'", _tmp24_);
						_tmp26_ = _tmp25_;
						baladoc_importer_gir_documentation_importer_error (self, _tmp26_);
						_g_free0 (_tmp26_);
						baladoc_importer_gir_documentation_importer_skip_element (self);
					}
				}
			}
		}
	}
	baladoc_importer_gir_documentation_importer_end_element (self, "repository");
}

static void
baladoc_importer_gir_documentation_importer_parse_include (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "include");
	baladoc_importer_gir_documentation_importer_next (self);
	baladoc_importer_gir_documentation_importer_end_element (self, "include");
}

static void
baladoc_importer_gir_documentation_importer_parse_package (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "package");
	baladoc_importer_gir_documentation_importer_next (self);
	baladoc_importer_gir_documentation_importer_end_element (self, "package");
}

static void
baladoc_importer_gir_documentation_importer_parse_c_include (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "c:include");
	baladoc_importer_gir_documentation_importer_next (self);
	baladoc_importer_gir_documentation_importer_end_element (self, "c:include");
}

static void
baladoc_importer_gir_documentation_importer_skip_element (BaladocImporterGirDocumentationImporter* self)
{
	gint level = 0;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_next (self);
	level = 1;
	while (TRUE) {
		BalaMarkupTokenType _tmp0_;
		if (!(level > 0)) {
			break;
		}
		_tmp0_ = self->priv->current_token;
		if (_tmp0_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT) {
			gint _tmp1_;
			_tmp1_ = level;
			level = _tmp1_ + 1;
		} else {
			BalaMarkupTokenType _tmp2_;
			_tmp2_ = self->priv->current_token;
			if (_tmp2_ == BALA_MARKUP_TOKEN_TYPE_END_ELEMENT) {
				gint _tmp3_;
				_tmp3_ = level;
				level = _tmp3_ - 1;
			} else {
				BalaMarkupTokenType _tmp4_;
				_tmp4_ = self->priv->current_token;
				if (_tmp4_ == BALA_MARKUP_TOKEN_TYPE_EOF) {
					baladoc_importer_gir_documentation_importer_error (self, "unexpected end of file");
					break;
				}
			}
		}
		baladoc_importer_gir_documentation_importer_next (self);
	}
}

static void
baladoc_importer_gir_documentation_importer_parse_namespace (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "namespace");
	baladoc_importer_gir_documentation_importer_next (self);
	while (TRUE) {
		BalaMarkupTokenType _tmp0_;
		BalaMarkupReader* _tmp1_;
		const gchar* _tmp2_;
		const gchar* _tmp3_;
		_tmp0_ = self->priv->current_token;
		if (!(_tmp0_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp1_ = self->priv->reader;
		_tmp2_ = bala_markup_reader_get_name (_tmp1_);
		_tmp3_ = _tmp2_;
		if (g_strcmp0 (_tmp3_, "alias") == 0) {
			baladoc_importer_gir_documentation_importer_parse_alias (self);
		} else {
			BalaMarkupReader* _tmp4_;
			const gchar* _tmp5_;
			const gchar* _tmp6_;
			_tmp4_ = self->priv->reader;
			_tmp5_ = bala_markup_reader_get_name (_tmp4_);
			_tmp6_ = _tmp5_;
			if (g_strcmp0 (_tmp6_, "enumeration") == 0) {
				baladoc_importer_gir_documentation_importer_parse_enumeration (self, "enumeration");
			} else {
				BalaMarkupReader* _tmp7_;
				const gchar* _tmp8_;
				const gchar* _tmp9_;
				_tmp7_ = self->priv->reader;
				_tmp8_ = bala_markup_reader_get_name (_tmp7_);
				_tmp9_ = _tmp8_;
				if (g_strcmp0 (_tmp9_, "bitfield") == 0) {
					baladoc_importer_gir_documentation_importer_parse_bitfield (self);
				} else {
					BalaMarkupReader* _tmp10_;
					const gchar* _tmp11_;
					const gchar* _tmp12_;
					_tmp10_ = self->priv->reader;
					_tmp11_ = bala_markup_reader_get_name (_tmp10_);
					_tmp12_ = _tmp11_;
					if (g_strcmp0 (_tmp12_, "function") == 0) {
						baladoc_importer_gir_documentation_importer_parse_method (self, "function");
					} else {
						BalaMarkupReader* _tmp13_;
						const gchar* _tmp14_;
						const gchar* _tmp15_;
						_tmp13_ = self->priv->reader;
						_tmp14_ = bala_markup_reader_get_name (_tmp13_);
						_tmp15_ = _tmp14_;
						if (g_strcmp0 (_tmp15_, "function-macro") == 0) {
							baladoc_importer_gir_documentation_importer_skip_element (self);
						} else {
							BalaMarkupReader* _tmp16_;
							const gchar* _tmp17_;
							const gchar* _tmp18_;
							_tmp16_ = self->priv->reader;
							_tmp17_ = bala_markup_reader_get_name (_tmp16_);
							_tmp18_ = _tmp17_;
							if (g_strcmp0 (_tmp18_, "callback") == 0) {
								baladoc_importer_gir_documentation_importer_parse_callback (self);
							} else {
								BalaMarkupReader* _tmp19_;
								const gchar* _tmp20_;
								const gchar* _tmp21_;
								_tmp19_ = self->priv->reader;
								_tmp20_ = bala_markup_reader_get_name (_tmp19_);
								_tmp21_ = _tmp20_;
								if (g_strcmp0 (_tmp21_, "record") == 0) {
									baladoc_importer_gir_documentation_importer_parse_record (self);
								} else {
									BalaMarkupReader* _tmp22_;
									const gchar* _tmp23_;
									const gchar* _tmp24_;
									_tmp22_ = self->priv->reader;
									_tmp23_ = bala_markup_reader_get_name (_tmp22_);
									_tmp24_ = _tmp23_;
									if (g_strcmp0 (_tmp24_, "class") == 0) {
										baladoc_importer_gir_documentation_importer_parse_class (self);
									} else {
										BalaMarkupReader* _tmp25_;
										const gchar* _tmp26_;
										const gchar* _tmp27_;
										_tmp25_ = self->priv->reader;
										_tmp26_ = bala_markup_reader_get_name (_tmp25_);
										_tmp27_ = _tmp26_;
										if (g_strcmp0 (_tmp27_, "interface") == 0) {
											baladoc_importer_gir_documentation_importer_parse_interface (self);
										} else {
											BalaMarkupReader* _tmp28_;
											const gchar* _tmp29_;
											const gchar* _tmp30_;
											_tmp28_ = self->priv->reader;
											_tmp29_ = bala_markup_reader_get_name (_tmp28_);
											_tmp30_ = _tmp29_;
											if (g_strcmp0 (_tmp30_, "glib:boxed") == 0) {
												baladoc_importer_gir_documentation_importer_parse_boxed (self, "glib:boxed");
											} else {
												BalaMarkupReader* _tmp31_;
												const gchar* _tmp32_;
												const gchar* _tmp33_;
												_tmp31_ = self->priv->reader;
												_tmp32_ = bala_markup_reader_get_name (_tmp31_);
												_tmp33_ = _tmp32_;
												if (g_strcmp0 (_tmp33_, "union") == 0) {
													baladoc_importer_gir_documentation_importer_parse_union (self);
												} else {
													BalaMarkupReader* _tmp34_;
													const gchar* _tmp35_;
													const gchar* _tmp36_;
													_tmp34_ = self->priv->reader;
													_tmp35_ = bala_markup_reader_get_name (_tmp34_);
													_tmp36_ = _tmp35_;
													if (g_strcmp0 (_tmp36_, "constant") == 0) {
														baladoc_importer_gir_documentation_importer_parse_constant (self);
													} else {
														BalaMarkupReader* _tmp37_;
														const gchar* _tmp38_;
														const gchar* _tmp39_;
														_tmp37_ = self->priv->reader;
														_tmp38_ = bala_markup_reader_get_name (_tmp37_);
														_tmp39_ = _tmp38_;
														if (g_strcmp0 (_tmp39_, "docsection") == 0) {
															baladoc_importer_gir_documentation_importer_skip_element (self);
														} else {
															BalaMarkupReader* _tmp40_;
															const gchar* _tmp41_;
															const gchar* _tmp42_;
															gchar* _tmp43_;
															gchar* _tmp44_;
															_tmp40_ = self->priv->reader;
															_tmp41_ = bala_markup_reader_get_name (_tmp40_);
															_tmp42_ = _tmp41_;
															_tmp43_ = g_strdup_printf ("unknown child element `%s' in `namespace'", _tmp42_);
															_tmp44_ = _tmp43_;
															baladoc_importer_gir_documentation_importer_error (self, _tmp44_);
															_g_free0 (_tmp44_);
															baladoc_importer_gir_documentation_importer_skip_element (self);
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	baladoc_importer_gir_documentation_importer_end_element (self, "namespace");
}

static void
baladoc_importer_gir_documentation_importer_parse_alias (BaladocImporterGirDocumentationImporter* self)
{
	gchar* c_identifier = NULL;
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp2_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "alias");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:type");
	c_identifier = _tmp1_;
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp2_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp2_;
	baladoc_importer_gir_documentation_importer_attach_comment (self, c_identifier, comment, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	baladoc_importer_gir_documentation_importer_parse_type (self, NULL);
	baladoc_importer_gir_documentation_importer_end_element (self, "alias");
	_baladoc_api_source_comment_unref0 (comment);
	_g_free0 (c_identifier);
}

static BaladocApiGirSourceComment*
baladoc_importer_gir_documentation_importer_parse_symbol_doc (BaladocImporterGirDocumentationImporter* self)
{
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiSourceComment* doc_deprecated = NULL;
	BaladocApiSourceComment* doc_version = NULL;
	BaladocApiSourceComment* doc_stability = NULL;
	BaladocApiGirSourceComment* _tmp32_;
	BaladocApiGirSourceComment* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	comment = NULL;
	doc_deprecated = NULL;
	doc_version = NULL;
	doc_stability = NULL;
	while (TRUE) {
		BalaMarkupTokenType _tmp0_;
		BalaMarkupReader* _tmp1_;
		const gchar* _tmp2_;
		const gchar* _tmp3_;
		_tmp0_ = self->priv->current_token;
		if (!(_tmp0_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp1_ = self->priv->reader;
		_tmp2_ = bala_markup_reader_get_name (_tmp1_);
		_tmp3_ = _tmp2_;
		if (g_strcmp0 (_tmp3_, "doc") == 0) {
			BalaMarkupTokenType _tmp4_;
			baladoc_importer_gir_documentation_importer_start_element (self, "doc");
			baladoc_importer_gir_documentation_importer_next (self);
			_tmp4_ = self->priv->current_token;
			if (_tmp4_ == BALA_MARKUP_TOKEN_TYPE_TEXT) {
				BalaMarkupReader* _tmp5_;
				const gchar* _tmp6_;
				const gchar* _tmp7_;
				BaladocApiSourceFile* _tmp8_;
				BalaSourceLocation _tmp9_;
				BalaSourceLocation _tmp10_;
				BalaSourceLocation _tmp11_;
				BalaSourceLocation _tmp12_;
				BaladocApiGirSourceComment* _tmp13_;
				_tmp5_ = self->priv->reader;
				_tmp6_ = bala_markup_reader_get_content (_tmp5_);
				_tmp7_ = _tmp6_;
				_tmp8_ = self->priv->file;
				_tmp9_ = self->priv->begin;
				_tmp10_ = self->priv->begin;
				_tmp11_ = self->priv->end;
				_tmp12_ = self->priv->end;
				_tmp13_ = baladoc_api_gir_source_comment_new (_tmp7_, _tmp8_, _tmp9_.line, _tmp10_.column, _tmp11_.line, _tmp12_.column);
				_baladoc_api_source_comment_unref0 (comment);
				comment = _tmp13_;
				baladoc_importer_gir_documentation_importer_next (self);
			}
			baladoc_importer_gir_documentation_importer_end_element (self, "doc");
		} else {
			BalaMarkupReader* _tmp14_;
			const gchar* _tmp15_;
			const gchar* _tmp16_;
			_tmp14_ = self->priv->reader;
			_tmp15_ = bala_markup_reader_get_name (_tmp14_);
			_tmp16_ = _tmp15_;
			if (g_strcmp0 (_tmp16_, "doc-deprecated") == 0) {
				BaladocApiSourceComment* _tmp17_;
				_tmp17_ = baladoc_importer_gir_documentation_importer_parse_doc (self, "doc-deprecated");
				_baladoc_api_source_comment_unref0 (doc_deprecated);
				doc_deprecated = _tmp17_;
			} else {
				BalaMarkupReader* _tmp18_;
				const gchar* _tmp19_;
				const gchar* _tmp20_;
				_tmp18_ = self->priv->reader;
				_tmp19_ = bala_markup_reader_get_name (_tmp18_);
				_tmp20_ = _tmp19_;
				if (g_strcmp0 (_tmp20_, "doc-version") == 0) {
					BaladocApiSourceComment* _tmp21_;
					_tmp21_ = baladoc_importer_gir_documentation_importer_parse_doc (self, "doc-version");
					_baladoc_api_source_comment_unref0 (doc_version);
					doc_version = _tmp21_;
				} else {
					BalaMarkupReader* _tmp22_;
					const gchar* _tmp23_;
					const gchar* _tmp24_;
					_tmp22_ = self->priv->reader;
					_tmp23_ = bala_markup_reader_get_name (_tmp22_);
					_tmp24_ = _tmp23_;
					if (g_strcmp0 (_tmp24_, "doc-stability") == 0) {
						BaladocApiSourceComment* _tmp25_;
						_tmp25_ = baladoc_importer_gir_documentation_importer_parse_doc (self, "doc-stability");
						_baladoc_api_source_comment_unref0 (doc_stability);
						doc_stability = _tmp25_;
					} else {
						BalaMarkupReader* _tmp26_;
						const gchar* _tmp27_;
						const gchar* _tmp28_;
						_tmp26_ = self->priv->reader;
						_tmp27_ = bala_markup_reader_get_name (_tmp26_);
						_tmp28_ = _tmp27_;
						if (g_strcmp0 (_tmp28_, "source-position") == 0) {
							baladoc_importer_gir_documentation_importer_skip_element (self);
						} else {
							BalaMarkupReader* _tmp29_;
							const gchar* _tmp30_;
							const gchar* _tmp31_;
							_tmp29_ = self->priv->reader;
							_tmp30_ = bala_markup_reader_get_name (_tmp29_);
							_tmp31_ = _tmp30_;
							if (g_strcmp0 (_tmp31_, "attribute") == 0) {
								baladoc_importer_gir_documentation_importer_skip_element (self);
							} else {
								break;
							}
						}
					}
				}
			}
		}
	}
	_tmp32_ = comment;
	if (_tmp32_ != NULL) {
		BaladocApiGirSourceComment* _tmp33_;
		BaladocApiSourceComment* _tmp34_;
		BaladocApiGirSourceComment* _tmp35_;
		BaladocApiSourceComment* _tmp36_;
		BaladocApiGirSourceComment* _tmp37_;
		BaladocApiSourceComment* _tmp38_;
		_tmp33_ = comment;
		_tmp34_ = doc_deprecated;
		baladoc_api_gir_source_comment_set_deprecated_comment (_tmp33_, _tmp34_);
		_tmp35_ = comment;
		_tmp36_ = doc_version;
		baladoc_api_gir_source_comment_set_version_comment (_tmp35_, _tmp36_);
		_tmp37_ = comment;
		_tmp38_ = doc_stability;
		baladoc_api_gir_source_comment_set_stability_comment (_tmp37_, _tmp38_);
	}
	result = comment;
	_baladoc_api_source_comment_unref0 (doc_stability);
	_baladoc_api_source_comment_unref0 (doc_version);
	_baladoc_api_source_comment_unref0 (doc_deprecated);
	return result;
}

static BaladocApiSourceComment*
baladoc_importer_gir_documentation_importer_parse_doc (BaladocImporterGirDocumentationImporter* self,
                                                       const gchar* element_name)
{
	BalaMarkupReader* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	BaladocApiSourceComment* comment = NULL;
	BalaMarkupTokenType _tmp3_;
	BaladocApiSourceComment* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (element_name != NULL, NULL);
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_name (_tmp0_);
	_tmp2_ = _tmp1_;
	if (g_strcmp0 (_tmp2_, element_name) != 0) {
		result = NULL;
		return result;
	}
	baladoc_importer_gir_documentation_importer_start_element (self, element_name);
	baladoc_importer_gir_documentation_importer_next (self);
	comment = NULL;
	_tmp3_ = self->priv->current_token;
	if (_tmp3_ == BALA_MARKUP_TOKEN_TYPE_TEXT) {
		BalaMarkupReader* _tmp4_;
		const gchar* _tmp5_;
		const gchar* _tmp6_;
		BaladocApiSourceFile* _tmp7_;
		BalaSourceLocation _tmp8_;
		BalaSourceLocation _tmp9_;
		BalaSourceLocation _tmp10_;
		BalaSourceLocation _tmp11_;
		BaladocApiSourceComment* _tmp12_;
		_tmp4_ = self->priv->reader;
		_tmp5_ = bala_markup_reader_get_content (_tmp4_);
		_tmp6_ = _tmp5_;
		_tmp7_ = self->priv->file;
		_tmp8_ = self->priv->begin;
		_tmp9_ = self->priv->begin;
		_tmp10_ = self->priv->end;
		_tmp11_ = self->priv->end;
		_tmp12_ = baladoc_api_source_comment_new (_tmp6_, _tmp7_, _tmp8_.line, _tmp9_.column, _tmp10_.line, _tmp11_.column);
		_baladoc_api_source_comment_unref0 (comment);
		comment = _tmp12_;
		baladoc_importer_gir_documentation_importer_next (self);
	}
	baladoc_importer_gir_documentation_importer_end_element (self, element_name);
	result = comment;
	return result;
}

static void
baladoc_importer_gir_documentation_importer_parse_enumeration (BaladocImporterGirDocumentationImporter* self,
                                                               const gchar* element_name)
{
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp2_;
	const gchar* _tmp3_;
	BaladocApiGirSourceComment* _tmp4_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (element_name != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, element_name);
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:type");
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = _tmp1_;
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp2_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp2_;
	_tmp3_ = self->priv->parent_c_identifier;
	_tmp4_ = comment;
	baladoc_importer_gir_documentation_importer_attach_comment (self, _tmp3_, _tmp4_, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	while (TRUE) {
		BalaMarkupTokenType _tmp5_;
		BalaMarkupReader* _tmp6_;
		const gchar* _tmp7_;
		const gchar* _tmp8_;
		_tmp5_ = self->priv->current_token;
		if (!(_tmp5_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp6_ = self->priv->reader;
		_tmp7_ = bala_markup_reader_get_name (_tmp6_);
		_tmp8_ = _tmp7_;
		if (g_strcmp0 (_tmp8_, "member") == 0) {
			baladoc_importer_gir_documentation_importer_parse_enumeration_member (self);
		} else {
			BalaMarkupReader* _tmp9_;
			const gchar* _tmp10_;
			const gchar* _tmp11_;
			_tmp9_ = self->priv->reader;
			_tmp10_ = bala_markup_reader_get_name (_tmp9_);
			_tmp11_ = _tmp10_;
			if (g_strcmp0 (_tmp11_, "function") == 0) {
				baladoc_importer_gir_documentation_importer_skip_element (self);
			} else {
				BalaMarkupReader* _tmp12_;
				const gchar* _tmp13_;
				const gchar* _tmp14_;
				gchar* _tmp15_;
				gchar* _tmp16_;
				_tmp12_ = self->priv->reader;
				_tmp13_ = bala_markup_reader_get_name (_tmp12_);
				_tmp14_ = _tmp13_;
				_tmp15_ = g_strdup_printf ("unknown child element `%s' in `%s'", _tmp14_, element_name);
				_tmp16_ = _tmp15_;
				baladoc_importer_gir_documentation_importer_error (self, _tmp16_);
				_g_free0 (_tmp16_);
				baladoc_importer_gir_documentation_importer_skip_element (self);
			}
		}
	}
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = NULL;
	baladoc_importer_gir_documentation_importer_end_element (self, element_name);
	_baladoc_api_source_comment_unref0 (comment);
}

static void
baladoc_importer_gir_documentation_importer_parse_bitfield (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_parse_enumeration (self, "bitfield");
}

static void
baladoc_importer_gir_documentation_importer_parse_enumeration_member (BaladocImporterGirDocumentationImporter* self)
{
	gchar* c_identifier = NULL;
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp2_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "member");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:identifier");
	c_identifier = _tmp1_;
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp2_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp2_;
	baladoc_importer_gir_documentation_importer_attach_comment (self, c_identifier, comment, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	baladoc_importer_gir_documentation_importer_end_element (self, "member");
	_baladoc_api_source_comment_unref0 (comment);
	_g_free0 (c_identifier);
}

static void
baladoc_importer_gir_documentation_importer_parse_return_value (BaladocImporterGirDocumentationImporter* self,
                                                                BaladocApiSourceComment* * comment,
                                                                gint* array_length_ret)
{
	BaladocApiSourceComment* _bala_comment = NULL;
	gint _bala_array_length_ret = 0;
	BaladocApiGirSourceComment* _tmp0_;
	gint _tmp1_ = 0;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "return-value");
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp0_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	_baladoc_api_source_comment_unref0 (_bala_comment);
	_bala_comment = (BaladocApiSourceComment*) _tmp0_;
	baladoc_importer_gir_documentation_importer_parse_type (self, &_tmp1_);
	_bala_array_length_ret = _tmp1_;
	baladoc_importer_gir_documentation_importer_end_element (self, "return-value");
	if (comment) {
		*comment = _bala_comment;
	} else {
		_baladoc_api_source_comment_unref0 (_bala_comment);
	}
	if (array_length_ret) {
		*array_length_ret = _bala_array_length_ret;
	}
}

static void
baladoc_importer_gir_documentation_importer_parse_parameter (BaladocImporterGirDocumentationImporter* self,
                                                             BaladocApiSourceComment* * comment,
                                                             gchar* * param_name,
                                                             gint* destroy_pos,
                                                             gint* closure_pos,
                                                             gint* array_length_pos)
{
	BaladocApiSourceComment* _bala_comment = NULL;
	gchar* _bala_param_name = NULL;
	gint _bala_destroy_pos = 0;
	gint _bala_closure_pos = 0;
	gint _bala_array_length_pos = 0;
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	gchar* closure = NULL;
	BalaMarkupReader* _tmp2_;
	gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* destroy = NULL;
	BalaMarkupReader* _tmp6_;
	gchar* _tmp7_;
	const gchar* _tmp8_;
	BaladocApiGirSourceComment* _tmp10_;
	BalaMarkupReader* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "parameter");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "name");
	_g_free0 (_bala_param_name);
	_bala_param_name = _tmp1_;
	_bala_array_length_pos = -1;
	_bala_destroy_pos = -1;
	_bala_closure_pos = -1;
	_tmp2_ = self->priv->reader;
	_tmp3_ = bala_markup_reader_get_attribute (_tmp2_, "closure");
	closure = _tmp3_;
	_tmp4_ = closure;
	if (_tmp4_ != NULL) {
		const gchar* _tmp5_;
		_tmp5_ = closure;
		_bala_closure_pos = atoi (_tmp5_);
		if (_bala_closure_pos < 0) {
			baladoc_importer_gir_documentation_importer_warning (self, "invalid closure position");
		}
	}
	_tmp6_ = self->priv->reader;
	_tmp7_ = bala_markup_reader_get_attribute (_tmp6_, "destroy");
	destroy = _tmp7_;
	_tmp8_ = destroy;
	if (_tmp8_ != NULL) {
		const gchar* _tmp9_;
		_tmp9_ = destroy;
		_bala_destroy_pos = atoi (_tmp9_);
		if (_bala_destroy_pos < 0) {
			baladoc_importer_gir_documentation_importer_warning (self, "invalid destroy position");
		}
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp10_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	_baladoc_api_source_comment_unref0 (_bala_comment);
	_bala_comment = (BaladocApiSourceComment*) _tmp10_;
	_tmp11_ = self->priv->reader;
	_tmp12_ = bala_markup_reader_get_name (_tmp11_);
	_tmp13_ = _tmp12_;
	if (g_strcmp0 (_tmp13_, "varargs") == 0) {
		gchar* _tmp14_;
		baladoc_importer_gir_documentation_importer_start_element (self, "varargs");
		_tmp14_ = g_strdup ("...");
		_g_free0 (_bala_param_name);
		_bala_param_name = _tmp14_;
		baladoc_importer_gir_documentation_importer_next (self);
		baladoc_importer_gir_documentation_importer_end_element (self, "varargs");
	} else {
		gint _tmp15_ = 0;
		baladoc_importer_gir_documentation_importer_parse_type (self, &_tmp15_);
		_bala_array_length_pos = _tmp15_;
	}
	baladoc_importer_gir_documentation_importer_end_element (self, "parameter");
	_g_free0 (destroy);
	_g_free0 (closure);
	if (comment) {
		*comment = _bala_comment;
	} else {
		_baladoc_api_source_comment_unref0 (_bala_comment);
	}
	if (param_name) {
		*param_name = _bala_param_name;
	} else {
		_g_free0 (_bala_param_name);
	}
	if (destroy_pos) {
		*destroy_pos = _bala_destroy_pos;
	}
	if (closure_pos) {
		*closure_pos = _bala_closure_pos;
	}
	if (array_length_pos) {
		*array_length_pos = _bala_array_length_pos;
	}
}

static void
baladoc_importer_gir_documentation_importer_parse_type (BaladocImporterGirDocumentationImporter* self,
                                                        gint* array_length_pos)
{
	gint _bala_array_length_pos = 0;
	BalaMarkupReader* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	g_return_if_fail (self != NULL);
	_bala_array_length_pos = -1;
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_name (_tmp0_);
	_tmp2_ = _tmp1_;
	if (g_strcmp0 (_tmp2_, "array") == 0) {
		gchar* length = NULL;
		BalaMarkupReader* _tmp3_;
		gchar* _tmp4_;
		const gchar* _tmp5_;
		_tmp3_ = self->priv->reader;
		_tmp4_ = bala_markup_reader_get_attribute (_tmp3_, "length");
		length = _tmp4_;
		_tmp5_ = length;
		if (_tmp5_ != NULL) {
			const gchar* _tmp6_;
			_tmp6_ = length;
			_bala_array_length_pos = atoi (_tmp6_);
			if (_bala_array_length_pos < 0) {
				baladoc_importer_gir_documentation_importer_warning (self, "invalid array length position");
			}
		}
		baladoc_importer_gir_documentation_importer_skip_element (self);
		_g_free0 (length);
	} else {
		baladoc_importer_gir_documentation_importer_skip_element (self);
	}
	if (array_length_pos) {
		*array_length_pos = _bala_array_length_pos;
	}
}

static void
baladoc_importer_gir_documentation_importer_parse_record (BaladocImporterGirDocumentationImporter* self)
{
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp5_;
	gboolean is_type_struct = FALSE;
	BalaMarkupReader* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gboolean _tmp9_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp10_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "record");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:type");
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = _tmp1_;
	_tmp2_ = self->priv->parent_c_identifier;
	if (_tmp2_ == NULL) {
		BalaMarkupReader* _tmp3_;
		gchar* _tmp4_;
		_tmp3_ = self->priv->reader;
		_tmp4_ = bala_markup_reader_get_attribute (_tmp3_, "glib:type-name");
		_g_free0 (self->priv->parent_c_identifier);
		self->priv->parent_c_identifier = _tmp4_;
	}
	_tmp5_ = self->priv->parent_c_identifier;
	if (g_str_has_suffix (_tmp5_, "Private")) {
		_g_free0 (self->priv->parent_c_identifier);
		self->priv->parent_c_identifier = NULL;
		baladoc_importer_gir_documentation_importer_skip_element (self);
		return;
	}
	_tmp6_ = self->priv->reader;
	_tmp7_ = bala_markup_reader_get_attribute (_tmp6_, "glib:is-gtype-struct-for");
	_tmp8_ = _tmp7_;
	_tmp9_ = _tmp8_ != NULL;
	_g_free0 (_tmp8_);
	is_type_struct = _tmp9_;
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp10_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp10_;
	if (is_type_struct == FALSE) {
		const gchar* _tmp11_;
		BaladocApiGirSourceComment* _tmp12_;
		_tmp11_ = self->priv->parent_c_identifier;
		_tmp12_ = comment;
		baladoc_importer_gir_documentation_importer_attach_comment (self, _tmp11_, _tmp12_, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	}
	while (TRUE) {
		BalaMarkupTokenType _tmp13_;
		BalaMarkupReader* _tmp14_;
		const gchar* _tmp15_;
		const gchar* _tmp16_;
		_tmp13_ = self->priv->current_token;
		if (!(_tmp13_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp14_ = self->priv->reader;
		_tmp15_ = bala_markup_reader_get_name (_tmp14_);
		_tmp16_ = _tmp15_;
		if (g_strcmp0 (_tmp16_, "field") == 0) {
			baladoc_importer_gir_documentation_importer_parse_field (self);
		} else {
			BalaMarkupReader* _tmp17_;
			const gchar* _tmp18_;
			const gchar* _tmp19_;
			_tmp17_ = self->priv->reader;
			_tmp18_ = bala_markup_reader_get_name (_tmp17_);
			_tmp19_ = _tmp18_;
			if (g_strcmp0 (_tmp19_, "constructor") == 0) {
				baladoc_importer_gir_documentation_importer_parse_constructor (self);
			} else {
				BalaMarkupReader* _tmp20_;
				const gchar* _tmp21_;
				const gchar* _tmp22_;
				_tmp20_ = self->priv->reader;
				_tmp21_ = bala_markup_reader_get_name (_tmp20_);
				_tmp22_ = _tmp21_;
				if (g_strcmp0 (_tmp22_, "method") == 0) {
					baladoc_importer_gir_documentation_importer_parse_method (self, "method");
				} else {
					BalaMarkupReader* _tmp23_;
					const gchar* _tmp24_;
					const gchar* _tmp25_;
					_tmp23_ = self->priv->reader;
					_tmp24_ = bala_markup_reader_get_name (_tmp23_);
					_tmp25_ = _tmp24_;
					if (g_strcmp0 (_tmp25_, "function") == 0) {
						baladoc_importer_gir_documentation_importer_skip_element (self);
					} else {
						BalaMarkupReader* _tmp26_;
						const gchar* _tmp27_;
						const gchar* _tmp28_;
						_tmp26_ = self->priv->reader;
						_tmp27_ = bala_markup_reader_get_name (_tmp26_);
						_tmp28_ = _tmp27_;
						if (g_strcmp0 (_tmp28_, "union") == 0) {
							baladoc_importer_gir_documentation_importer_parse_union (self);
						} else {
							BalaMarkupReader* _tmp29_;
							const gchar* _tmp30_;
							const gchar* _tmp31_;
							gchar* _tmp32_;
							gchar* _tmp33_;
							_tmp29_ = self->priv->reader;
							_tmp30_ = bala_markup_reader_get_name (_tmp29_);
							_tmp31_ = _tmp30_;
							_tmp32_ = g_strdup_printf ("unknown child element `%s' in `record'", _tmp31_);
							_tmp33_ = _tmp32_;
							baladoc_importer_gir_documentation_importer_error (self, _tmp33_);
							_g_free0 (_tmp33_);
							baladoc_importer_gir_documentation_importer_skip_element (self);
						}
					}
				}
			}
		}
	}
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = NULL;
	baladoc_importer_gir_documentation_importer_end_element (self, "record");
	_baladoc_api_source_comment_unref0 (comment);
}

static void
baladoc_importer_gir_documentation_importer_parse_class (BaladocImporterGirDocumentationImporter* self)
{
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp5_;
	const gchar* _tmp6_;
	BaladocApiGirSourceComment* _tmp7_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "class");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:type");
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = _tmp1_;
	_tmp2_ = self->priv->parent_c_identifier;
	if (_tmp2_ == NULL) {
		BalaMarkupReader* _tmp3_;
		gchar* _tmp4_;
		_tmp3_ = self->priv->reader;
		_tmp4_ = bala_markup_reader_get_attribute (_tmp3_, "glib:type-name");
		_g_free0 (self->priv->parent_c_identifier);
		self->priv->parent_c_identifier = _tmp4_;
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp5_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp5_;
	_tmp6_ = self->priv->parent_c_identifier;
	_tmp7_ = comment;
	baladoc_importer_gir_documentation_importer_attach_comment (self, _tmp6_, _tmp7_, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	while (TRUE) {
		BalaMarkupTokenType _tmp8_;
		BalaMarkupReader* _tmp9_;
		const gchar* _tmp10_;
		const gchar* _tmp11_;
		_tmp8_ = self->priv->current_token;
		if (!(_tmp8_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp9_ = self->priv->reader;
		_tmp10_ = bala_markup_reader_get_name (_tmp9_);
		_tmp11_ = _tmp10_;
		if (g_strcmp0 (_tmp11_, "implements") == 0) {
			baladoc_importer_gir_documentation_importer_skip_element (self);
		} else {
			BalaMarkupReader* _tmp12_;
			const gchar* _tmp13_;
			const gchar* _tmp14_;
			_tmp12_ = self->priv->reader;
			_tmp13_ = bala_markup_reader_get_name (_tmp12_);
			_tmp14_ = _tmp13_;
			if (g_strcmp0 (_tmp14_, "constant") == 0) {
				baladoc_importer_gir_documentation_importer_parse_constant (self);
			} else {
				BalaMarkupReader* _tmp15_;
				const gchar* _tmp16_;
				const gchar* _tmp17_;
				_tmp15_ = self->priv->reader;
				_tmp16_ = bala_markup_reader_get_name (_tmp15_);
				_tmp17_ = _tmp16_;
				if (g_strcmp0 (_tmp17_, "field") == 0) {
					baladoc_importer_gir_documentation_importer_parse_field (self);
				} else {
					BalaMarkupReader* _tmp18_;
					const gchar* _tmp19_;
					const gchar* _tmp20_;
					_tmp18_ = self->priv->reader;
					_tmp19_ = bala_markup_reader_get_name (_tmp18_);
					_tmp20_ = _tmp19_;
					if (g_strcmp0 (_tmp20_, "property") == 0) {
						baladoc_importer_gir_documentation_importer_parse_property (self);
					} else {
						BalaMarkupReader* _tmp21_;
						const gchar* _tmp22_;
						const gchar* _tmp23_;
						_tmp21_ = self->priv->reader;
						_tmp22_ = bala_markup_reader_get_name (_tmp21_);
						_tmp23_ = _tmp22_;
						if (g_strcmp0 (_tmp23_, "constructor") == 0) {
							baladoc_importer_gir_documentation_importer_parse_constructor (self);
						} else {
							BalaMarkupReader* _tmp24_;
							const gchar* _tmp25_;
							const gchar* _tmp26_;
							_tmp24_ = self->priv->reader;
							_tmp25_ = bala_markup_reader_get_name (_tmp24_);
							_tmp26_ = _tmp25_;
							if (g_strcmp0 (_tmp26_, "function") == 0) {
								baladoc_importer_gir_documentation_importer_parse_method (self, "function");
							} else {
								BalaMarkupReader* _tmp27_;
								const gchar* _tmp28_;
								const gchar* _tmp29_;
								_tmp27_ = self->priv->reader;
								_tmp28_ = bala_markup_reader_get_name (_tmp27_);
								_tmp29_ = _tmp28_;
								if (g_strcmp0 (_tmp29_, "method") == 0) {
									baladoc_importer_gir_documentation_importer_parse_method (self, "method");
								} else {
									BalaMarkupReader* _tmp30_;
									const gchar* _tmp31_;
									const gchar* _tmp32_;
									_tmp30_ = self->priv->reader;
									_tmp31_ = bala_markup_reader_get_name (_tmp30_);
									_tmp32_ = _tmp31_;
									if (g_strcmp0 (_tmp32_, "virtual-method") == 0) {
										baladoc_importer_gir_documentation_importer_parse_method (self, "virtual-method");
									} else {
										BalaMarkupReader* _tmp33_;
										const gchar* _tmp34_;
										const gchar* _tmp35_;
										_tmp33_ = self->priv->reader;
										_tmp34_ = bala_markup_reader_get_name (_tmp33_);
										_tmp35_ = _tmp34_;
										if (g_strcmp0 (_tmp35_, "union") == 0) {
											baladoc_importer_gir_documentation_importer_parse_union (self);
										} else {
											BalaMarkupReader* _tmp36_;
											const gchar* _tmp37_;
											const gchar* _tmp38_;
											_tmp36_ = self->priv->reader;
											_tmp37_ = bala_markup_reader_get_name (_tmp36_);
											_tmp38_ = _tmp37_;
											if (g_strcmp0 (_tmp38_, "glib:signal") == 0) {
												baladoc_importer_gir_documentation_importer_parse_signal (self);
											} else {
												BalaMarkupReader* _tmp39_;
												const gchar* _tmp40_;
												const gchar* _tmp41_;
												gchar* _tmp42_;
												gchar* _tmp43_;
												_tmp39_ = self->priv->reader;
												_tmp40_ = bala_markup_reader_get_name (_tmp39_);
												_tmp41_ = _tmp40_;
												_tmp42_ = g_strdup_printf ("unknown child element `%s' in `class'", _tmp41_);
												_tmp43_ = _tmp42_;
												baladoc_importer_gir_documentation_importer_error (self, _tmp43_);
												_g_free0 (_tmp43_);
												baladoc_importer_gir_documentation_importer_skip_element (self);
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = NULL;
	baladoc_importer_gir_documentation_importer_end_element (self, "class");
	_baladoc_api_source_comment_unref0 (comment);
}

static void
baladoc_importer_gir_documentation_importer_parse_interface (BaladocImporterGirDocumentationImporter* self)
{
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp5_;
	const gchar* _tmp6_;
	BaladocApiGirSourceComment* _tmp7_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "interface");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:type");
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = _tmp1_;
	_tmp2_ = self->priv->parent_c_identifier;
	if (_tmp2_ == NULL) {
		BalaMarkupReader* _tmp3_;
		gchar* _tmp4_;
		_tmp3_ = self->priv->reader;
		_tmp4_ = bala_markup_reader_get_attribute (_tmp3_, "glib:type-name");
		_g_free0 (self->priv->parent_c_identifier);
		self->priv->parent_c_identifier = _tmp4_;
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp5_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp5_;
	_tmp6_ = self->priv->parent_c_identifier;
	_tmp7_ = comment;
	baladoc_importer_gir_documentation_importer_attach_comment (self, _tmp6_, _tmp7_, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	while (TRUE) {
		BalaMarkupTokenType _tmp8_;
		BalaMarkupReader* _tmp9_;
		const gchar* _tmp10_;
		const gchar* _tmp11_;
		_tmp8_ = self->priv->current_token;
		if (!(_tmp8_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp9_ = self->priv->reader;
		_tmp10_ = bala_markup_reader_get_name (_tmp9_);
		_tmp11_ = _tmp10_;
		if (g_strcmp0 (_tmp11_, "prerequisite") == 0) {
			baladoc_importer_gir_documentation_importer_skip_element (self);
		} else {
			BalaMarkupReader* _tmp12_;
			const gchar* _tmp13_;
			const gchar* _tmp14_;
			_tmp12_ = self->priv->reader;
			_tmp13_ = bala_markup_reader_get_name (_tmp12_);
			_tmp14_ = _tmp13_;
			if (g_strcmp0 (_tmp14_, "field") == 0) {
				baladoc_importer_gir_documentation_importer_parse_field (self);
			} else {
				BalaMarkupReader* _tmp15_;
				const gchar* _tmp16_;
				const gchar* _tmp17_;
				_tmp15_ = self->priv->reader;
				_tmp16_ = bala_markup_reader_get_name (_tmp15_);
				_tmp17_ = _tmp16_;
				if (g_strcmp0 (_tmp17_, "property") == 0) {
					baladoc_importer_gir_documentation_importer_parse_property (self);
				} else {
					BalaMarkupReader* _tmp18_;
					const gchar* _tmp19_;
					const gchar* _tmp20_;
					_tmp18_ = self->priv->reader;
					_tmp19_ = bala_markup_reader_get_name (_tmp18_);
					_tmp20_ = _tmp19_;
					if (g_strcmp0 (_tmp20_, "virtual-method") == 0) {
						baladoc_importer_gir_documentation_importer_parse_method (self, "virtual-method");
					} else {
						BalaMarkupReader* _tmp21_;
						const gchar* _tmp22_;
						const gchar* _tmp23_;
						_tmp21_ = self->priv->reader;
						_tmp22_ = bala_markup_reader_get_name (_tmp21_);
						_tmp23_ = _tmp22_;
						if (g_strcmp0 (_tmp23_, "function") == 0) {
							baladoc_importer_gir_documentation_importer_parse_method (self, "function");
						} else {
							BalaMarkupReader* _tmp24_;
							const gchar* _tmp25_;
							const gchar* _tmp26_;
							_tmp24_ = self->priv->reader;
							_tmp25_ = bala_markup_reader_get_name (_tmp24_);
							_tmp26_ = _tmp25_;
							if (g_strcmp0 (_tmp26_, "method") == 0) {
								baladoc_importer_gir_documentation_importer_parse_method (self, "method");
							} else {
								BalaMarkupReader* _tmp27_;
								const gchar* _tmp28_;
								const gchar* _tmp29_;
								_tmp27_ = self->priv->reader;
								_tmp28_ = bala_markup_reader_get_name (_tmp27_);
								_tmp29_ = _tmp28_;
								if (g_strcmp0 (_tmp29_, "glib:signal") == 0) {
									baladoc_importer_gir_documentation_importer_parse_signal (self);
								} else {
									BalaMarkupReader* _tmp30_;
									const gchar* _tmp31_;
									const gchar* _tmp32_;
									gchar* _tmp33_;
									gchar* _tmp34_;
									_tmp30_ = self->priv->reader;
									_tmp31_ = bala_markup_reader_get_name (_tmp30_);
									_tmp32_ = _tmp31_;
									_tmp33_ = g_strdup_printf ("unknown child element `%s' in `interface'", _tmp32_);
									_tmp34_ = _tmp33_;
									baladoc_importer_gir_documentation_importer_error (self, _tmp34_);
									_g_free0 (_tmp34_);
									baladoc_importer_gir_documentation_importer_skip_element (self);
								}
							}
						}
					}
				}
			}
		}
	}
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = NULL;
	baladoc_importer_gir_documentation_importer_end_element (self, "interface");
	_baladoc_api_source_comment_unref0 (comment);
}

static void
baladoc_importer_gir_documentation_importer_parse_field (BaladocImporterGirDocumentationImporter* self)
{
	gchar* c_identifier = NULL;
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	BaladocApiGirSourceComment* _tmp8_;
	BaladocApiGirSourceComment* _tmp9_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "field");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "name");
	c_identifier = _tmp1_;
	_tmp2_ = self->priv->parent_c_identifier;
	if (_tmp2_ != NULL) {
		const gchar* _tmp3_;
		gchar* _tmp4_;
		gchar* _tmp5_;
		const gchar* _tmp6_;
		gchar* _tmp7_;
		_tmp3_ = self->priv->parent_c_identifier;
		_tmp4_ = g_strconcat (_tmp3_, ".", NULL);
		_tmp5_ = _tmp4_;
		_tmp6_ = c_identifier;
		_tmp7_ = g_strconcat (_tmp5_, _tmp6_, NULL);
		_g_free0 (c_identifier);
		c_identifier = _tmp7_;
		_g_free0 (_tmp5_);
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp8_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	_tmp9_ = _tmp8_;
	_baladoc_api_source_comment_unref0 (_tmp9_);
	baladoc_importer_gir_documentation_importer_parse_type (self, NULL);
	baladoc_importer_gir_documentation_importer_end_element (self, "field");
	_g_free0 (c_identifier);
}

static gchar*
string_replace (const gchar* self,
                const gchar* old,
                const gchar* replacement)
{
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GError* _inner_error0_ = NULL;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (old != NULL, NULL);
	g_return_val_if_fail (replacement != NULL, NULL);
	if ((*((gchar*) self)) == '\0') {
		_tmp1_ = TRUE;
	} else {
		_tmp1_ = (*((gchar*) old)) == '\0';
	}
	if (_tmp1_) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = g_strcmp0 (old, replacement) == 0;
	}
	if (_tmp0_) {
		gchar* _tmp2_;
		_tmp2_ = g_strdup (self);
		result = _tmp2_;
		return result;
	}
	{
		GRegex* regex = NULL;
		gchar* _tmp3_;
		gchar* _tmp4_;
		GRegex* _tmp5_;
		GRegex* _tmp6_;
		gchar* _tmp7_ = NULL;
		GRegex* _tmp8_;
		gchar* _tmp9_;
		gchar* _tmp10_;
		_tmp3_ = g_regex_escape_string (old, -1);
		_tmp4_ = _tmp3_;
		_tmp5_ = g_regex_new (_tmp4_, 0, 0, &_inner_error0_);
		_tmp6_ = _tmp5_;
		_g_free0 (_tmp4_);
		regex = _tmp6_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_free0 (_tmp7_);
			_g_regex_unref0 (regex);
			if (_inner_error0_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return NULL;
		}
		_tmp8_ = regex;
		_tmp9_ = g_regex_replace_literal (_tmp8_, self, (gssize) -1, 0, replacement, 0, &_inner_error0_);
		_tmp7_ = _tmp9_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_free0 (_tmp7_);
			_g_regex_unref0 (regex);
			if (_inner_error0_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return NULL;
		}
		_tmp10_ = _tmp7_;
		_tmp7_ = NULL;
		result = _tmp10_;
		_g_free0 (_tmp7_);
		_g_regex_unref0 (regex);
		return result;
	}
	goto __finally0;
	__catch0_g_regex_error:
	{
		g_clear_error (&_inner_error0_);
		g_assert_not_reached ();
	}
	__finally0:
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
	g_clear_error (&_inner_error0_);
	return NULL;
}

static void
baladoc_importer_gir_documentation_importer_parse_property (BaladocImporterGirDocumentationImporter* self)
{
	gchar* c_identifier = NULL;
	const gchar* _tmp0_;
	BalaMarkupReader* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp8_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "property");
	_tmp0_ = self->priv->parent_c_identifier;
	_tmp1_ = self->priv->reader;
	_tmp2_ = bala_markup_reader_get_attribute (_tmp1_, "name");
	_tmp3_ = _tmp2_;
	_tmp4_ = string_replace (_tmp3_, "-", "_");
	_tmp5_ = _tmp4_;
	_tmp6_ = g_strdup_printf ("%s:%s", _tmp0_, _tmp5_);
	_tmp7_ = _tmp6_;
	_g_free0 (_tmp5_);
	_g_free0 (_tmp3_);
	c_identifier = _tmp7_;
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp8_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp8_;
	baladoc_importer_gir_documentation_importer_attach_comment (self, c_identifier, comment, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	baladoc_importer_gir_documentation_importer_parse_type (self, NULL);
	baladoc_importer_gir_documentation_importer_end_element (self, "property");
	_baladoc_api_source_comment_unref0 (comment);
	_g_free0 (c_identifier);
}

static void
baladoc_importer_gir_documentation_importer_parse_callback (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_parse_function (self, "callback");
}

static void
baladoc_importer_gir_documentation_importer_parse_constructor (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_parse_function (self, "constructor");
}

static void
_bala_array_add3 (gchar** * array,
                  gint* length,
                  gint* size,
                  gchar* value)
{
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gchar*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}

static void
_bala_array_add4 (BaladocImporterGirDocumentationImporterImplicitParameterPos* * array,
                  gint* length,
                  gint* size,
                  const BaladocImporterGirDocumentationImporterImplicitParameterPos* value)
{
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (BaladocImporterGirDocumentationImporterImplicitParameterPos, *array, *size);
	}
	(*array)[(*length)++] = *value;
}

static void
_bala_array_add5 (BaladocImporterGirDocumentationImporterImplicitParameterPos* * array,
                  gint* length,
                  gint* size,
                  const BaladocImporterGirDocumentationImporterImplicitParameterPos* value)
{
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (BaladocImporterGirDocumentationImporterImplicitParameterPos, *array, *size);
	}
	(*array)[(*length)++] = *value;
}

static void
_bala_array_add6 (BaladocImporterGirDocumentationImporterImplicitParameterPos* * array,
                  gint* length,
                  gint* size,
                  const BaladocImporterGirDocumentationImporterImplicitParameterPos* value)
{
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (BaladocImporterGirDocumentationImporterImplicitParameterPos, *array, *size);
	}
	(*array)[(*length)++] = *value;
}

static void
baladoc_importer_gir_documentation_importer_parse_function (BaladocImporterGirDocumentationImporter* self,
                                                            const gchar* element_name)
{
	gchar* c_identifier = NULL;
	const gchar* _tmp0_;
	GQuark _tmp2_ = 0U;
	static GQuark _tmp1_label0 = 0;
	static GQuark _tmp1_label1 = 0;
	static GQuark _tmp1_label2 = 0;
	static GQuark _tmp1_label3 = 0;
	static GQuark _tmp1_label4 = 0;
	static GQuark _tmp1_label5 = 0;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp24_;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* destroy_notifies = NULL;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* _tmp25_;
	gint destroy_notifies_length1;
	gint _destroy_notifies_size_;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* array_lengths = NULL;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* _tmp26_;
	gint array_lengths_length1;
	gint _array_lengths_size_;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* closures = NULL;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* _tmp27_;
	gint closures_length1;
	gint _closures_size_;
	gchar** param_names = NULL;
	gchar** _tmp28_;
	gint param_names_length1;
	gint _param_names_size_;
	gint array_length_ret = 0;
	gboolean _tmp29_ = FALSE;
	BalaMarkupTokenType _tmp30_;
	gboolean _tmp46_ = FALSE;
	BalaMarkupTokenType _tmp47_;
	const gchar* _tmp99_;
	BaladocApiGirSourceComment* _tmp100_;
	gchar** _tmp101_;
	gint _tmp101__length1;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* _tmp102_;
	gint _tmp102__length1;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* _tmp103_;
	gint _tmp103__length1;
	BaladocImporterGirDocumentationImporterImplicitParameterPos* _tmp104_;
	gint _tmp104__length1;
	g_return_if_fail (self != NULL);
	g_return_if_fail (element_name != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, element_name);
	c_identifier = NULL;
	_tmp0_ = element_name;
	_tmp2_ = (NULL == _tmp0_) ? 0 : g_quark_from_string (_tmp0_);
	if (((_tmp2_ == ((0 != _tmp1_label0) ? _tmp1_label0 : (_tmp1_label0 = g_quark_from_static_string ("constructor")))) || (_tmp2_ == ((0 != _tmp1_label1) ? _tmp1_label1 : (_tmp1_label1 = g_quark_from_static_string ("function"))))) || (_tmp2_ == ((0 != _tmp1_label2) ? _tmp1_label2 : (_tmp1_label2 = g_quark_from_static_string ("method"))))) {
		switch (0) {
			default:
			{
				BalaMarkupReader* _tmp3_;
				gchar* _tmp4_;
				_tmp3_ = self->priv->reader;
				_tmp4_ = bala_markup_reader_get_attribute (_tmp3_, "c:identifier");
				_g_free0 (c_identifier);
				c_identifier = _tmp4_;
				break;
			}
		}
	} else if (_tmp2_ == ((0 != _tmp1_label3) ? _tmp1_label3 : (_tmp1_label3 = g_quark_from_static_string ("callback")))) {
		switch (0) {
			default:
			{
				BalaMarkupReader* _tmp5_;
				gchar* _tmp6_;
				const gchar* _tmp7_;
				_tmp5_ = self->priv->reader;
				_tmp6_ = bala_markup_reader_get_attribute (_tmp5_, "c:type");
				_g_free0 (c_identifier);
				c_identifier = _tmp6_;
				_tmp7_ = c_identifier;
				if (_tmp7_ == NULL) {
					BalaMarkupReader* _tmp8_;
					gchar* _tmp9_;
					_tmp8_ = self->priv->reader;
					_tmp9_ = bala_markup_reader_get_attribute (_tmp8_, "name");
					_g_free0 (c_identifier);
					c_identifier = _tmp9_;
				}
				break;
			}
		}
	} else if (_tmp2_ == ((0 != _tmp1_label4) ? _tmp1_label4 : (_tmp1_label4 = g_quark_from_static_string ("virtual-method")))) {
		switch (0) {
			default:
			{
				const gchar* _tmp10_;
				BalaMarkupReader* _tmp11_;
				gchar* _tmp12_;
				gchar* _tmp13_;
				gchar* _tmp14_;
				gchar* _tmp15_;
				gchar* _tmp16_;
				_tmp10_ = self->priv->parent_c_identifier;
				_tmp11_ = self->priv->reader;
				_tmp12_ = bala_markup_reader_get_attribute (_tmp11_, "name");
				_tmp13_ = _tmp12_;
				_tmp14_ = string_replace (_tmp13_, "-", "_");
				_tmp15_ = _tmp14_;
				_tmp16_ = g_strdup_printf ("%s->%s", _tmp10_, _tmp15_);
				_g_free0 (c_identifier);
				c_identifier = _tmp16_;
				_g_free0 (_tmp15_);
				_g_free0 (_tmp13_);
				break;
			}
		}
	} else if (_tmp2_ == ((0 != _tmp1_label5) ? _tmp1_label5 : (_tmp1_label5 = g_quark_from_static_string ("glib:signal")))) {
		switch (0) {
			default:
			{
				const gchar* _tmp17_;
				BalaMarkupReader* _tmp18_;
				gchar* _tmp19_;
				gchar* _tmp20_;
				gchar* _tmp21_;
				gchar* _tmp22_;
				gchar* _tmp23_;
				_tmp17_ = self->priv->parent_c_identifier;
				_tmp18_ = self->priv->reader;
				_tmp19_ = bala_markup_reader_get_attribute (_tmp18_, "name");
				_tmp20_ = _tmp19_;
				_tmp21_ = string_replace (_tmp20_, "-", "_");
				_tmp22_ = _tmp21_;
				_tmp23_ = g_strdup_printf ("%s::%s", _tmp17_, _tmp22_);
				_g_free0 (c_identifier);
				c_identifier = _tmp23_;
				_g_free0 (_tmp22_);
				_g_free0 (_tmp20_);
				break;
			}
		}
	} else {
		switch (0) {
			default:
			{
				baladoc_importer_gir_documentation_importer_skip_element (self);
				_g_free0 (c_identifier);
				return;
			}
		}
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp24_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp24_;
	_tmp25_ = g_new0 (BaladocImporterGirDocumentationImporterImplicitParameterPos, 0);
	destroy_notifies = _tmp25_;
	destroy_notifies_length1 = 0;
	_destroy_notifies_size_ = destroy_notifies_length1;
	_tmp26_ = g_new0 (BaladocImporterGirDocumentationImporterImplicitParameterPos, 0);
	array_lengths = _tmp26_;
	array_lengths_length1 = 0;
	_array_lengths_size_ = array_lengths_length1;
	_tmp27_ = g_new0 (BaladocImporterGirDocumentationImporterImplicitParameterPos, 0);
	closures = _tmp27_;
	closures_length1 = 0;
	_closures_size_ = closures_length1;
	_tmp28_ = g_new0 (gchar*, 0 + 1);
	param_names = _tmp28_;
	param_names_length1 = 0;
	_param_names_size_ = param_names_length1;
	array_length_ret = -1;
	_tmp30_ = self->priv->current_token;
	if (_tmp30_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT) {
		BalaMarkupReader* _tmp31_;
		const gchar* _tmp32_;
		const gchar* _tmp33_;
		_tmp31_ = self->priv->reader;
		_tmp32_ = bala_markup_reader_get_name (_tmp31_);
		_tmp33_ = _tmp32_;
		_tmp29_ = g_strcmp0 (_tmp33_, "return-value") == 0;
	} else {
		_tmp29_ = FALSE;
	}
	if (_tmp29_) {
		BaladocApiSourceComment* return_comment = NULL;
		BaladocApiSourceComment* _tmp34_ = NULL;
		gint _tmp35_ = 0;
		BaladocApiSourceComment* _tmp36_;
		baladoc_importer_gir_documentation_importer_parse_return_value (self, &_tmp34_, &_tmp35_);
		_baladoc_api_source_comment_unref0 (return_comment);
		return_comment = _tmp34_;
		array_length_ret = _tmp35_;
		_tmp36_ = return_comment;
		if (_tmp36_ != NULL) {
			BaladocApiGirSourceComment* _tmp37_;
			BaladocApiGirSourceComment* _tmp44_;
			BaladocApiSourceComment* _tmp45_;
			_tmp37_ = comment;
			if (_tmp37_ == NULL) {
				BaladocApiSourceFile* _tmp38_;
				BalaSourceLocation _tmp39_;
				BalaSourceLocation _tmp40_;
				BalaSourceLocation _tmp41_;
				BalaSourceLocation _tmp42_;
				BaladocApiGirSourceComment* _tmp43_;
				_tmp38_ = self->priv->file;
				_tmp39_ = self->priv->begin;
				_tmp40_ = self->priv->begin;
				_tmp41_ = self->priv->end;
				_tmp42_ = self->priv->end;
				_tmp43_ = baladoc_api_gir_source_comment_new ("", _tmp38_, _tmp39_.line, _tmp40_.column, _tmp41_.line, _tmp42_.column);
				_baladoc_api_source_comment_unref0 (comment);
				comment = _tmp43_;
			}
			_tmp44_ = comment;
			_tmp45_ = return_comment;
			baladoc_api_gir_source_comment_set_return_comment (_tmp44_, _tmp45_);
		}
		_baladoc_api_source_comment_unref0 (return_comment);
	}
	_tmp47_ = self->priv->current_token;
	if (_tmp47_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT) {
		BalaMarkupReader* _tmp48_;
		const gchar* _tmp49_;
		const gchar* _tmp50_;
		_tmp48_ = self->priv->reader;
		_tmp49_ = bala_markup_reader_get_name (_tmp48_);
		_tmp50_ = _tmp49_;
		_tmp46_ = g_strcmp0 (_tmp50_, "parameters") == 0;
	} else {
		_tmp46_ = FALSE;
	}
	if (_tmp46_) {
		gboolean _tmp51_ = FALSE;
		BalaMarkupTokenType _tmp52_;
		baladoc_importer_gir_documentation_importer_start_element (self, "parameters");
		baladoc_importer_gir_documentation_importer_next (self);
		_tmp52_ = self->priv->current_token;
		if (_tmp52_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT) {
			BalaMarkupReader* _tmp53_;
			const gchar* _tmp54_;
			const gchar* _tmp55_;
			_tmp53_ = self->priv->reader;
			_tmp54_ = bala_markup_reader_get_name (_tmp53_);
			_tmp55_ = _tmp54_;
			_tmp51_ = g_strcmp0 (_tmp55_, "instance-parameter") == 0;
		} else {
			_tmp51_ = FALSE;
		}
		if (_tmp51_) {
			gchar* instance_param_name = NULL;
			BalaMarkupReader* _tmp56_;
			gchar* _tmp57_;
			BaladocApiSourceComment* param_comment = NULL;
			BaladocApiGirSourceComment* _tmp58_;
			BaladocApiSourceComment* _tmp59_;
			_tmp56_ = self->priv->reader;
			_tmp57_ = bala_markup_reader_get_attribute (_tmp56_, "name");
			instance_param_name = _tmp57_;
			baladoc_importer_gir_documentation_importer_next (self);
			_tmp58_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
			param_comment = (BaladocApiSourceComment*) _tmp58_;
			baladoc_importer_gir_documentation_importer_parse_type (self, NULL);
			baladoc_importer_gir_documentation_importer_end_element (self, "instance-parameter");
			_tmp59_ = param_comment;
			if (_tmp59_ != NULL) {
				BaladocApiGirSourceComment* _tmp60_;
				BaladocApiGirSourceComment* _tmp67_;
				const gchar* _tmp68_;
				BaladocApiSourceComment* _tmp69_;
				BaladocApiGirSourceComment* _tmp70_;
				const gchar* _tmp71_;
				_tmp60_ = comment;
				if (_tmp60_ == NULL) {
					BaladocApiSourceFile* _tmp61_;
					BalaSourceLocation _tmp62_;
					BalaSourceLocation _tmp63_;
					BalaSourceLocation _tmp64_;
					BalaSourceLocation _tmp65_;
					BaladocApiGirSourceComment* _tmp66_;
					_tmp61_ = self->priv->file;
					_tmp62_ = self->priv->begin;
					_tmp63_ = self->priv->begin;
					_tmp64_ = self->priv->end;
					_tmp65_ = self->priv->end;
					_tmp66_ = baladoc_api_gir_source_comment_new ("", _tmp61_, _tmp62_.line, _tmp63_.column, _tmp64_.line, _tmp65_.column);
					_baladoc_api_source_comment_unref0 (comment);
					comment = _tmp66_;
				}
				_tmp67_ = comment;
				_tmp68_ = instance_param_name;
				_tmp69_ = param_comment;
				baladoc_api_gir_source_comment_add_parameter_content (_tmp67_, _tmp68_, _tmp69_);
				_tmp70_ = comment;
				_tmp71_ = instance_param_name;
				baladoc_api_gir_source_comment_set_instance_param_name (_tmp70_, _tmp71_);
			}
			_baladoc_api_source_comment_unref0 (param_comment);
			_g_free0 (instance_param_name);
		}
		{
			gint pcount = 0;
			pcount = 0;
			{
				gboolean _tmp72_ = FALSE;
				_tmp72_ = TRUE;
				while (TRUE) {
					BalaMarkupTokenType _tmp74_;
					BaladocApiSourceComment* param_comment = NULL;
					gint array_length_pos = 0;
					gint destroy_pos = 0;
					gint closure_pos = 0;
					gchar* param_name = NULL;
					BaladocApiSourceComment* _tmp75_ = NULL;
					gchar* _tmp76_ = NULL;
					gint _tmp77_ = 0;
					gint _tmp78_ = 0;
					gint _tmp79_ = 0;
					const gchar* _tmp80_;
					gchar* _tmp81_;
					gboolean _tmp82_ = FALSE;
					gboolean _tmp84_ = FALSE;
					gboolean _tmp86_ = FALSE;
					BaladocApiSourceComment* _tmp88_;
					if (!_tmp72_) {
						gint _tmp73_;
						_tmp73_ = pcount;
						pcount = _tmp73_ + 1;
					}
					_tmp72_ = FALSE;
					_tmp74_ = self->priv->current_token;
					if (!(_tmp74_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
						break;
					}
					baladoc_importer_gir_documentation_importer_parse_parameter (self, &_tmp75_, &_tmp76_, &_tmp77_, &_tmp78_, &_tmp79_);
					_baladoc_api_source_comment_unref0 (param_comment);
					param_comment = _tmp75_;
					_g_free0 (param_name);
					param_name = _tmp76_;
					destroy_pos = _tmp77_;
					closure_pos = _tmp78_;
					array_length_pos = _tmp79_;
					_tmp80_ = param_name;
					_tmp81_ = g_strdup (_tmp80_);
					_bala_array_add3 (&param_names, &param_names_length1, &_param_names_size_, _tmp81_);
					if (destroy_pos >= 0) {
						_tmp82_ = pcount != destroy_pos;
					} else {
						_tmp82_ = FALSE;
					}
					if (_tmp82_) {
						BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp83_ = {0};
						baladoc_importer_gir_documentation_importer_implicit_parameter_pos_init (&_tmp83_, pcount, destroy_pos);
						_bala_array_add4 (&destroy_notifies, &destroy_notifies_length1, &_destroy_notifies_size_, &_tmp83_);
					}
					if (closure_pos >= 0) {
						_tmp84_ = pcount != closure_pos;
					} else {
						_tmp84_ = FALSE;
					}
					if (_tmp84_) {
						BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp85_ = {0};
						baladoc_importer_gir_documentation_importer_implicit_parameter_pos_init (&_tmp85_, pcount, closure_pos);
						_bala_array_add5 (&closures, &closures_length1, &_closures_size_, &_tmp85_);
					}
					if (array_length_pos >= 0) {
						_tmp86_ = pcount != destroy_pos;
					} else {
						_tmp86_ = FALSE;
					}
					if (_tmp86_) {
						BaladocImporterGirDocumentationImporterImplicitParameterPos _tmp87_ = {0};
						baladoc_importer_gir_documentation_importer_implicit_parameter_pos_init (&_tmp87_, pcount, array_length_pos);
						_bala_array_add6 (&array_lengths, &array_lengths_length1, &_array_lengths_size_, &_tmp87_);
					}
					_tmp88_ = param_comment;
					if (_tmp88_ != NULL) {
						BaladocApiGirSourceComment* _tmp89_;
						BaladocApiGirSourceComment* _tmp96_;
						const gchar* _tmp97_;
						BaladocApiSourceComment* _tmp98_;
						_tmp89_ = comment;
						if (_tmp89_ == NULL) {
							BaladocApiSourceFile* _tmp90_;
							BalaSourceLocation _tmp91_;
							BalaSourceLocation _tmp92_;
							BalaSourceLocation _tmp93_;
							BalaSourceLocation _tmp94_;
							BaladocApiGirSourceComment* _tmp95_;
							_tmp90_ = self->priv->file;
							_tmp91_ = self->priv->begin;
							_tmp92_ = self->priv->begin;
							_tmp93_ = self->priv->end;
							_tmp94_ = self->priv->end;
							_tmp95_ = baladoc_api_gir_source_comment_new ("", _tmp90_, _tmp91_.line, _tmp92_.column, _tmp93_.line, _tmp94_.column);
							_baladoc_api_source_comment_unref0 (comment);
							comment = _tmp95_;
						}
						_tmp96_ = comment;
						_tmp97_ = param_name;
						_tmp98_ = param_comment;
						baladoc_api_gir_source_comment_add_parameter_content (_tmp96_, _tmp97_, _tmp98_);
					}
					_g_free0 (param_name);
					_baladoc_api_source_comment_unref0 (param_comment);
				}
			}
		}
		baladoc_importer_gir_documentation_importer_end_element (self, "parameters");
	}
	_tmp99_ = c_identifier;
	_tmp100_ = comment;
	_tmp101_ = param_names;
	_tmp101__length1 = param_names_length1;
	_tmp102_ = destroy_notifies;
	_tmp102__length1 = destroy_notifies_length1;
	_tmp103_ = closures;
	_tmp103__length1 = closures_length1;
	_tmp104_ = array_lengths;
	_tmp104__length1 = array_lengths_length1;
	baladoc_importer_gir_documentation_importer_attach_comment (self, _tmp99_, _tmp100_, _tmp101_, (gint) _tmp101__length1, _tmp102_, (gint) _tmp102__length1, _tmp103_, (gint) _tmp103__length1, _tmp104_, (gint) _tmp104__length1, array_length_ret);
	baladoc_importer_gir_documentation_importer_end_element (self, element_name);
	param_names = (_bala_array_free (param_names, param_names_length1, (GDestroyNotify) g_free), NULL);
	closures = (g_free (closures), NULL);
	array_lengths = (g_free (array_lengths), NULL);
	destroy_notifies = (g_free (destroy_notifies), NULL);
	_baladoc_api_source_comment_unref0 (comment);
	_g_free0 (c_identifier);
}

static void
baladoc_importer_gir_documentation_importer_parse_method (BaladocImporterGirDocumentationImporter* self,
                                                          const gchar* element_name)
{
	g_return_if_fail (self != NULL);
	g_return_if_fail (element_name != NULL);
	baladoc_importer_gir_documentation_importer_parse_function (self, element_name);
}

static void
baladoc_importer_gir_documentation_importer_parse_signal (BaladocImporterGirDocumentationImporter* self)
{
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_parse_function (self, "glib:signal");
}

static void
baladoc_importer_gir_documentation_importer_parse_boxed (BaladocImporterGirDocumentationImporter* self,
                                                         const gchar* element_name)
{
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	BaladocApiGirSourceComment* _tmp5_;
	BaladocApiGirSourceComment* _tmp6_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (element_name != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, element_name);
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "name");
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = _tmp1_;
	_tmp2_ = self->priv->parent_c_identifier;
	if (_tmp2_ == NULL) {
		BalaMarkupReader* _tmp3_;
		gchar* _tmp4_;
		_tmp3_ = self->priv->reader;
		_tmp4_ = bala_markup_reader_get_attribute (_tmp3_, "glib:name");
		_g_free0 (self->priv->parent_c_identifier);
		self->priv->parent_c_identifier = _tmp4_;
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp5_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	_tmp6_ = _tmp5_;
	_baladoc_api_source_comment_unref0 (_tmp6_);
	while (TRUE) {
		BalaMarkupTokenType _tmp7_;
		BalaMarkupReader* _tmp8_;
		const gchar* _tmp9_;
		const gchar* _tmp10_;
		_tmp7_ = self->priv->current_token;
		if (!(_tmp7_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp8_ = self->priv->reader;
		_tmp9_ = bala_markup_reader_get_name (_tmp8_);
		_tmp10_ = _tmp9_;
		if (g_strcmp0 (_tmp10_, "field") == 0) {
			baladoc_importer_gir_documentation_importer_parse_field (self);
		} else {
			BalaMarkupReader* _tmp11_;
			const gchar* _tmp12_;
			const gchar* _tmp13_;
			_tmp11_ = self->priv->reader;
			_tmp12_ = bala_markup_reader_get_name (_tmp11_);
			_tmp13_ = _tmp12_;
			if (g_strcmp0 (_tmp13_, "constructor") == 0) {
				baladoc_importer_gir_documentation_importer_parse_constructor (self);
			} else {
				BalaMarkupReader* _tmp14_;
				const gchar* _tmp15_;
				const gchar* _tmp16_;
				_tmp14_ = self->priv->reader;
				_tmp15_ = bala_markup_reader_get_name (_tmp14_);
				_tmp16_ = _tmp15_;
				if (g_strcmp0 (_tmp16_, "method") == 0) {
					baladoc_importer_gir_documentation_importer_parse_method (self, "method");
				} else {
					BalaMarkupReader* _tmp17_;
					const gchar* _tmp18_;
					const gchar* _tmp19_;
					_tmp17_ = self->priv->reader;
					_tmp18_ = bala_markup_reader_get_name (_tmp17_);
					_tmp19_ = _tmp18_;
					if (g_strcmp0 (_tmp19_, "function") == 0) {
						baladoc_importer_gir_documentation_importer_skip_element (self);
					} else {
						BalaMarkupReader* _tmp20_;
						const gchar* _tmp21_;
						const gchar* _tmp22_;
						_tmp20_ = self->priv->reader;
						_tmp21_ = bala_markup_reader_get_name (_tmp20_);
						_tmp22_ = _tmp21_;
						if (g_strcmp0 (_tmp22_, "union") == 0) {
							baladoc_importer_gir_documentation_importer_parse_union (self);
						} else {
							BalaMarkupReader* _tmp23_;
							const gchar* _tmp24_;
							const gchar* _tmp25_;
							gchar* _tmp26_;
							gchar* _tmp27_;
							_tmp23_ = self->priv->reader;
							_tmp24_ = bala_markup_reader_get_name (_tmp23_);
							_tmp25_ = _tmp24_;
							_tmp26_ = g_strdup_printf ("unknown child element `%s' in `class'", _tmp25_);
							_tmp27_ = _tmp26_;
							baladoc_importer_gir_documentation_importer_error (self, _tmp27_);
							_g_free0 (_tmp27_);
							baladoc_importer_gir_documentation_importer_skip_element (self);
						}
					}
				}
			}
		}
	}
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = NULL;
	baladoc_importer_gir_documentation_importer_end_element (self, element_name);
}

static void
baladoc_importer_gir_documentation_importer_parse_union (BaladocImporterGirDocumentationImporter* self)
{
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp3_;
	const gchar* _tmp4_;
	BaladocApiGirSourceComment* _tmp5_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "union");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:type");
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = _tmp1_;
	_tmp2_ = self->priv->parent_c_identifier;
	if (_tmp2_ == NULL) {
		baladoc_importer_gir_documentation_importer_skip_element (self);
		return;
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp3_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp3_;
	_tmp4_ = self->priv->parent_c_identifier;
	_tmp5_ = comment;
	baladoc_importer_gir_documentation_importer_attach_comment (self, _tmp4_, _tmp5_, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	while (TRUE) {
		BalaMarkupTokenType _tmp6_;
		BalaMarkupReader* _tmp7_;
		const gchar* _tmp8_;
		const gchar* _tmp9_;
		_tmp6_ = self->priv->current_token;
		if (!(_tmp6_ == BALA_MARKUP_TOKEN_TYPE_START_ELEMENT)) {
			break;
		}
		_tmp7_ = self->priv->reader;
		_tmp8_ = bala_markup_reader_get_name (_tmp7_);
		_tmp9_ = _tmp8_;
		if (g_strcmp0 (_tmp9_, "field") == 0) {
			baladoc_importer_gir_documentation_importer_parse_field (self);
		} else {
			BalaMarkupReader* _tmp10_;
			const gchar* _tmp11_;
			const gchar* _tmp12_;
			_tmp10_ = self->priv->reader;
			_tmp11_ = bala_markup_reader_get_name (_tmp10_);
			_tmp12_ = _tmp11_;
			if (g_strcmp0 (_tmp12_, "constructor") == 0) {
				baladoc_importer_gir_documentation_importer_parse_constructor (self);
			} else {
				BalaMarkupReader* _tmp13_;
				const gchar* _tmp14_;
				const gchar* _tmp15_;
				_tmp13_ = self->priv->reader;
				_tmp14_ = bala_markup_reader_get_name (_tmp13_);
				_tmp15_ = _tmp14_;
				if (g_strcmp0 (_tmp15_, "method") == 0) {
					baladoc_importer_gir_documentation_importer_parse_method (self, "method");
				} else {
					BalaMarkupReader* _tmp16_;
					const gchar* _tmp17_;
					const gchar* _tmp18_;
					_tmp16_ = self->priv->reader;
					_tmp17_ = bala_markup_reader_get_name (_tmp16_);
					_tmp18_ = _tmp17_;
					if (g_strcmp0 (_tmp18_, "function") == 0) {
						baladoc_importer_gir_documentation_importer_skip_element (self);
					} else {
						BalaMarkupReader* _tmp19_;
						const gchar* _tmp20_;
						const gchar* _tmp21_;
						_tmp19_ = self->priv->reader;
						_tmp20_ = bala_markup_reader_get_name (_tmp19_);
						_tmp21_ = _tmp20_;
						if (g_strcmp0 (_tmp21_, "record") == 0) {
							baladoc_importer_gir_documentation_importer_parse_record (self);
						} else {
							BalaMarkupReader* _tmp22_;
							const gchar* _tmp23_;
							const gchar* _tmp24_;
							gchar* _tmp25_;
							gchar* _tmp26_;
							_tmp22_ = self->priv->reader;
							_tmp23_ = bala_markup_reader_get_name (_tmp22_);
							_tmp24_ = _tmp23_;
							_tmp25_ = g_strdup_printf ("unknown child element `%s' in `union'", _tmp24_);
							_tmp26_ = _tmp25_;
							baladoc_importer_gir_documentation_importer_error (self, _tmp26_);
							_g_free0 (_tmp26_);
							baladoc_importer_gir_documentation_importer_skip_element (self);
						}
					}
				}
			}
		}
	}
	_g_free0 (self->priv->parent_c_identifier);
	self->priv->parent_c_identifier = NULL;
	baladoc_importer_gir_documentation_importer_end_element (self, "union");
	_baladoc_api_source_comment_unref0 (comment);
}

static void
baladoc_importer_gir_documentation_importer_parse_constant (BaladocImporterGirDocumentationImporter* self)
{
	gchar* c_identifier = NULL;
	BalaMarkupReader* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp5_;
	BaladocApiGirSourceComment* comment = NULL;
	BaladocApiGirSourceComment* _tmp6_;
	const gchar* _tmp7_;
	BaladocApiGirSourceComment* _tmp8_;
	g_return_if_fail (self != NULL);
	baladoc_importer_gir_documentation_importer_start_element (self, "constant");
	_tmp0_ = self->priv->reader;
	_tmp1_ = bala_markup_reader_get_attribute (_tmp0_, "c:identifier");
	c_identifier = _tmp1_;
	_tmp2_ = c_identifier;
	if (_tmp2_ == NULL) {
		BalaMarkupReader* _tmp3_;
		gchar* _tmp4_;
		_tmp3_ = self->priv->reader;
		_tmp4_ = bala_markup_reader_get_attribute (_tmp3_, "c:type");
		_g_free0 (c_identifier);
		c_identifier = _tmp4_;
	}
	_tmp5_ = c_identifier;
	if (_tmp5_ == NULL) {
		baladoc_importer_gir_documentation_importer_skip_element (self);
		_g_free0 (c_identifier);
		return;
	}
	baladoc_importer_gir_documentation_importer_next (self);
	_tmp6_ = baladoc_importer_gir_documentation_importer_parse_symbol_doc (self);
	comment = _tmp6_;
	_tmp7_ = c_identifier;
	_tmp8_ = comment;
	baladoc_importer_gir_documentation_importer_attach_comment (self, _tmp7_, _tmp8_, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, NULL, (gint) 0, -1);
	baladoc_importer_gir_documentation_importer_parse_type (self, NULL);
	baladoc_importer_gir_documentation_importer_end_element (self, "constant");
	_baladoc_api_source_comment_unref0 (comment);
	_g_free0 (c_identifier);
}

static void
baladoc_importer_gir_documentation_importer_implicit_parameter_pos_init (BaladocImporterGirDocumentationImporterImplicitParameterPos *self,
                                                                         gint parameter,
                                                                         gint position)
{
	memset (self, 0, sizeof (BaladocImporterGirDocumentationImporterImplicitParameterPos));
	(*self).parameter = parameter;
	(*self).position = position;
}

static BaladocImporterGirDocumentationImporterImplicitParameterPos*
baladoc_importer_gir_documentation_importer_implicit_parameter_pos_dup (const BaladocImporterGirDocumentationImporterImplicitParameterPos* self)
{
	BaladocImporterGirDocumentationImporterImplicitParameterPos* dup;
	dup = g_new0 (BaladocImporterGirDocumentationImporterImplicitParameterPos, 1);
	memcpy (dup, self, sizeof (BaladocImporterGirDocumentationImporterImplicitParameterPos));
	return dup;
}

static void
baladoc_importer_gir_documentation_importer_implicit_parameter_pos_free (BaladocImporterGirDocumentationImporterImplicitParameterPos* self)
{
	g_free (self);
}

static GType
baladoc_importer_gir_documentation_importer_implicit_parameter_pos_get_type_once (void)
{
	GType baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id;
	baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id = g_boxed_type_register_static ("BaladocImporterGirDocumentationImporterImplicitParameterPos", (GBoxedCopyFunc) baladoc_importer_gir_documentation_importer_implicit_parameter_pos_dup, (GBoxedFreeFunc) baladoc_importer_gir_documentation_importer_implicit_parameter_pos_free);
	return baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id;
}

static GType
baladoc_importer_gir_documentation_importer_implicit_parameter_pos_get_type (void)
{
	static volatile gsize baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id__volatile = 0;
	if (g_once_init_enter (&baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id__volatile)) {
		GType baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id;
		baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id = baladoc_importer_gir_documentation_importer_implicit_parameter_pos_get_type_once ();
		g_once_init_leave (&baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id__volatile, baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id);
	}
	return baladoc_importer_gir_documentation_importer_implicit_parameter_pos_type_id__volatile;
}

static void
baladoc_importer_gir_documentation_importer_class_init (BaladocImporterGirDocumentationImporterClass * klass,
                                                        gpointer klass_data)
{
	baladoc_importer_gir_documentation_importer_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &BaladocImporterGirDocumentationImporter_private_offset);
	((BaladocImporterDocumentationImporterClass *) klass)->process = (void (*) (BaladocImporterDocumentationImporter*, const gchar*)) baladoc_importer_gir_documentation_importer_real_process;
	BALADOC_IMPORTER_DOCUMENTATION_IMPORTER_CLASS (klass)->get_file_extension = baladoc_importer_gir_documentation_importer_real_get_file_extension;
	G_OBJECT_CLASS (klass)->get_property = _bala_baladoc_importer_gir_documentation_importer_get_property;
	G_OBJECT_CLASS (klass)->finalize = baladoc_importer_gir_documentation_importer_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_FILE_EXTENSION_PROPERTY, baladoc_importer_gir_documentation_importer_properties[BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_FILE_EXTENSION_PROPERTY] = g_param_spec_string ("file-extension", "file-extension", "file-extension", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
}

static void
baladoc_importer_gir_documentation_importer_instance_init (BaladocImporterGirDocumentationImporter * self,
                                                           gpointer klass)
{
	self->priv = baladoc_importer_gir_documentation_importer_get_instance_private (self);
}

static void
baladoc_importer_gir_documentation_importer_finalize (GObject * obj)
{
	BaladocImporterGirDocumentationImporter * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BALADOC_IMPORTER_TYPE_GIR_DOCUMENTATION_IMPORTER, BaladocImporterGirDocumentationImporter);
	_bala_markup_reader_unref0 (self->priv->reader);
	_g_object_unref0 (self->priv->parser);
	_g_object_unref0 (self->priv->file);
	_g_free0 (self->priv->parent_c_identifier);
	G_OBJECT_CLASS (baladoc_importer_gir_documentation_importer_parent_class)->finalize (obj);
}

static GType
baladoc_importer_gir_documentation_importer_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (BaladocImporterGirDocumentationImporterClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) baladoc_importer_gir_documentation_importer_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BaladocImporterGirDocumentationImporter), 0, (GInstanceInitFunc) baladoc_importer_gir_documentation_importer_instance_init, NULL };
	GType baladoc_importer_gir_documentation_importer_type_id;
	baladoc_importer_gir_documentation_importer_type_id = g_type_register_static (BALADOC_IMPORTER_TYPE_DOCUMENTATION_IMPORTER, "BaladocImporterGirDocumentationImporter", &g_define_type_info, 0);
	BaladocImporterGirDocumentationImporter_private_offset = g_type_add_instance_private (baladoc_importer_gir_documentation_importer_type_id, sizeof (BaladocImporterGirDocumentationImporterPrivate));
	return baladoc_importer_gir_documentation_importer_type_id;
}

GType
baladoc_importer_gir_documentation_importer_get_type (void)
{
	static volatile gsize baladoc_importer_gir_documentation_importer_type_id__volatile = 0;
	if (g_once_init_enter (&baladoc_importer_gir_documentation_importer_type_id__volatile)) {
		GType baladoc_importer_gir_documentation_importer_type_id;
		baladoc_importer_gir_documentation_importer_type_id = baladoc_importer_gir_documentation_importer_get_type_once ();
		g_once_init_leave (&baladoc_importer_gir_documentation_importer_type_id__volatile, baladoc_importer_gir_documentation_importer_type_id);
	}
	return baladoc_importer_gir_documentation_importer_type_id__volatile;
}

static void
_bala_baladoc_importer_gir_documentation_importer_get_property (GObject * object,
                                                                guint property_id,
                                                                GValue * value,
                                                                GParamSpec * pspec)
{
	BaladocImporterGirDocumentationImporter * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, BALADOC_IMPORTER_TYPE_GIR_DOCUMENTATION_IMPORTER, BaladocImporterGirDocumentationImporter);
	switch (property_id) {
		case BALADOC_IMPORTER_GIR_DOCUMENTATION_IMPORTER_FILE_EXTENSION_PROPERTY:
		g_value_set_string (value, baladoc_importer_documentation_importer_get_file_extension ((BaladocImporterDocumentationImporter*) self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

static void
_bala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_bala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_bala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

