/* balagerrormodule.c generated by balac, the Bala compiler
 * generated from balagerrormodule.bala, do not modify */

/* balagerrormodule.bala
 *
 * Copyright (C) 2008-2010  Jürg Billeter
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.

 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * Author:
 *	Jürg Billeter <j@bitron.ch>
 *	Thijs Vermeir <thijsvermeir@gmail.com>
 */

#include "balacodegen.h"
#include <glib.h>
#include <bala.h>
#include <balaccode.h>
#include <balagee.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>

#define _g_free0(var) (var = (g_free (var), NULL))
#define _bala_ccode_node_unref0(var) ((var == NULL) ? NULL : (var = (bala_ccode_node_unref (var), NULL)))
#define _bala_code_node_unref0(var) ((var == NULL) ? NULL : (var = (bala_code_node_unref (var), NULL)))
#define _bala_iterable_unref0(var) ((var == NULL) ? NULL : (var = (bala_iterable_unref (var), NULL)))
#define _bala_target_value_unref0(var) ((var == NULL) ? NULL : (var = (bala_target_value_unref (var), NULL)))

struct _BalaGErrorModulePrivate {
	gboolean is_in_catch;
};

static gint BalaGErrorModule_private_offset;
static gpointer bala_gerror_module_parent_class = NULL;

static void bala_gerror_module_real_generate_error_domain_declaration (BalaCCodeBaseModule* base,
                                                                BalaErrorDomain* edomain,
                                                                BalaCCodeFile* decl_space);
static void bala_gerror_module_real_visit_error_domain (BalaCodeVisitor* base,
                                                 BalaErrorDomain* edomain);
static void bala_gerror_module_real_visit_throw_statement (BalaCodeVisitor* base,
                                                    BalaThrowStatement* stmt);
static void bala_gerror_module_real_return_with_exception (BalaGErrorModule* self,
                                                    BalaCCodeExpression* error_expr);
static void bala_gerror_module_uncaught_error_statement (BalaGErrorModule* self,
                                                  BalaCCodeExpression* inner_error,
                                                  gboolean unexpected,
                                                  BalaCodeNode* start_at);
static gboolean bala_gerror_module_in_finally_block (BalaGErrorModule* self,
                                              BalaCodeNode* node);
static void bala_gerror_module_real_add_simple_check (BalaCCodeBaseModule* base,
                                               BalaCodeNode* node,
                                               gboolean always_fails);
static void bala_gerror_module_real_visit_try_statement (BalaCodeVisitor* base,
                                                  BalaTryStatement* stmt);
static void bala_gerror_module_real_visit_catch_clause (BalaCodeVisitor* base,
                                                 BalaCatchClause* clause);
static void bala_gerror_module_real_append_scope_free (BalaCCodeBaseModule* base,
                                                BalaSymbol* sym,
                                                BalaCodeNode* stop_at);
static void bala_gerror_module_finalize (BalaCodeVisitor * obj);
static GType bala_gerror_module_get_type_once (void);

static inline gpointer
bala_gerror_module_get_instance_private (BalaGErrorModule* self)
{
	return G_STRUCT_MEMBER_P (self, BalaGErrorModule_private_offset);
}

static gpointer
_bala_iterable_ref0 (gpointer self)
{
	return self ? bala_iterable_ref (self) : NULL;
}

static void
bala_gerror_module_real_generate_error_domain_declaration (BalaCCodeBaseModule* base,
                                                           BalaErrorDomain* edomain,
                                                           BalaCCodeFile* decl_space)
{
	BalaGErrorModule * self;
	gchar* _tmp0_;
	gchar* _tmp1_;
	gboolean _tmp2_;
	BalaDataType* _tmp3_;
	BalaCCodeEnum* cenum = NULL;
	gchar* _tmp4_;
	gchar* _tmp5_;
	BalaCCodeEnum* _tmp6_;
	BalaCCodeEnum* _tmp7_;
	BalaCCodeEnum* _tmp39_;
	gchar* quark_fun_name = NULL;
	gchar* _tmp40_;
	gchar* _tmp41_;
	gchar* _tmp42_;
	gchar* _tmp43_;
	BalaCCodeMacroReplacement* error_domain_define = NULL;
	gchar* _tmp44_;
	gchar* _tmp45_;
	const gchar* _tmp46_;
	gchar* _tmp47_;
	gchar* _tmp48_;
	BalaCCodeMacroReplacement* _tmp49_;
	BalaCCodeMacroReplacement* _tmp50_;
	BalaCCodeMacroReplacement* _tmp51_;
	BalaCCodeFunction* cquark_fun = NULL;
	const gchar* _tmp52_;
	BalaDataType* _tmp53_;
	BalaTypeSymbol* _tmp54_;
	BalaTypeSymbol* _tmp55_;
	gchar* _tmp56_;
	gchar* _tmp57_;
	BalaCCodeFunction* _tmp58_;
	BalaCCodeFunction* _tmp59_;
	BalaCCodeFunction* _tmp60_;
	self = (BalaGErrorModule*) base;
	g_return_if_fail (edomain != NULL);
	g_return_if_fail (decl_space != NULL);
	_tmp0_ = bala_get_ccode_name ((BalaCodeNode*) edomain);
	_tmp1_ = _tmp0_;
	_tmp2_ = bala_ccode_base_module_add_symbol_declaration ((BalaCCodeBaseModule*) self, decl_space, (BalaSymbol*) edomain, _tmp1_);
	_g_free0 (_tmp1_);
	if (_tmp2_) {
		return;
	}
	_tmp3_ = ((BalaCCodeBaseModule*) self)->gquark_type;
	bala_ccode_base_module_generate_type_declaration ((BalaCCodeBaseModule*) self, _tmp3_, decl_space);
	_tmp4_ = bala_get_ccode_name ((BalaCodeNode*) edomain);
	_tmp5_ = _tmp4_;
	_tmp6_ = bala_ccode_enum_new (_tmp5_);
	_tmp7_ = _tmp6_;
	_g_free0 (_tmp5_);
	cenum = _tmp7_;
	{
		BalaList* _ecode_list = NULL;
		BalaList* _tmp8_;
		BalaList* _tmp9_;
		gint _ecode_size = 0;
		BalaList* _tmp10_;
		gint _tmp11_;
		gint _tmp12_;
		gint _ecode_index = 0;
		_tmp8_ = bala_error_domain_get_codes (edomain);
		_tmp9_ = _bala_iterable_ref0 (_tmp8_);
		_ecode_list = _tmp9_;
		_tmp10_ = _ecode_list;
		_tmp11_ = bala_collection_get_size ((BalaCollection*) _tmp10_);
		_tmp12_ = _tmp11_;
		_ecode_size = _tmp12_;
		_ecode_index = -1;
		while (TRUE) {
			gint _tmp13_;
			gint _tmp14_;
			BalaErrorCode* ecode = NULL;
			BalaList* _tmp15_;
			gpointer _tmp16_;
			BalaErrorCode* _tmp17_;
			BalaExpression* _tmp18_;
			BalaExpression* _tmp19_;
			_ecode_index = _ecode_index + 1;
			_tmp13_ = _ecode_index;
			_tmp14_ = _ecode_size;
			if (!(_tmp13_ < _tmp14_)) {
				break;
			}
			_tmp15_ = _ecode_list;
			_tmp16_ = bala_list_get (_tmp15_, _ecode_index);
			ecode = (BalaErrorCode*) _tmp16_;
			_tmp17_ = ecode;
			_tmp18_ = bala_error_code_get_value (_tmp17_);
			_tmp19_ = _tmp18_;
			if (_tmp19_ == NULL) {
				BalaCCodeEnum* _tmp20_;
				BalaErrorCode* _tmp21_;
				gchar* _tmp22_;
				gchar* _tmp23_;
				BalaCCodeEnumValue* _tmp24_;
				BalaCCodeEnumValue* _tmp25_;
				_tmp20_ = cenum;
				_tmp21_ = ecode;
				_tmp22_ = bala_get_ccode_name ((BalaCodeNode*) _tmp21_);
				_tmp23_ = _tmp22_;
				_tmp24_ = bala_ccode_enum_value_new (_tmp23_, NULL);
				_tmp25_ = _tmp24_;
				bala_ccode_enum_add_value (_tmp20_, _tmp25_);
				_bala_ccode_node_unref0 (_tmp25_);
				_g_free0 (_tmp23_);
			} else {
				BalaErrorCode* _tmp26_;
				BalaExpression* _tmp27_;
				BalaExpression* _tmp28_;
				BalaCCodeEnum* _tmp29_;
				BalaErrorCode* _tmp30_;
				gchar* _tmp31_;
				gchar* _tmp32_;
				BalaErrorCode* _tmp33_;
				BalaExpression* _tmp34_;
				BalaExpression* _tmp35_;
				BalaCCodeExpression* _tmp36_;
				BalaCCodeEnumValue* _tmp37_;
				BalaCCodeEnumValue* _tmp38_;
				_tmp26_ = ecode;
				_tmp27_ = bala_error_code_get_value (_tmp26_);
				_tmp28_ = _tmp27_;
				bala_code_node_emit ((BalaCodeNode*) _tmp28_, (BalaCodeGenerator*) self);
				_tmp29_ = cenum;
				_tmp30_ = ecode;
				_tmp31_ = bala_get_ccode_name ((BalaCodeNode*) _tmp30_);
				_tmp32_ = _tmp31_;
				_tmp33_ = ecode;
				_tmp34_ = bala_error_code_get_value (_tmp33_);
				_tmp35_ = _tmp34_;
				_tmp36_ = bala_get_cvalue (_tmp35_);
				_tmp37_ = bala_ccode_enum_value_new (_tmp32_, _tmp36_);
				_tmp38_ = _tmp37_;
				bala_ccode_enum_add_value (_tmp29_, _tmp38_);
				_bala_ccode_node_unref0 (_tmp38_);
				_g_free0 (_tmp32_);
			}
			_bala_code_node_unref0 (ecode);
		}
		_bala_iterable_unref0 (_ecode_list);
	}
	_tmp39_ = cenum;
	bala_ccode_file_add_type_definition (decl_space, (BalaCCodeNode*) _tmp39_);
	_tmp40_ = bala_get_ccode_lower_case_prefix ((BalaSymbol*) edomain);
	_tmp41_ = _tmp40_;
	_tmp42_ = g_strconcat (_tmp41_, "quark", NULL);
	_tmp43_ = _tmp42_;
	_g_free0 (_tmp41_);
	quark_fun_name = _tmp43_;
	_tmp44_ = bala_get_ccode_upper_case_name ((BalaSymbol*) edomain, NULL);
	_tmp45_ = _tmp44_;
	_tmp46_ = quark_fun_name;
	_tmp47_ = g_strconcat (_tmp46_, " ()", NULL);
	_tmp48_ = _tmp47_;
	_tmp49_ = bala_ccode_macro_replacement_new (_tmp45_, _tmp48_);
	_tmp50_ = _tmp49_;
	_g_free0 (_tmp48_);
	_g_free0 (_tmp45_);
	error_domain_define = _tmp50_;
	_tmp51_ = error_domain_define;
	bala_ccode_file_add_type_definition (decl_space, (BalaCCodeNode*) _tmp51_);
	_tmp52_ = quark_fun_name;
	_tmp53_ = ((BalaCCodeBaseModule*) self)->gquark_type;
	_tmp54_ = bala_data_type_get_type_symbol (_tmp53_);
	_tmp55_ = _tmp54_;
	_tmp56_ = bala_get_ccode_name ((BalaCodeNode*) _tmp55_);
	_tmp57_ = _tmp56_;
	_tmp58_ = bala_ccode_function_new (_tmp52_, _tmp57_);
	_tmp59_ = _tmp58_;
	_g_free0 (_tmp57_);
	cquark_fun = _tmp59_;
	_tmp60_ = cquark_fun;
	bala_ccode_file_add_function_declaration (decl_space, _tmp60_);
	_bala_ccode_node_unref0 (cquark_fun);
	_bala_ccode_node_unref0 (error_domain_define);
	_g_free0 (quark_fun_name);
	_bala_ccode_node_unref0 (cenum);
}

static void
bala_gerror_module_real_visit_error_domain (BalaCodeVisitor* base,
                                            BalaErrorDomain* edomain)
{
	BalaGErrorModule * self;
	BalaComment* _tmp0_;
	BalaComment* _tmp1_;
	BalaCCodeFile* _tmp9_;
	gchar* quark_fun_name = NULL;
	gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	BalaCCodeFunction* cquark_fun = NULL;
	BalaDataType* _tmp16_;
	BalaTypeSymbol* _tmp17_;
	BalaTypeSymbol* _tmp18_;
	gchar* _tmp19_;
	gchar* _tmp20_;
	BalaCCodeFunction* _tmp21_;
	BalaCCodeFunction* _tmp22_;
	BalaCCodeFunctionCall* cquark_call = NULL;
	BalaCCodeIdentifier* _tmp23_;
	BalaCCodeIdentifier* _tmp24_;
	BalaCCodeFunctionCall* _tmp25_;
	BalaCCodeFunctionCall* _tmp26_;
	gchar* _tmp27_;
	gchar* _tmp28_;
	gchar* _tmp29_;
	gchar* _tmp30_;
	gchar* _tmp31_;
	gchar* _tmp32_;
	BalaCCodeConstant* _tmp33_;
	BalaCCodeConstant* _tmp34_;
	BalaCCodeFunction* _tmp35_;
	BalaCCodeFunction* _tmp36_;
	BalaCCodeFile* _tmp37_;
	self = (BalaGErrorModule*) base;
	g_return_if_fail (edomain != NULL);
	_tmp0_ = bala_symbol_get_comment ((BalaSymbol*) edomain);
	_tmp1_ = _tmp0_;
	if (_tmp1_ != NULL) {
		BalaCCodeFile* _tmp2_;
		BalaComment* _tmp3_;
		BalaComment* _tmp4_;
		const gchar* _tmp5_;
		const gchar* _tmp6_;
		BalaCCodeComment* _tmp7_;
		BalaCCodeComment* _tmp8_;
		_tmp2_ = ((BalaCCodeBaseModule*) self)->cfile;
		_tmp3_ = bala_symbol_get_comment ((BalaSymbol*) edomain);
		_tmp4_ = _tmp3_;
		_tmp5_ = bala_comment_get_content (_tmp4_);
		_tmp6_ = _tmp5_;
		_tmp7_ = bala_ccode_comment_new (_tmp6_);
		_tmp8_ = _tmp7_;
		bala_ccode_file_add_type_definition (_tmp2_, (BalaCCodeNode*) _tmp8_);
		_bala_ccode_node_unref0 (_tmp8_);
	}
	_tmp9_ = ((BalaCCodeBaseModule*) self)->cfile;
	bala_ccode_base_module_generate_error_domain_declaration ((BalaCCodeBaseModule*) self, edomain, _tmp9_);
	if (!bala_symbol_is_internal_symbol ((BalaSymbol*) edomain)) {
		BalaCCodeFile* _tmp10_;
		_tmp10_ = ((BalaCCodeBaseModule*) self)->header_file;
		bala_ccode_base_module_generate_error_domain_declaration ((BalaCCodeBaseModule*) self, edomain, _tmp10_);
	}
	if (!bala_symbol_is_private_symbol ((BalaSymbol*) edomain)) {
		BalaCCodeFile* _tmp11_;
		_tmp11_ = ((BalaCCodeBaseModule*) self)->internal_header_file;
		bala_ccode_base_module_generate_error_domain_declaration ((BalaCCodeBaseModule*) self, edomain, _tmp11_);
	}
	bala_code_node_accept_children ((BalaCodeNode*) edomain, (BalaCodeVisitor*) self);
	_tmp12_ = bala_get_ccode_lower_case_prefix ((BalaSymbol*) edomain);
	_tmp13_ = _tmp12_;
	_tmp14_ = g_strconcat (_tmp13_, "quark", NULL);
	_tmp15_ = _tmp14_;
	_g_free0 (_tmp13_);
	quark_fun_name = _tmp15_;
	_tmp16_ = ((BalaCCodeBaseModule*) self)->gquark_type;
	_tmp17_ = bala_data_type_get_type_symbol (_tmp16_);
	_tmp18_ = _tmp17_;
	_tmp19_ = bala_get_ccode_name ((BalaCodeNode*) _tmp18_);
	_tmp20_ = _tmp19_;
	_tmp21_ = bala_ccode_function_new (quark_fun_name, _tmp20_);
	_tmp22_ = _tmp21_;
	_g_free0 (_tmp20_);
	cquark_fun = _tmp22_;
	bala_ccode_base_module_push_function ((BalaCCodeBaseModule*) self, cquark_fun);
	_tmp23_ = bala_ccode_identifier_new ("g_quark_from_static_string");
	_tmp24_ = _tmp23_;
	_tmp25_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp24_);
	_tmp26_ = _tmp25_;
	_bala_ccode_node_unref0 (_tmp24_);
	cquark_call = _tmp26_;
	_tmp27_ = bala_get_ccode_quark_name (edomain);
	_tmp28_ = _tmp27_;
	_tmp29_ = g_strconcat ("\"", _tmp28_, NULL);
	_tmp30_ = _tmp29_;
	_tmp31_ = g_strconcat (_tmp30_, "\"", NULL);
	_tmp32_ = _tmp31_;
	_tmp33_ = bala_ccode_constant_new (_tmp32_);
	_tmp34_ = _tmp33_;
	bala_ccode_function_call_add_argument (cquark_call, (BalaCCodeExpression*) _tmp34_);
	_bala_ccode_node_unref0 (_tmp34_);
	_g_free0 (_tmp32_);
	_g_free0 (_tmp30_);
	_g_free0 (_tmp28_);
	_tmp35_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp36_ = _tmp35_;
	bala_ccode_function_add_return (_tmp36_, (BalaCCodeExpression*) cquark_call);
	bala_ccode_base_module_pop_function ((BalaCCodeBaseModule*) self);
	_tmp37_ = ((BalaCCodeBaseModule*) self)->cfile;
	bala_ccode_file_add_function (_tmp37_, cquark_fun);
	_bala_ccode_node_unref0 (cquark_call);
	_bala_ccode_node_unref0 (cquark_fun);
	_g_free0 (quark_fun_name);
}

static void
bala_gerror_module_real_visit_throw_statement (BalaCodeVisitor* base,
                                               BalaThrowStatement* stmt)
{
	BalaGErrorModule * self;
	BalaCCodeFunction* _tmp0_;
	BalaCCodeFunction* _tmp1_;
	BalaCCodeExpression* _tmp2_;
	BalaCCodeExpression* _tmp3_;
	BalaExpression* _tmp4_;
	BalaExpression* _tmp5_;
	BalaCCodeExpression* _tmp6_;
	self = (BalaGErrorModule*) base;
	g_return_if_fail (stmt != NULL);
	bala_ccode_base_module_set_current_method_inner_error ((BalaCCodeBaseModule*) self, TRUE);
	_tmp0_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp1_ = _tmp0_;
	_tmp2_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
	_tmp3_ = _tmp2_;
	_tmp4_ = bala_throw_statement_get_error_expression (stmt);
	_tmp5_ = _tmp4_;
	_tmp6_ = bala_get_cvalue (_tmp5_);
	bala_ccode_function_add_assignment (_tmp1_, _tmp3_, _tmp6_);
	_bala_ccode_node_unref0 (_tmp3_);
	bala_ccode_base_module_add_simple_check ((BalaCCodeBaseModule*) self, (BalaCodeNode*) stmt, TRUE);
}

static gpointer
_bala_code_node_ref0 (gpointer self)
{
	return self ? bala_code_node_ref (self) : NULL;
}

static void
bala_gerror_module_real_return_with_exception (BalaGErrorModule* self,
                                               BalaCCodeExpression* error_expr)
{
	BalaCCodeFunctionCall* cpropagate = NULL;
	BalaCCodeIdentifier* _tmp0_;
	BalaCCodeIdentifier* _tmp1_;
	BalaCCodeFunctionCall* _tmp2_;
	BalaCCodeFunctionCall* _tmp3_;
	BalaCCodeFunctionCall* _tmp4_;
	BalaCCodeIdentifier* _tmp5_;
	BalaCCodeIdentifier* _tmp6_;
	BalaCCodeFunctionCall* _tmp7_;
	BalaCCodeFunction* _tmp8_;
	BalaCCodeFunction* _tmp9_;
	BalaCCodeFunctionCall* _tmp10_;
	BalaSymbol* _tmp11_;
	BalaSymbol* _tmp12_;
	BalaMethod* _tmp13_;
	BalaMethod* _tmp14_;
	gboolean _tmp15_ = FALSE;
	BalaMethod* _tmp16_;
	BalaMethod* _tmp17_;
	g_return_if_fail (error_expr != NULL);
	_tmp0_ = bala_ccode_identifier_new ("g_propagate_error");
	_tmp1_ = _tmp0_;
	_tmp2_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp1_);
	_tmp3_ = _tmp2_;
	_bala_ccode_node_unref0 (_tmp1_);
	cpropagate = _tmp3_;
	_tmp4_ = cpropagate;
	_tmp5_ = bala_ccode_identifier_new ("error");
	_tmp6_ = _tmp5_;
	bala_ccode_function_call_add_argument (_tmp4_, (BalaCCodeExpression*) _tmp6_);
	_bala_ccode_node_unref0 (_tmp6_);
	_tmp7_ = cpropagate;
	bala_ccode_function_call_add_argument (_tmp7_, error_expr);
	_tmp8_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp9_ = _tmp8_;
	_tmp10_ = cpropagate;
	bala_ccode_function_add_expression (_tmp9_, (BalaCCodeExpression*) _tmp10_);
	_tmp11_ = bala_ccode_base_module_get_current_symbol ((BalaCCodeBaseModule*) self);
	_tmp12_ = _tmp11_;
	bala_ccode_base_module_append_local_free ((BalaCCodeBaseModule*) self, _tmp12_, NULL, NULL);
	_tmp13_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
	_tmp14_ = _tmp13_;
	bala_ccode_base_module_append_out_param_free ((BalaCCodeBaseModule*) self, _tmp14_);
	_tmp16_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
	_tmp17_ = _tmp16_;
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp17_, BALA_TYPE_CREATION_METHOD)) {
		BalaMethod* _tmp18_;
		BalaMethod* _tmp19_;
		BalaSymbol* _tmp20_;
		BalaSymbol* _tmp21_;
		_tmp18_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
		_tmp19_ = _tmp18_;
		_tmp20_ = bala_symbol_get_parent_symbol ((BalaSymbol*) _tmp19_);
		_tmp21_ = _tmp20_;
		_tmp15_ = G_TYPE_CHECK_INSTANCE_TYPE (_tmp21_, BALA_TYPE_CLASS);
	} else {
		_tmp15_ = FALSE;
	}
	if (_tmp15_) {
		BalaClass* cl = NULL;
		BalaMethod* _tmp22_;
		BalaMethod* _tmp23_;
		BalaSymbol* _tmp24_;
		BalaSymbol* _tmp25_;
		BalaClass* _tmp26_;
		BalaCCodeFunction* _tmp27_;
		BalaCCodeFunction* _tmp28_;
		BalaClass* _tmp29_;
		BalaObjectType* _tmp30_;
		BalaObjectType* _tmp31_;
		BalaCCodeIdentifier* _tmp32_;
		BalaCCodeIdentifier* _tmp33_;
		BalaGLibValue* _tmp34_;
		BalaGLibValue* _tmp35_;
		BalaCCodeExpression* _tmp36_;
		BalaCCodeExpression* _tmp37_;
		BalaCCodeFunction* _tmp38_;
		BalaCCodeFunction* _tmp39_;
		BalaCCodeConstant* _tmp40_;
		BalaCCodeConstant* _tmp41_;
		_tmp22_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
		_tmp23_ = _tmp22_;
		_tmp24_ = bala_symbol_get_parent_symbol ((BalaSymbol*) _tmp23_);
		_tmp25_ = _tmp24_;
		_tmp26_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp25_, BALA_TYPE_CLASS, BalaClass));
		cl = _tmp26_;
		_tmp27_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
		_tmp28_ = _tmp27_;
		_tmp29_ = cl;
		_tmp30_ = bala_object_type_new ((BalaObjectTypeSymbol*) _tmp29_);
		_tmp31_ = _tmp30_;
		_tmp32_ = bala_ccode_identifier_new ("self");
		_tmp33_ = _tmp32_;
		_tmp34_ = bala_glib_value_new ((BalaDataType*) _tmp31_, (BalaCCodeExpression*) _tmp33_, TRUE);
		_tmp35_ = _tmp34_;
		_tmp36_ = bala_ccode_base_module_destroy_value ((BalaCCodeBaseModule*) self, (BalaTargetValue*) _tmp35_, FALSE);
		_tmp37_ = _tmp36_;
		bala_ccode_function_add_expression (_tmp28_, _tmp37_);
		_bala_ccode_node_unref0 (_tmp37_);
		_bala_target_value_unref0 (_tmp35_);
		_bala_ccode_node_unref0 (_tmp33_);
		_bala_code_node_unref0 (_tmp31_);
		_tmp38_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
		_tmp39_ = _tmp38_;
		_tmp40_ = bala_ccode_constant_new ("NULL");
		_tmp41_ = _tmp40_;
		bala_ccode_function_add_return (_tmp39_, (BalaCCodeExpression*) _tmp41_);
		_bala_ccode_node_unref0 (_tmp41_);
		_bala_code_node_unref0 (cl);
	} else {
		if (bala_ccode_base_module_is_in_coroutine ((BalaCCodeBaseModule*) self)) {
			BalaCCodeFunction* _tmp42_;
			BalaCCodeFunction* _tmp43_;
			BalaCCodeConstant* _tmp44_;
			BalaCCodeConstant* _tmp45_;
			_tmp42_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
			_tmp43_ = _tmp42_;
			_tmp44_ = bala_ccode_constant_new ("FALSE");
			_tmp45_ = _tmp44_;
			bala_ccode_function_add_return (_tmp43_, (BalaCCodeExpression*) _tmp45_);
			_bala_ccode_node_unref0 (_tmp45_);
		} else {
			BalaDataType* _tmp46_;
			BalaDataType* _tmp47_;
			_tmp46_ = bala_ccode_base_module_get_current_return_type ((BalaCCodeBaseModule*) self);
			_tmp47_ = _tmp46_;
			bala_ccode_base_module_return_default_value ((BalaCCodeBaseModule*) self, _tmp47_, TRUE);
		}
	}
	_bala_ccode_node_unref0 (cpropagate);
}

void
bala_gerror_module_return_with_exception (BalaGErrorModule* self,
                                          BalaCCodeExpression* error_expr)
{
	g_return_if_fail (self != NULL);
	BALA_GERROR_MODULE_GET_CLASS (self)->return_with_exception (self, error_expr);
}

static void
bala_gerror_module_uncaught_error_statement (BalaGErrorModule* self,
                                             BalaCCodeExpression* inner_error,
                                             gboolean unexpected,
                                             BalaCodeNode* start_at)
{
	BalaMethod* _tmp4_;
	BalaMethod* _tmp5_;
	BalaCCodeFile* _tmp6_;
	BalaCCodeFunctionCall* ccritical = NULL;
	BalaCCodeIdentifier* _tmp7_;
	BalaCCodeIdentifier* _tmp8_;
	BalaCCodeFunctionCall* _tmp9_;
	BalaCCodeFunctionCall* _tmp10_;
	const gchar* _tmp11_ = NULL;
	BalaCCodeFunctionCall* _tmp12_;
	BalaCCodeConstant* _tmp13_;
	BalaCCodeConstant* _tmp14_;
	BalaCCodeFunctionCall* _tmp15_;
	BalaCCodeConstant* _tmp16_;
	BalaCCodeConstant* _tmp17_;
	BalaCCodeFunctionCall* _tmp18_;
	BalaCCodeConstant* _tmp19_;
	BalaCCodeConstant* _tmp20_;
	BalaCCodeFunctionCall* _tmp21_;
	BalaCCodeMemberAccess* _tmp22_;
	BalaCCodeMemberAccess* _tmp23_;
	BalaCCodeFunctionCall* domain_name = NULL;
	BalaCCodeIdentifier* _tmp24_;
	BalaCCodeIdentifier* _tmp25_;
	BalaCCodeFunctionCall* _tmp26_;
	BalaCCodeFunctionCall* _tmp27_;
	BalaCCodeFunctionCall* _tmp28_;
	BalaCCodeMemberAccess* _tmp29_;
	BalaCCodeMemberAccess* _tmp30_;
	BalaCCodeFunctionCall* _tmp31_;
	BalaCCodeFunctionCall* _tmp32_;
	BalaCCodeFunctionCall* _tmp33_;
	BalaCCodeMemberAccess* _tmp34_;
	BalaCCodeMemberAccess* _tmp35_;
	BalaCCodeFunctionCall* cclear = NULL;
	BalaCCodeIdentifier* _tmp36_;
	BalaCCodeIdentifier* _tmp37_;
	BalaCCodeFunctionCall* _tmp38_;
	BalaCCodeFunctionCall* _tmp39_;
	BalaCCodeFunctionCall* _tmp40_;
	BalaCCodeUnaryExpression* _tmp41_;
	BalaCCodeUnaryExpression* _tmp42_;
	BalaCCodeFunction* _tmp43_;
	BalaCCodeFunction* _tmp44_;
	BalaCCodeFunctionCall* _tmp45_;
	BalaCCodeFunction* _tmp46_;
	BalaCCodeFunction* _tmp47_;
	BalaCCodeFunctionCall* _tmp48_;
	gboolean _tmp49_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (inner_error != NULL);
	if (G_TYPE_CHECK_INSTANCE_TYPE (start_at, BALA_TYPE_TRY_STATEMENT)) {
		BalaCodeNode* _tmp0_;
		BalaCodeNode* _tmp1_;
		_tmp0_ = bala_code_node_get_parent_node (start_at);
		_tmp1_ = _tmp0_;
		bala_ccode_base_module_append_local_free ((BalaCCodeBaseModule*) self, (BalaSymbol*) (G_TYPE_CHECK_INSTANCE_TYPE (_tmp1_, BALA_TYPE_BLOCK) ? ((BalaBlock*) _tmp1_) : NULL), NULL, NULL);
	} else {
		BalaSymbol* _tmp2_;
		BalaSymbol* _tmp3_;
		_tmp2_ = bala_ccode_base_module_get_current_symbol ((BalaCCodeBaseModule*) self);
		_tmp3_ = _tmp2_;
		bala_ccode_base_module_append_local_free ((BalaCCodeBaseModule*) self, _tmp3_, NULL, NULL);
	}
	_tmp4_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
	_tmp5_ = _tmp4_;
	bala_ccode_base_module_append_out_param_free ((BalaCCodeBaseModule*) self, _tmp5_);
	_tmp6_ = ((BalaCCodeBaseModule*) self)->cfile;
	bala_ccode_file_add_include (_tmp6_, "glib.h", FALSE);
	_tmp7_ = bala_ccode_identifier_new ("g_critical");
	_tmp8_ = _tmp7_;
	_tmp9_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp8_);
	_tmp10_ = _tmp9_;
	_bala_ccode_node_unref0 (_tmp8_);
	ccritical = _tmp10_;
	if (unexpected) {
		_tmp11_ = "\"file %s: line %d: unexpected error: %s (%s, %d)\"";
	} else {
		_tmp11_ = "\"file %s: line %d: uncaught error: %s (%s, %d)\"";
	}
	_tmp12_ = ccritical;
	_tmp13_ = bala_ccode_constant_new (_tmp11_);
	_tmp14_ = _tmp13_;
	bala_ccode_function_call_add_argument (_tmp12_, (BalaCCodeExpression*) _tmp14_);
	_bala_ccode_node_unref0 (_tmp14_);
	_tmp15_ = ccritical;
	_tmp16_ = bala_ccode_constant_new ("__FILE__");
	_tmp17_ = _tmp16_;
	bala_ccode_function_call_add_argument (_tmp15_, (BalaCCodeExpression*) _tmp17_);
	_bala_ccode_node_unref0 (_tmp17_);
	_tmp18_ = ccritical;
	_tmp19_ = bala_ccode_constant_new ("__LINE__");
	_tmp20_ = _tmp19_;
	bala_ccode_function_call_add_argument (_tmp18_, (BalaCCodeExpression*) _tmp20_);
	_bala_ccode_node_unref0 (_tmp20_);
	_tmp21_ = ccritical;
	_tmp22_ = bala_ccode_member_access_new_pointer (inner_error, "message");
	_tmp23_ = _tmp22_;
	bala_ccode_function_call_add_argument (_tmp21_, (BalaCCodeExpression*) _tmp23_);
	_bala_ccode_node_unref0 (_tmp23_);
	_tmp24_ = bala_ccode_identifier_new ("g_quark_to_string");
	_tmp25_ = _tmp24_;
	_tmp26_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp25_);
	_tmp27_ = _tmp26_;
	_bala_ccode_node_unref0 (_tmp25_);
	domain_name = _tmp27_;
	_tmp28_ = domain_name;
	_tmp29_ = bala_ccode_member_access_new_pointer (inner_error, "domain");
	_tmp30_ = _tmp29_;
	bala_ccode_function_call_add_argument (_tmp28_, (BalaCCodeExpression*) _tmp30_);
	_bala_ccode_node_unref0 (_tmp30_);
	_tmp31_ = ccritical;
	_tmp32_ = domain_name;
	bala_ccode_function_call_add_argument (_tmp31_, (BalaCCodeExpression*) _tmp32_);
	_tmp33_ = ccritical;
	_tmp34_ = bala_ccode_member_access_new_pointer (inner_error, "code");
	_tmp35_ = _tmp34_;
	bala_ccode_function_call_add_argument (_tmp33_, (BalaCCodeExpression*) _tmp35_);
	_bala_ccode_node_unref0 (_tmp35_);
	_tmp36_ = bala_ccode_identifier_new ("g_clear_error");
	_tmp37_ = _tmp36_;
	_tmp38_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp37_);
	_tmp39_ = _tmp38_;
	_bala_ccode_node_unref0 (_tmp37_);
	cclear = _tmp39_;
	_tmp40_ = cclear;
	_tmp41_ = bala_ccode_unary_expression_new (BALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, inner_error);
	_tmp42_ = _tmp41_;
	bala_ccode_function_call_add_argument (_tmp40_, (BalaCCodeExpression*) _tmp42_);
	_bala_ccode_node_unref0 (_tmp42_);
	_tmp43_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp44_ = _tmp43_;
	_tmp45_ = ccritical;
	bala_ccode_function_add_expression (_tmp44_, (BalaCCodeExpression*) _tmp45_);
	_tmp46_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp47_ = _tmp46_;
	_tmp48_ = cclear;
	bala_ccode_function_add_expression (_tmp47_, (BalaCCodeExpression*) _tmp48_);
	if (bala_ccode_base_module_is_in_constructor ((BalaCCodeBaseModule*) self)) {
		_tmp49_ = TRUE;
	} else {
		_tmp49_ = bala_ccode_base_module_is_in_destructor ((BalaCCodeBaseModule*) self);
	}
	if (_tmp49_) {
	} else {
		BalaMethod* _tmp50_;
		BalaMethod* _tmp51_;
		_tmp50_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
		_tmp51_ = _tmp50_;
		if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp51_, BALA_TYPE_CREATION_METHOD)) {
			BalaMethod* _tmp52_;
			BalaMethod* _tmp53_;
			BalaSymbol* _tmp54_;
			BalaSymbol* _tmp55_;
			_tmp52_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
			_tmp53_ = _tmp52_;
			_tmp54_ = bala_symbol_get_parent_symbol ((BalaSymbol*) _tmp53_);
			_tmp55_ = _tmp54_;
			if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp55_, BALA_TYPE_STRUCT)) {
				BalaCCodeFunction* _tmp56_;
				BalaCCodeFunction* _tmp57_;
				_tmp56_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp57_ = _tmp56_;
				bala_ccode_function_add_return (_tmp57_, NULL);
			} else {
				BalaCCodeFunction* _tmp58_;
				BalaCCodeFunction* _tmp59_;
				BalaCCodeConstant* _tmp60_;
				BalaCCodeConstant* _tmp61_;
				_tmp58_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp59_ = _tmp58_;
				_tmp60_ = bala_ccode_constant_new ("NULL");
				_tmp61_ = _tmp60_;
				bala_ccode_function_add_return (_tmp59_, (BalaCCodeExpression*) _tmp61_);
				_bala_ccode_node_unref0 (_tmp61_);
			}
		} else {
			if (bala_ccode_base_module_is_in_coroutine ((BalaCCodeBaseModule*) self)) {
				BalaCCodeMemberAccess* async_result_expr = NULL;
				BalaCCodeIdentifier* _tmp62_;
				BalaCCodeIdentifier* _tmp63_;
				BalaCCodeMemberAccess* _tmp64_;
				BalaCCodeMemberAccess* _tmp65_;
				BalaCCodeFunctionCall* unref = NULL;
				BalaCCodeIdentifier* _tmp66_;
				BalaCCodeIdentifier* _tmp67_;
				BalaCCodeFunctionCall* _tmp68_;
				BalaCCodeFunctionCall* _tmp69_;
				BalaCCodeFunctionCall* _tmp70_;
				BalaCCodeMemberAccess* _tmp71_;
				BalaCCodeFunction* _tmp72_;
				BalaCCodeFunction* _tmp73_;
				BalaCCodeFunctionCall* _tmp74_;
				BalaCCodeFunction* _tmp75_;
				BalaCCodeFunction* _tmp76_;
				BalaCCodeConstant* _tmp77_;
				BalaCCodeConstant* _tmp78_;
				_tmp62_ = bala_ccode_identifier_new ("_data_");
				_tmp63_ = _tmp62_;
				_tmp64_ = bala_ccode_member_access_new_pointer ((BalaCCodeExpression*) _tmp63_, "_async_result");
				_tmp65_ = _tmp64_;
				_bala_ccode_node_unref0 (_tmp63_);
				async_result_expr = _tmp65_;
				_tmp66_ = bala_ccode_identifier_new ("g_object_unref");
				_tmp67_ = _tmp66_;
				_tmp68_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp67_);
				_tmp69_ = _tmp68_;
				_bala_ccode_node_unref0 (_tmp67_);
				unref = _tmp69_;
				_tmp70_ = unref;
				_tmp71_ = async_result_expr;
				bala_ccode_function_call_add_argument (_tmp70_, (BalaCCodeExpression*) _tmp71_);
				_tmp72_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp73_ = _tmp72_;
				_tmp74_ = unref;
				bala_ccode_function_add_expression (_tmp73_, (BalaCCodeExpression*) _tmp74_);
				_tmp75_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp76_ = _tmp75_;
				_tmp77_ = bala_ccode_constant_new ("FALSE");
				_tmp78_ = _tmp77_;
				bala_ccode_function_add_return (_tmp76_, (BalaCCodeExpression*) _tmp78_);
				_bala_ccode_node_unref0 (_tmp78_);
				_bala_ccode_node_unref0 (unref);
				_bala_ccode_node_unref0 (async_result_expr);
			} else {
				BalaDataType* _tmp79_;
				BalaDataType* _tmp80_;
				_tmp79_ = bala_ccode_base_module_get_current_return_type ((BalaCCodeBaseModule*) self);
				_tmp80_ = _tmp79_;
				if (_tmp80_ != NULL) {
					BalaDataType* _tmp81_;
					BalaDataType* _tmp82_;
					_tmp81_ = bala_ccode_base_module_get_current_return_type ((BalaCCodeBaseModule*) self);
					_tmp82_ = _tmp81_;
					bala_ccode_base_module_return_default_value ((BalaCCodeBaseModule*) self, _tmp82_, TRUE);
				}
			}
		}
	}
	_bala_ccode_node_unref0 (cclear);
	_bala_ccode_node_unref0 (domain_name);
	_bala_ccode_node_unref0 (ccritical);
}

static gboolean
bala_gerror_module_in_finally_block (BalaGErrorModule* self,
                                     BalaCodeNode* node)
{
	BalaCodeNode* current_node = NULL;
	BalaCodeNode* _tmp0_;
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (node != NULL, FALSE);
	_tmp0_ = _bala_code_node_ref0 (node);
	current_node = _tmp0_;
	while (TRUE) {
		BalaCodeNode* _tmp1_;
		BalaTryStatement* try_stmt = NULL;
		BalaCodeNode* _tmp2_;
		BalaCodeNode* _tmp3_;
		BalaCodeNode* _tmp4_;
		BalaTryStatement* _tmp5_;
		gboolean _tmp6_ = FALSE;
		BalaTryStatement* _tmp7_;
		BalaCodeNode* _tmp12_;
		BalaCodeNode* _tmp13_;
		BalaCodeNode* _tmp14_;
		BalaCodeNode* _tmp15_;
		_tmp1_ = current_node;
		if (!(_tmp1_ != NULL)) {
			break;
		}
		_tmp2_ = current_node;
		_tmp3_ = bala_code_node_get_parent_node (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp5_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp4_, BALA_TYPE_TRY_STATEMENT) ? ((BalaTryStatement*) _tmp4_) : NULL);
		try_stmt = _tmp5_;
		_tmp7_ = try_stmt;
		if (_tmp7_ != NULL) {
			BalaTryStatement* _tmp8_;
			BalaBlock* _tmp9_;
			BalaBlock* _tmp10_;
			BalaCodeNode* _tmp11_;
			_tmp8_ = try_stmt;
			_tmp9_ = bala_try_statement_get_finally_body (_tmp8_);
			_tmp10_ = _tmp9_;
			_tmp11_ = current_node;
			_tmp6_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, BALA_TYPE_CODE_NODE, BalaCodeNode) == _tmp11_;
		} else {
			_tmp6_ = FALSE;
		}
		if (_tmp6_) {
			result = TRUE;
			_bala_code_node_unref0 (try_stmt);
			_bala_code_node_unref0 (current_node);
			return result;
		}
		_tmp12_ = current_node;
		_tmp13_ = bala_code_node_get_parent_node (_tmp12_);
		_tmp14_ = _tmp13_;
		_tmp15_ = _bala_code_node_ref0 (_tmp14_);
		_bala_code_node_unref0 (current_node);
		current_node = _tmp15_;
		_bala_code_node_unref0 (try_stmt);
	}
	result = FALSE;
	_bala_code_node_unref0 (current_node);
	return result;
}

static gpointer
_bala_ccode_node_ref0 (gpointer self)
{
	return self ? bala_ccode_node_ref (self) : NULL;
}

static void
bala_gerror_module_real_add_simple_check (BalaCCodeBaseModule* base,
                                          BalaCodeNode* node,
                                          gboolean always_fails)
{
	BalaGErrorModule * self;
	BalaTryStatement* _tmp15_;
	BalaTryStatement* _tmp16_;
	self = (BalaGErrorModule*) base;
	g_return_if_fail (node != NULL);
	bala_ccode_base_module_set_current_method_inner_error ((BalaCCodeBaseModule*) self, TRUE);
	if (always_fails) {
	} else {
		BalaCCodeBinaryExpression* ccond = NULL;
		BalaCCodeExpression* _tmp0_;
		BalaCCodeExpression* _tmp1_;
		BalaCCodeConstant* _tmp2_;
		BalaCCodeConstant* _tmp3_;
		BalaCCodeBinaryExpression* _tmp4_;
		BalaCCodeBinaryExpression* _tmp5_;
		BalaCCodeFunctionCall* unlikely = NULL;
		BalaCCodeIdentifier* _tmp6_;
		BalaCCodeIdentifier* _tmp7_;
		BalaCCodeFunctionCall* _tmp8_;
		BalaCCodeFunctionCall* _tmp9_;
		BalaCCodeFunctionCall* _tmp10_;
		BalaCCodeBinaryExpression* _tmp11_;
		BalaCCodeFunction* _tmp12_;
		BalaCCodeFunction* _tmp13_;
		BalaCCodeFunctionCall* _tmp14_;
		_tmp0_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
		_tmp1_ = _tmp0_;
		_tmp2_ = bala_ccode_constant_new ("NULL");
		_tmp3_ = _tmp2_;
		_tmp4_ = bala_ccode_binary_expression_new (BALA_CCODE_BINARY_OPERATOR_INEQUALITY, _tmp1_, (BalaCCodeExpression*) _tmp3_);
		_tmp5_ = _tmp4_;
		_bala_ccode_node_unref0 (_tmp3_);
		_bala_ccode_node_unref0 (_tmp1_);
		ccond = _tmp5_;
		_tmp6_ = bala_ccode_identifier_new ("G_UNLIKELY");
		_tmp7_ = _tmp6_;
		_tmp8_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp7_);
		_tmp9_ = _tmp8_;
		_bala_ccode_node_unref0 (_tmp7_);
		unlikely = _tmp9_;
		_tmp10_ = unlikely;
		_tmp11_ = ccond;
		bala_ccode_function_call_add_argument (_tmp10_, (BalaCCodeExpression*) _tmp11_);
		_tmp12_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
		_tmp13_ = _tmp12_;
		_tmp14_ = unlikely;
		bala_ccode_function_open_if (_tmp13_, (BalaCCodeExpression*) _tmp14_);
		_bala_ccode_node_unref0 (unlikely);
		_bala_ccode_node_unref0 (ccond);
	}
	_tmp15_ = bala_ccode_base_module_get_current_try ((BalaCCodeBaseModule*) self);
	_tmp16_ = _tmp15_;
	if (_tmp16_ != NULL) {
		BalaArrayList* error_types = NULL;
		GEqualFunc _tmp25_;
		BalaArrayList* _tmp26_;
		BalaArrayList* _tmp27_;
		gboolean has_general_catch_clause = FALSE;
		if (self->priv->is_in_catch) {
			BalaSymbol* _tmp17_;
			BalaSymbol* _tmp18_;
			BalaCatchClause* _tmp19_;
			BalaCatchClause* _tmp20_;
			_tmp17_ = bala_ccode_base_module_get_current_symbol ((BalaCCodeBaseModule*) self);
			_tmp18_ = _tmp17_;
			_tmp19_ = bala_ccode_base_module_get_current_catch ((BalaCCodeBaseModule*) self);
			_tmp20_ = _tmp19_;
			bala_ccode_base_module_append_local_free ((BalaCCodeBaseModule*) self, _tmp18_, NULL, (BalaCodeNode*) _tmp20_);
		} else {
			BalaSymbol* _tmp21_;
			BalaSymbol* _tmp22_;
			BalaTryStatement* _tmp23_;
			BalaTryStatement* _tmp24_;
			_tmp21_ = bala_ccode_base_module_get_current_symbol ((BalaCCodeBaseModule*) self);
			_tmp22_ = _tmp21_;
			_tmp23_ = bala_ccode_base_module_get_current_try ((BalaCCodeBaseModule*) self);
			_tmp24_ = _tmp23_;
			bala_ccode_base_module_append_local_free ((BalaCCodeBaseModule*) self, _tmp22_, NULL, (BalaCodeNode*) _tmp24_);
		}
		_tmp25_ = g_direct_equal;
		_tmp26_ = bala_array_list_new (BALA_TYPE_DATA_TYPE, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, _tmp25_);
		error_types = _tmp26_;
		_tmp27_ = error_types;
		bala_code_node_get_error_types (node, (BalaCollection*) _tmp27_, NULL);
		has_general_catch_clause = FALSE;
		if (!self->priv->is_in_catch) {
			BalaArrayList* handled_error_types = NULL;
			GEqualFunc _tmp28_;
			BalaArrayList* _tmp29_;
			_tmp28_ = g_direct_equal;
			_tmp29_ = bala_array_list_new (BALA_TYPE_DATA_TYPE, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, _tmp28_);
			handled_error_types = _tmp29_;
			{
				BalaList* _clause_list = NULL;
				BalaTryStatement* _tmp30_;
				BalaTryStatement* _tmp31_;
				BalaList* _tmp32_;
				BalaList* _tmp33_;
				gint _clause_size = 0;
				BalaList* _tmp34_;
				gint _tmp35_;
				gint _tmp36_;
				gint _clause_index = 0;
				_tmp30_ = bala_ccode_base_module_get_current_try ((BalaCCodeBaseModule*) self);
				_tmp31_ = _tmp30_;
				_tmp32_ = bala_try_statement_get_catch_clauses (_tmp31_);
				_tmp33_ = _bala_iterable_ref0 (_tmp32_);
				_clause_list = _tmp33_;
				_tmp34_ = _clause_list;
				_tmp35_ = bala_collection_get_size ((BalaCollection*) _tmp34_);
				_tmp36_ = _tmp35_;
				_clause_size = _tmp36_;
				_clause_index = -1;
				while (TRUE) {
					gint _tmp37_;
					gint _tmp38_;
					BalaCatchClause* clause = NULL;
					BalaList* _tmp39_;
					gpointer _tmp40_;
					BalaArrayList* _tmp71_;
					BalaCatchClause* _tmp72_;
					BalaDataType* _tmp73_;
					BalaDataType* _tmp74_;
					BalaErrorType* _tmp75_;
					_clause_index = _clause_index + 1;
					_tmp37_ = _clause_index;
					_tmp38_ = _clause_size;
					if (!(_tmp37_ < _tmp38_)) {
						break;
					}
					_tmp39_ = _clause_list;
					_tmp40_ = bala_list_get (_tmp39_, _clause_index);
					clause = (BalaCatchClause*) _tmp40_;
					{
						BalaArrayList* _node_error_type_list = NULL;
						BalaArrayList* _tmp41_;
						BalaArrayList* _tmp42_;
						gint _node_error_type_size = 0;
						BalaArrayList* _tmp43_;
						gint _tmp44_;
						gint _tmp45_;
						gint _node_error_type_index = 0;
						_tmp41_ = error_types;
						_tmp42_ = _bala_iterable_ref0 (_tmp41_);
						_node_error_type_list = _tmp42_;
						_tmp43_ = _node_error_type_list;
						_tmp44_ = bala_collection_get_size ((BalaCollection*) _tmp43_);
						_tmp45_ = _tmp44_;
						_node_error_type_size = _tmp45_;
						_node_error_type_index = -1;
						while (TRUE) {
							gint _tmp46_;
							gint _tmp47_;
							BalaDataType* node_error_type = NULL;
							BalaArrayList* _tmp48_;
							gpointer _tmp49_;
							gboolean _tmp50_ = FALSE;
							BalaCatchClause* _tmp51_;
							BalaDataType* _tmp52_;
							BalaDataType* _tmp53_;
							_node_error_type_index = _node_error_type_index + 1;
							_tmp46_ = _node_error_type_index;
							_tmp47_ = _node_error_type_size;
							if (!(_tmp46_ < _tmp47_)) {
								break;
							}
							_tmp48_ = _node_error_type_list;
							_tmp49_ = bala_list_get ((BalaList*) _tmp48_, _node_error_type_index);
							node_error_type = (BalaDataType*) _tmp49_;
							_tmp51_ = clause;
							_tmp52_ = bala_catch_clause_get_error_type (_tmp51_);
							_tmp53_ = _tmp52_;
							if (_tmp53_ == NULL) {
								_tmp50_ = TRUE;
							} else {
								BalaDataType* _tmp54_;
								BalaCatchClause* _tmp55_;
								BalaDataType* _tmp56_;
								BalaDataType* _tmp57_;
								_tmp54_ = node_error_type;
								_tmp55_ = clause;
								_tmp56_ = bala_catch_clause_get_error_type (_tmp55_);
								_tmp57_ = _tmp56_;
								_tmp50_ = bala_data_type_compatible (_tmp54_, _tmp57_);
							}
							if (_tmp50_) {
								BalaArrayList* _tmp58_;
								BalaDataType* _tmp59_;
								_tmp58_ = handled_error_types;
								_tmp59_ = node_error_type;
								bala_collection_add ((BalaCollection*) _tmp58_, _tmp59_);
							}
							_bala_code_node_unref0 (node_error_type);
						}
						_bala_iterable_unref0 (_node_error_type_list);
					}
					{
						BalaArrayList* _handled_error_type_list = NULL;
						BalaArrayList* _tmp60_;
						BalaArrayList* _tmp61_;
						gint _handled_error_type_size = 0;
						BalaArrayList* _tmp62_;
						gint _tmp63_;
						gint _tmp64_;
						gint _handled_error_type_index = 0;
						_tmp60_ = handled_error_types;
						_tmp61_ = _bala_iterable_ref0 (_tmp60_);
						_handled_error_type_list = _tmp61_;
						_tmp62_ = _handled_error_type_list;
						_tmp63_ = bala_collection_get_size ((BalaCollection*) _tmp62_);
						_tmp64_ = _tmp63_;
						_handled_error_type_size = _tmp64_;
						_handled_error_type_index = -1;
						while (TRUE) {
							gint _tmp65_;
							gint _tmp66_;
							BalaDataType* handled_error_type = NULL;
							BalaArrayList* _tmp67_;
							gpointer _tmp68_;
							BalaArrayList* _tmp69_;
							BalaDataType* _tmp70_;
							_handled_error_type_index = _handled_error_type_index + 1;
							_tmp65_ = _handled_error_type_index;
							_tmp66_ = _handled_error_type_size;
							if (!(_tmp65_ < _tmp66_)) {
								break;
							}
							_tmp67_ = _handled_error_type_list;
							_tmp68_ = bala_list_get ((BalaList*) _tmp67_, _handled_error_type_index);
							handled_error_type = (BalaDataType*) _tmp68_;
							_tmp69_ = error_types;
							_tmp70_ = handled_error_type;
							bala_collection_remove ((BalaCollection*) _tmp69_, _tmp70_);
							_bala_code_node_unref0 (handled_error_type);
						}
						_bala_iterable_unref0 (_handled_error_type_list);
					}
					_tmp71_ = handled_error_types;
					bala_collection_clear ((BalaCollection*) _tmp71_);
					_tmp72_ = clause;
					_tmp73_ = bala_catch_clause_get_error_type (_tmp72_);
					_tmp74_ = _tmp73_;
					_tmp75_ = ((BalaCCodeBaseModule*) self)->gerror_type;
					if (bala_data_type_equals (_tmp74_, (BalaDataType*) _tmp75_)) {
						BalaCCodeFunction* _tmp76_;
						BalaCCodeFunction* _tmp77_;
						BalaCatchClause* _tmp78_;
						const gchar* _tmp79_;
						const gchar* _tmp80_;
						has_general_catch_clause = TRUE;
						_tmp76_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
						_tmp77_ = _tmp76_;
						_tmp78_ = clause;
						_tmp79_ = bala_catch_clause_get_clabel_name (_tmp78_);
						_tmp80_ = _tmp79_;
						bala_ccode_function_add_goto (_tmp77_, _tmp80_);
						_bala_code_node_unref0 (clause);
						break;
					} else {
						BalaErrorType* catch_type = NULL;
						BalaCatchClause* _tmp81_;
						BalaDataType* _tmp82_;
						BalaDataType* _tmp83_;
						BalaErrorType* _tmp84_;
						BalaErrorType* _tmp85_;
						BalaErrorCode* _tmp86_;
						BalaErrorCode* _tmp87_;
						BalaCCodeFunction* _tmp132_;
						BalaCCodeFunction* _tmp133_;
						BalaCatchClause* _tmp134_;
						const gchar* _tmp135_;
						const gchar* _tmp136_;
						BalaCCodeFunction* _tmp137_;
						BalaCCodeFunction* _tmp138_;
						_tmp81_ = clause;
						_tmp82_ = bala_catch_clause_get_error_type (_tmp81_);
						_tmp83_ = _tmp82_;
						_tmp84_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp83_, BALA_TYPE_ERROR_TYPE) ? ((BalaErrorType*) _tmp83_) : NULL);
						catch_type = _tmp84_;
						_tmp85_ = catch_type;
						_tmp86_ = bala_error_type_get_error_code (_tmp85_);
						_tmp87_ = _tmp86_;
						if (_tmp87_ != NULL) {
							BalaCCodeFunctionCall* error_match = NULL;
							BalaCCodeIdentifier* _tmp88_;
							BalaCCodeIdentifier* _tmp89_;
							BalaCCodeFunctionCall* _tmp90_;
							BalaCCodeFunctionCall* _tmp91_;
							BalaCCodeFunctionCall* _tmp92_;
							BalaCCodeExpression* _tmp93_;
							BalaCCodeExpression* _tmp94_;
							BalaCCodeFunctionCall* _tmp95_;
							BalaErrorType* _tmp96_;
							BalaTypeSymbol* _tmp97_;
							BalaTypeSymbol* _tmp98_;
							gchar* _tmp99_;
							gchar* _tmp100_;
							BalaCCodeIdentifier* _tmp101_;
							BalaCCodeIdentifier* _tmp102_;
							BalaCCodeFunctionCall* _tmp103_;
							BalaErrorType* _tmp104_;
							BalaErrorCode* _tmp105_;
							BalaErrorCode* _tmp106_;
							gchar* _tmp107_;
							gchar* _tmp108_;
							BalaCCodeIdentifier* _tmp109_;
							BalaCCodeIdentifier* _tmp110_;
							BalaCCodeFunction* _tmp111_;
							BalaCCodeFunction* _tmp112_;
							BalaCCodeFunctionCall* _tmp113_;
							_tmp88_ = bala_ccode_identifier_new ("g_error_matches");
							_tmp89_ = _tmp88_;
							_tmp90_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp89_);
							_tmp91_ = _tmp90_;
							_bala_ccode_node_unref0 (_tmp89_);
							error_match = _tmp91_;
							_tmp92_ = error_match;
							_tmp93_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
							_tmp94_ = _tmp93_;
							bala_ccode_function_call_add_argument (_tmp92_, _tmp94_);
							_bala_ccode_node_unref0 (_tmp94_);
							_tmp95_ = error_match;
							_tmp96_ = catch_type;
							_tmp97_ = bala_data_type_get_type_symbol ((BalaDataType*) _tmp96_);
							_tmp98_ = _tmp97_;
							_tmp99_ = bala_get_ccode_upper_case_name ((BalaSymbol*) _tmp98_, NULL);
							_tmp100_ = _tmp99_;
							_tmp101_ = bala_ccode_identifier_new (_tmp100_);
							_tmp102_ = _tmp101_;
							bala_ccode_function_call_add_argument (_tmp95_, (BalaCCodeExpression*) _tmp102_);
							_bala_ccode_node_unref0 (_tmp102_);
							_g_free0 (_tmp100_);
							_tmp103_ = error_match;
							_tmp104_ = catch_type;
							_tmp105_ = bala_error_type_get_error_code (_tmp104_);
							_tmp106_ = _tmp105_;
							_tmp107_ = bala_get_ccode_name ((BalaCodeNode*) _tmp106_);
							_tmp108_ = _tmp107_;
							_tmp109_ = bala_ccode_identifier_new (_tmp108_);
							_tmp110_ = _tmp109_;
							bala_ccode_function_call_add_argument (_tmp103_, (BalaCCodeExpression*) _tmp110_);
							_bala_ccode_node_unref0 (_tmp110_);
							_g_free0 (_tmp108_);
							_tmp111_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
							_tmp112_ = _tmp111_;
							_tmp113_ = error_match;
							bala_ccode_function_open_if (_tmp112_, (BalaCCodeExpression*) _tmp113_);
							_bala_ccode_node_unref0 (error_match);
						} else {
							BalaCCodeBinaryExpression* ccond = NULL;
							BalaCCodeExpression* _tmp114_;
							BalaCCodeExpression* _tmp115_;
							BalaCCodeMemberAccess* _tmp116_;
							BalaCCodeMemberAccess* _tmp117_;
							BalaCatchClause* _tmp118_;
							BalaDataType* _tmp119_;
							BalaDataType* _tmp120_;
							BalaTypeSymbol* _tmp121_;
							BalaTypeSymbol* _tmp122_;
							gchar* _tmp123_;
							gchar* _tmp124_;
							BalaCCodeIdentifier* _tmp125_;
							BalaCCodeIdentifier* _tmp126_;
							BalaCCodeBinaryExpression* _tmp127_;
							BalaCCodeBinaryExpression* _tmp128_;
							BalaCCodeFunction* _tmp129_;
							BalaCCodeFunction* _tmp130_;
							BalaCCodeBinaryExpression* _tmp131_;
							_tmp114_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
							_tmp115_ = _tmp114_;
							_tmp116_ = bala_ccode_member_access_new_pointer (_tmp115_, "domain");
							_tmp117_ = _tmp116_;
							_tmp118_ = clause;
							_tmp119_ = bala_catch_clause_get_error_type (_tmp118_);
							_tmp120_ = _tmp119_;
							_tmp121_ = bala_data_type_get_type_symbol (_tmp120_);
							_tmp122_ = _tmp121_;
							_tmp123_ = bala_get_ccode_upper_case_name ((BalaSymbol*) _tmp122_, NULL);
							_tmp124_ = _tmp123_;
							_tmp125_ = bala_ccode_identifier_new (_tmp124_);
							_tmp126_ = _tmp125_;
							_tmp127_ = bala_ccode_binary_expression_new (BALA_CCODE_BINARY_OPERATOR_EQUALITY, (BalaCCodeExpression*) _tmp117_, (BalaCCodeExpression*) _tmp126_);
							_tmp128_ = _tmp127_;
							_bala_ccode_node_unref0 (_tmp126_);
							_g_free0 (_tmp124_);
							_bala_ccode_node_unref0 (_tmp117_);
							_bala_ccode_node_unref0 (_tmp115_);
							ccond = _tmp128_;
							_tmp129_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
							_tmp130_ = _tmp129_;
							_tmp131_ = ccond;
							bala_ccode_function_open_if (_tmp130_, (BalaCCodeExpression*) _tmp131_);
							_bala_ccode_node_unref0 (ccond);
						}
						_tmp132_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
						_tmp133_ = _tmp132_;
						_tmp134_ = clause;
						_tmp135_ = bala_catch_clause_get_clabel_name (_tmp134_);
						_tmp136_ = _tmp135_;
						bala_ccode_function_add_goto (_tmp133_, _tmp136_);
						_tmp137_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
						_tmp138_ = _tmp137_;
						bala_ccode_function_close (_tmp138_);
						_bala_code_node_unref0 (catch_type);
					}
					_bala_code_node_unref0 (clause);
				}
				_bala_iterable_unref0 (_clause_list);
			}
			_bala_iterable_unref0 (handled_error_types);
		}
		if (has_general_catch_clause) {
		} else {
			BalaArrayList* _tmp139_;
			gint _tmp140_;
			gint _tmp141_;
			_tmp139_ = error_types;
			_tmp140_ = bala_collection_get_size ((BalaCollection*) _tmp139_);
			_tmp141_ = _tmp140_;
			if (_tmp141_ > 0) {
				BalaCCodeFunction* _tmp142_;
				BalaCCodeFunction* _tmp143_;
				gint _tmp144_;
				gint _tmp145_;
				gchar* _tmp146_;
				gchar* _tmp147_;
				_tmp142_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp143_ = _tmp142_;
				_tmp144_ = bala_ccode_base_module_get_current_try_id ((BalaCCodeBaseModule*) self);
				_tmp145_ = _tmp144_;
				_tmp146_ = g_strdup_printf ("__finally%d", _tmp145_);
				_tmp147_ = _tmp146_;
				bala_ccode_function_add_goto (_tmp143_, _tmp147_);
				_g_free0 (_tmp147_);
			} else {
				if (bala_gerror_module_in_finally_block (self, node)) {
				} else {
					BalaCCodeExpression* _tmp148_;
					BalaCCodeExpression* _tmp149_;
					BalaTryStatement* _tmp150_;
					BalaTryStatement* _tmp151_;
					_tmp148_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
					_tmp149_ = _tmp148_;
					_tmp150_ = bala_ccode_base_module_get_current_try ((BalaCCodeBaseModule*) self);
					_tmp151_ = _tmp150_;
					bala_gerror_module_uncaught_error_statement (self, _tmp149_, TRUE, (BalaCodeNode*) _tmp151_);
					_bala_ccode_node_unref0 (_tmp149_);
				}
			}
		}
		_bala_iterable_unref0 (error_types);
	} else {
		gboolean _tmp152_ = FALSE;
		BalaMethod* _tmp153_;
		BalaMethod* _tmp154_;
		_tmp153_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
		_tmp154_ = _tmp153_;
		if (_tmp154_ != NULL) {
			BalaMethod* _tmp155_;
			BalaMethod* _tmp156_;
			gboolean _tmp157_;
			gboolean _tmp158_;
			_tmp155_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
			_tmp156_ = _tmp155_;
			_tmp157_ = bala_code_node_get_tree_can_fail ((BalaCodeNode*) _tmp156_);
			_tmp158_ = _tmp157_;
			_tmp152_ = _tmp158_;
		} else {
			_tmp152_ = FALSE;
		}
		if (_tmp152_) {
			BalaCCodeBinaryExpression* ccond = NULL;
			BalaArrayList* error_types = NULL;
			GEqualFunc _tmp159_;
			BalaArrayList* _tmp160_;
			BalaMethod* _tmp161_;
			BalaMethod* _tmp162_;
			BalaArrayList* _tmp163_;
			BalaCCodeBinaryExpression* _tmp194_;
			ccond = NULL;
			_tmp159_ = g_direct_equal;
			_tmp160_ = bala_array_list_new (BALA_TYPE_DATA_TYPE, (GBoxedCopyFunc) bala_code_node_ref, (GDestroyNotify) bala_code_node_unref, _tmp159_);
			error_types = _tmp160_;
			_tmp161_ = bala_ccode_base_module_get_current_method ((BalaCCodeBaseModule*) self);
			_tmp162_ = _tmp161_;
			_tmp163_ = error_types;
			bala_code_node_get_error_types ((BalaCodeNode*) _tmp162_, (BalaCollection*) _tmp163_, NULL);
			{
				BalaArrayList* _error_type_list = NULL;
				BalaArrayList* _tmp164_;
				BalaArrayList* _tmp165_;
				gint _error_type_size = 0;
				BalaArrayList* _tmp166_;
				gint _tmp167_;
				gint _tmp168_;
				gint _error_type_index = 0;
				_tmp164_ = error_types;
				_tmp165_ = _bala_iterable_ref0 (_tmp164_);
				_error_type_list = _tmp165_;
				_tmp166_ = _error_type_list;
				_tmp167_ = bala_collection_get_size ((BalaCollection*) _tmp166_);
				_tmp168_ = _tmp167_;
				_error_type_size = _tmp168_;
				_error_type_index = -1;
				while (TRUE) {
					gint _tmp169_;
					gint _tmp170_;
					BalaDataType* error_type = NULL;
					BalaArrayList* _tmp171_;
					gpointer _tmp172_;
					BalaDataType* _tmp173_;
					BalaErrorType* _tmp174_;
					BalaCCodeBinaryExpression* domain_check = NULL;
					BalaCCodeExpression* _tmp175_;
					BalaCCodeExpression* _tmp176_;
					BalaCCodeMemberAccess* _tmp177_;
					BalaCCodeMemberAccess* _tmp178_;
					BalaDataType* _tmp179_;
					BalaTypeSymbol* _tmp180_;
					BalaTypeSymbol* _tmp181_;
					gchar* _tmp182_;
					gchar* _tmp183_;
					BalaCCodeIdentifier* _tmp184_;
					BalaCCodeIdentifier* _tmp185_;
					BalaCCodeBinaryExpression* _tmp186_;
					BalaCCodeBinaryExpression* _tmp187_;
					BalaCCodeBinaryExpression* _tmp188_;
					_error_type_index = _error_type_index + 1;
					_tmp169_ = _error_type_index;
					_tmp170_ = _error_type_size;
					if (!(_tmp169_ < _tmp170_)) {
						break;
					}
					_tmp171_ = _error_type_list;
					_tmp172_ = bala_list_get ((BalaList*) _tmp171_, _error_type_index);
					error_type = (BalaDataType*) _tmp172_;
					_tmp173_ = error_type;
					_tmp174_ = ((BalaCCodeBaseModule*) self)->gerror_type;
					if (bala_data_type_equals (_tmp173_, (BalaDataType*) _tmp174_)) {
						_bala_ccode_node_unref0 (ccond);
						ccond = NULL;
						_bala_code_node_unref0 (error_type);
						break;
					}
					_tmp175_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
					_tmp176_ = _tmp175_;
					_tmp177_ = bala_ccode_member_access_new_pointer (_tmp176_, "domain");
					_tmp178_ = _tmp177_;
					_tmp179_ = error_type;
					_tmp180_ = bala_data_type_get_type_symbol (_tmp179_);
					_tmp181_ = _tmp180_;
					_tmp182_ = bala_get_ccode_upper_case_name ((BalaSymbol*) _tmp181_, NULL);
					_tmp183_ = _tmp182_;
					_tmp184_ = bala_ccode_identifier_new (_tmp183_);
					_tmp185_ = _tmp184_;
					_tmp186_ = bala_ccode_binary_expression_new (BALA_CCODE_BINARY_OPERATOR_EQUALITY, (BalaCCodeExpression*) _tmp178_, (BalaCCodeExpression*) _tmp185_);
					_tmp187_ = _tmp186_;
					_bala_ccode_node_unref0 (_tmp185_);
					_g_free0 (_tmp183_);
					_bala_ccode_node_unref0 (_tmp178_);
					_bala_ccode_node_unref0 (_tmp176_);
					domain_check = _tmp187_;
					_tmp188_ = ccond;
					if (_tmp188_ == NULL) {
						BalaCCodeBinaryExpression* _tmp189_;
						BalaCCodeBinaryExpression* _tmp190_;
						_tmp189_ = domain_check;
						_tmp190_ = _bala_ccode_node_ref0 (_tmp189_);
						_bala_ccode_node_unref0 (ccond);
						ccond = _tmp190_;
					} else {
						BalaCCodeBinaryExpression* _tmp191_;
						BalaCCodeBinaryExpression* _tmp192_;
						BalaCCodeBinaryExpression* _tmp193_;
						_tmp191_ = ccond;
						_tmp192_ = domain_check;
						_tmp193_ = bala_ccode_binary_expression_new (BALA_CCODE_BINARY_OPERATOR_OR, (BalaCCodeExpression*) _tmp191_, (BalaCCodeExpression*) _tmp192_);
						_bala_ccode_node_unref0 (ccond);
						ccond = _tmp193_;
					}
					_bala_ccode_node_unref0 (domain_check);
					_bala_code_node_unref0 (error_type);
				}
				_bala_iterable_unref0 (_error_type_list);
			}
			_tmp194_ = ccond;
			if (_tmp194_ != NULL) {
				BalaCCodeFunction* _tmp195_;
				BalaCCodeFunction* _tmp196_;
				BalaCCodeBinaryExpression* _tmp197_;
				BalaCCodeExpression* _tmp198_;
				BalaCCodeExpression* _tmp199_;
				BalaCCodeFunction* _tmp200_;
				BalaCCodeFunction* _tmp201_;
				BalaCCodeExpression* _tmp202_;
				BalaCCodeExpression* _tmp203_;
				BalaCCodeFunction* _tmp204_;
				BalaCCodeFunction* _tmp205_;
				_tmp195_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp196_ = _tmp195_;
				_tmp197_ = ccond;
				bala_ccode_function_open_if (_tmp196_, (BalaCCodeExpression*) _tmp197_);
				_tmp198_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
				_tmp199_ = _tmp198_;
				bala_gerror_module_return_with_exception (self, _tmp199_);
				_bala_ccode_node_unref0 (_tmp199_);
				_tmp200_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp201_ = _tmp200_;
				bala_ccode_function_add_else (_tmp201_);
				_tmp202_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
				_tmp203_ = _tmp202_;
				bala_gerror_module_uncaught_error_statement (self, _tmp203_, FALSE, NULL);
				_bala_ccode_node_unref0 (_tmp203_);
				_tmp204_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
				_tmp205_ = _tmp204_;
				bala_ccode_function_close (_tmp205_);
			} else {
				BalaCCodeExpression* _tmp206_;
				BalaCCodeExpression* _tmp207_;
				_tmp206_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
				_tmp207_ = _tmp206_;
				bala_gerror_module_return_with_exception (self, _tmp207_);
				_bala_ccode_node_unref0 (_tmp207_);
			}
			_bala_iterable_unref0 (error_types);
			_bala_ccode_node_unref0 (ccond);
		} else {
			BalaCCodeExpression* _tmp208_;
			BalaCCodeExpression* _tmp209_;
			_tmp208_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
			_tmp209_ = _tmp208_;
			bala_gerror_module_uncaught_error_statement (self, _tmp209_, FALSE, NULL);
			_bala_ccode_node_unref0 (_tmp209_);
		}
	}
	if (!always_fails) {
		BalaCCodeFunction* _tmp210_;
		BalaCCodeFunction* _tmp211_;
		_tmp210_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
		_tmp211_ = _tmp210_;
		bala_ccode_function_close (_tmp211_);
	}
}

static void
bala_gerror_module_real_visit_try_statement (BalaCodeVisitor* base,
                                             BalaTryStatement* stmt)
{
	BalaGErrorModule * self;
	gint this_try_id = 0;
	gint _tmp0_;
	gint _tmp1_;
	BalaTryStatement* old_try = NULL;
	BalaTryStatement* _tmp2_;
	BalaTryStatement* _tmp3_;
	BalaTryStatement* _tmp4_;
	gint old_try_id = 0;
	gint _tmp5_;
	gint _tmp6_;
	gboolean old_is_in_catch = FALSE;
	BalaCatchClause* old_catch = NULL;
	BalaCatchClause* _tmp7_;
	BalaCatchClause* _tmp8_;
	BalaCatchClause* _tmp9_;
	BalaBlock* _tmp27_;
	BalaBlock* _tmp28_;
	BalaTryStatement* _tmp44_;
	BalaCatchClause* _tmp45_;
	BalaCCodeFunction* _tmp46_;
	BalaCCodeFunction* _tmp47_;
	gchar* _tmp48_;
	gchar* _tmp49_;
	BalaBlock* _tmp50_;
	BalaBlock* _tmp51_;
	gboolean _tmp58_;
	gboolean _tmp59_;
	self = (BalaGErrorModule*) base;
	g_return_if_fail (stmt != NULL);
	_tmp0_ = bala_ccode_base_module_get_next_try_id ((BalaCCodeBaseModule*) self);
	_tmp1_ = _tmp0_;
	bala_ccode_base_module_set_next_try_id ((BalaCCodeBaseModule*) self, _tmp1_ + 1);
	this_try_id = _tmp1_;
	_tmp2_ = bala_ccode_base_module_get_current_try ((BalaCCodeBaseModule*) self);
	_tmp3_ = _tmp2_;
	_tmp4_ = _bala_code_node_ref0 (_tmp3_);
	old_try = _tmp4_;
	_tmp5_ = bala_ccode_base_module_get_current_try_id ((BalaCCodeBaseModule*) self);
	_tmp6_ = _tmp5_;
	old_try_id = _tmp6_;
	old_is_in_catch = self->priv->is_in_catch;
	_tmp7_ = bala_ccode_base_module_get_current_catch ((BalaCCodeBaseModule*) self);
	_tmp8_ = _tmp7_;
	_tmp9_ = _bala_code_node_ref0 (_tmp8_);
	old_catch = _tmp9_;
	bala_ccode_base_module_set_current_try ((BalaCCodeBaseModule*) self, stmt);
	bala_ccode_base_module_set_current_try_id ((BalaCCodeBaseModule*) self, this_try_id);
	self->priv->is_in_catch = TRUE;
	{
		BalaList* _clause_list = NULL;
		BalaList* _tmp10_;
		BalaList* _tmp11_;
		gint _clause_size = 0;
		BalaList* _tmp12_;
		gint _tmp13_;
		gint _tmp14_;
		gint _clause_index = 0;
		_tmp10_ = bala_try_statement_get_catch_clauses (stmt);
		_tmp11_ = _bala_iterable_ref0 (_tmp10_);
		_clause_list = _tmp11_;
		_tmp12_ = _clause_list;
		_tmp13_ = bala_collection_get_size ((BalaCollection*) _tmp12_);
		_tmp14_ = _tmp13_;
		_clause_size = _tmp14_;
		_clause_index = -1;
		while (TRUE) {
			gint _tmp15_;
			gint _tmp16_;
			BalaCatchClause* clause = NULL;
			BalaList* _tmp17_;
			gpointer _tmp18_;
			BalaCatchClause* _tmp19_;
			BalaCatchClause* _tmp20_;
			BalaDataType* _tmp21_;
			BalaDataType* _tmp22_;
			gchar* _tmp23_;
			gchar* _tmp24_;
			gchar* _tmp25_;
			gchar* _tmp26_;
			_clause_index = _clause_index + 1;
			_tmp15_ = _clause_index;
			_tmp16_ = _clause_size;
			if (!(_tmp15_ < _tmp16_)) {
				break;
			}
			_tmp17_ = _clause_list;
			_tmp18_ = bala_list_get (_tmp17_, _clause_index);
			clause = (BalaCatchClause*) _tmp18_;
			_tmp19_ = clause;
			_tmp20_ = clause;
			_tmp21_ = bala_catch_clause_get_error_type (_tmp20_);
			_tmp22_ = _tmp21_;
			_tmp23_ = bala_get_ccode_lower_case_name ((BalaCodeNode*) _tmp22_, NULL);
			_tmp24_ = _tmp23_;
			_tmp25_ = g_strdup_printf ("__catch%d_%s", this_try_id, _tmp24_);
			_tmp26_ = _tmp25_;
			bala_catch_clause_set_clabel_name (_tmp19_, _tmp26_);
			_g_free0 (_tmp26_);
			_g_free0 (_tmp24_);
			_bala_code_node_unref0 (clause);
		}
		_bala_iterable_unref0 (_clause_list);
	}
	self->priv->is_in_catch = FALSE;
	_tmp27_ = bala_try_statement_get_body (stmt);
	_tmp28_ = _tmp27_;
	bala_code_node_emit ((BalaCodeNode*) _tmp28_, (BalaCodeGenerator*) self);
	self->priv->is_in_catch = TRUE;
	{
		BalaList* _clause_list = NULL;
		BalaList* _tmp29_;
		BalaList* _tmp30_;
		gint _clause_size = 0;
		BalaList* _tmp31_;
		gint _tmp32_;
		gint _tmp33_;
		gint _clause_index = 0;
		_tmp29_ = bala_try_statement_get_catch_clauses (stmt);
		_tmp30_ = _bala_iterable_ref0 (_tmp29_);
		_clause_list = _tmp30_;
		_tmp31_ = _clause_list;
		_tmp32_ = bala_collection_get_size ((BalaCollection*) _tmp31_);
		_tmp33_ = _tmp32_;
		_clause_size = _tmp33_;
		_clause_index = -1;
		while (TRUE) {
			gint _tmp34_;
			gint _tmp35_;
			BalaCatchClause* clause = NULL;
			BalaList* _tmp36_;
			gpointer _tmp37_;
			BalaCatchClause* _tmp38_;
			BalaCCodeFunction* _tmp39_;
			BalaCCodeFunction* _tmp40_;
			gchar* _tmp41_;
			gchar* _tmp42_;
			BalaCatchClause* _tmp43_;
			_clause_index = _clause_index + 1;
			_tmp34_ = _clause_index;
			_tmp35_ = _clause_size;
			if (!(_tmp34_ < _tmp35_)) {
				break;
			}
			_tmp36_ = _clause_list;
			_tmp37_ = bala_list_get (_tmp36_, _clause_index);
			clause = (BalaCatchClause*) _tmp37_;
			_tmp38_ = clause;
			bala_ccode_base_module_set_current_catch ((BalaCCodeBaseModule*) self, _tmp38_);
			_tmp39_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
			_tmp40_ = _tmp39_;
			_tmp41_ = g_strdup_printf ("__finally%d", this_try_id);
			_tmp42_ = _tmp41_;
			bala_ccode_function_add_goto (_tmp40_, _tmp42_);
			_g_free0 (_tmp42_);
			_tmp43_ = clause;
			bala_code_node_emit ((BalaCodeNode*) _tmp43_, (BalaCodeGenerator*) self);
			_bala_code_node_unref0 (clause);
		}
		_bala_iterable_unref0 (_clause_list);
	}
	_tmp44_ = old_try;
	bala_ccode_base_module_set_current_try ((BalaCCodeBaseModule*) self, _tmp44_);
	bala_ccode_base_module_set_current_try_id ((BalaCCodeBaseModule*) self, old_try_id);
	self->priv->is_in_catch = old_is_in_catch;
	_tmp45_ = old_catch;
	bala_ccode_base_module_set_current_catch ((BalaCCodeBaseModule*) self, _tmp45_);
	_tmp46_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp47_ = _tmp46_;
	_tmp48_ = g_strdup_printf ("__finally%d", this_try_id);
	_tmp49_ = _tmp48_;
	bala_ccode_function_add_label (_tmp47_, _tmp49_);
	_g_free0 (_tmp49_);
	_tmp50_ = bala_try_statement_get_finally_body (stmt);
	_tmp51_ = _tmp50_;
	if (_tmp51_ != NULL) {
		gint _tmp52_;
		gint _tmp53_;
		BalaBlock* _tmp54_;
		BalaBlock* _tmp55_;
		gint _tmp56_;
		gint _tmp57_;
		_tmp52_ = bala_ccode_base_module_get_current_inner_error_id ((BalaCCodeBaseModule*) self);
		_tmp53_ = _tmp52_;
		bala_ccode_base_module_set_current_inner_error_id ((BalaCCodeBaseModule*) self, _tmp53_ + 1);
		_tmp54_ = bala_try_statement_get_finally_body (stmt);
		_tmp55_ = _tmp54_;
		bala_code_node_emit ((BalaCodeNode*) _tmp55_, (BalaCodeGenerator*) self);
		_tmp56_ = bala_ccode_base_module_get_current_inner_error_id ((BalaCCodeBaseModule*) self);
		_tmp57_ = _tmp56_;
		bala_ccode_base_module_set_current_inner_error_id ((BalaCCodeBaseModule*) self, _tmp57_ - 1);
	}
	_tmp58_ = bala_try_statement_get_after_try_block_reachable (stmt);
	_tmp59_ = _tmp58_;
	bala_ccode_base_module_add_simple_check ((BalaCCodeBaseModule*) self, (BalaCodeNode*) stmt, !_tmp59_);
	_bala_code_node_unref0 (old_catch);
	_bala_code_node_unref0 (old_try);
}

static void
bala_gerror_module_real_visit_catch_clause (BalaCodeVisitor* base,
                                            BalaCatchClause* clause)
{
	BalaGErrorModule * self;
	BalaErrorType* error_type = NULL;
	BalaDataType* _tmp0_;
	BalaDataType* _tmp1_;
	BalaErrorType* _tmp2_;
	BalaErrorType* _tmp3_;
	BalaErrorDomain* _tmp4_;
	BalaErrorDomain* _tmp5_;
	BalaCCodeFunction* _tmp10_;
	BalaCCodeFunction* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	BalaCCodeFunction* _tmp14_;
	BalaCCodeFunction* _tmp15_;
	gboolean _tmp16_ = FALSE;
	BalaLocalVariable* _tmp17_;
	BalaLocalVariable* _tmp18_;
	BalaBlock* _tmp58_;
	BalaBlock* _tmp59_;
	BalaCCodeFunction* _tmp60_;
	BalaCCodeFunction* _tmp61_;
	self = (BalaGErrorModule*) base;
	g_return_if_fail (clause != NULL);
	bala_ccode_base_module_set_current_method_inner_error ((BalaCCodeBaseModule*) self, TRUE);
	_tmp0_ = bala_catch_clause_get_error_type (clause);
	_tmp1_ = _tmp0_;
	_tmp2_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, BALA_TYPE_ERROR_TYPE, BalaErrorType));
	error_type = _tmp2_;
	_tmp3_ = error_type;
	_tmp4_ = bala_error_type_get_error_domain (_tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp5_ != NULL) {
		BalaErrorType* _tmp6_;
		BalaErrorDomain* _tmp7_;
		BalaErrorDomain* _tmp8_;
		BalaCCodeFile* _tmp9_;
		_tmp6_ = error_type;
		_tmp7_ = bala_error_type_get_error_domain (_tmp6_);
		_tmp8_ = _tmp7_;
		_tmp9_ = ((BalaCCodeBaseModule*) self)->cfile;
		bala_ccode_base_module_generate_error_domain_declaration ((BalaCCodeBaseModule*) self, _tmp8_, _tmp9_);
	}
	_tmp10_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp11_ = _tmp10_;
	_tmp12_ = bala_catch_clause_get_clabel_name (clause);
	_tmp13_ = _tmp12_;
	bala_ccode_function_add_label (_tmp11_, _tmp13_);
	_tmp14_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp15_ = _tmp14_;
	bala_ccode_function_open_block (_tmp15_);
	_tmp17_ = bala_catch_clause_get_error_variable (clause);
	_tmp18_ = _tmp17_;
	if (_tmp18_ != NULL) {
		BalaLocalVariable* _tmp19_;
		BalaLocalVariable* _tmp20_;
		gboolean _tmp21_;
		gboolean _tmp22_;
		_tmp19_ = bala_catch_clause_get_error_variable (clause);
		_tmp20_ = _tmp19_;
		_tmp21_ = bala_symbol_get_used ((BalaSymbol*) _tmp20_);
		_tmp22_ = _tmp21_;
		_tmp16_ = _tmp22_;
	} else {
		_tmp16_ = FALSE;
	}
	if (_tmp16_) {
		BalaLocalVariable* _tmp23_;
		BalaLocalVariable* _tmp24_;
		BalaCCodeFunction* _tmp25_;
		BalaCCodeFunction* _tmp26_;
		BalaLocalVariable* _tmp27_;
		BalaLocalVariable* _tmp28_;
		gchar* _tmp29_;
		gchar* _tmp30_;
		BalaCCodeExpression* _tmp31_;
		BalaCCodeExpression* _tmp32_;
		BalaCCodeExpression* _tmp33_;
		BalaCCodeExpression* _tmp34_;
		BalaCCodeFunction* _tmp35_;
		BalaCCodeFunction* _tmp36_;
		BalaCCodeExpression* _tmp37_;
		BalaCCodeExpression* _tmp38_;
		BalaCCodeConstant* _tmp39_;
		BalaCCodeConstant* _tmp40_;
		_tmp23_ = bala_catch_clause_get_error_variable (clause);
		_tmp24_ = _tmp23_;
		bala_code_visitor_visit_local_variable ((BalaCodeVisitor*) self, _tmp24_);
		_tmp25_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
		_tmp26_ = _tmp25_;
		_tmp27_ = bala_catch_clause_get_error_variable (clause);
		_tmp28_ = _tmp27_;
		_tmp29_ = bala_ccode_base_module_get_local_cname ((BalaCCodeBaseModule*) self, _tmp28_);
		_tmp30_ = _tmp29_;
		_tmp31_ = bala_ccode_base_module_get_variable_cexpression ((BalaCCodeBaseModule*) self, _tmp30_);
		_tmp32_ = _tmp31_;
		_tmp33_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
		_tmp34_ = _tmp33_;
		bala_ccode_function_add_assignment (_tmp26_, _tmp32_, _tmp34_);
		_bala_ccode_node_unref0 (_tmp34_);
		_bala_ccode_node_unref0 (_tmp32_);
		_g_free0 (_tmp30_);
		_tmp35_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
		_tmp36_ = _tmp35_;
		_tmp37_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
		_tmp38_ = _tmp37_;
		_tmp39_ = bala_ccode_constant_new ("NULL");
		_tmp40_ = _tmp39_;
		bala_ccode_function_add_assignment (_tmp36_, _tmp38_, (BalaCCodeExpression*) _tmp40_);
		_bala_ccode_node_unref0 (_tmp40_);
		_bala_ccode_node_unref0 (_tmp38_);
	} else {
		BalaLocalVariable* _tmp41_;
		BalaLocalVariable* _tmp42_;
		BalaCCodeFile* _tmp45_;
		BalaCCodeFunctionCall* cclear = NULL;
		BalaCCodeIdentifier* _tmp46_;
		BalaCCodeIdentifier* _tmp47_;
		BalaCCodeFunctionCall* _tmp48_;
		BalaCCodeFunctionCall* _tmp49_;
		BalaCCodeFunctionCall* _tmp50_;
		BalaCCodeExpression* _tmp51_;
		BalaCCodeExpression* _tmp52_;
		BalaCCodeUnaryExpression* _tmp53_;
		BalaCCodeUnaryExpression* _tmp54_;
		BalaCCodeFunction* _tmp55_;
		BalaCCodeFunction* _tmp56_;
		BalaCCodeFunctionCall* _tmp57_;
		_tmp41_ = bala_catch_clause_get_error_variable (clause);
		_tmp42_ = _tmp41_;
		if (_tmp42_ != NULL) {
			BalaLocalVariable* _tmp43_;
			BalaLocalVariable* _tmp44_;
			_tmp43_ = bala_catch_clause_get_error_variable (clause);
			_tmp44_ = _tmp43_;
			bala_code_node_set_unreachable ((BalaCodeNode*) _tmp44_, TRUE);
		}
		_tmp45_ = ((BalaCCodeBaseModule*) self)->cfile;
		bala_ccode_file_add_include (_tmp45_, "glib.h", FALSE);
		_tmp46_ = bala_ccode_identifier_new ("g_clear_error");
		_tmp47_ = _tmp46_;
		_tmp48_ = bala_ccode_function_call_new ((BalaCCodeExpression*) _tmp47_);
		_tmp49_ = _tmp48_;
		_bala_ccode_node_unref0 (_tmp47_);
		cclear = _tmp49_;
		_tmp50_ = cclear;
		_tmp51_ = bala_ccode_base_module_get_inner_error_cexpression ((BalaCCodeBaseModule*) self);
		_tmp52_ = _tmp51_;
		_tmp53_ = bala_ccode_unary_expression_new (BALA_CCODE_UNARY_OPERATOR_ADDRESS_OF, _tmp52_);
		_tmp54_ = _tmp53_;
		bala_ccode_function_call_add_argument (_tmp50_, (BalaCCodeExpression*) _tmp54_);
		_bala_ccode_node_unref0 (_tmp54_);
		_bala_ccode_node_unref0 (_tmp52_);
		_tmp55_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
		_tmp56_ = _tmp55_;
		_tmp57_ = cclear;
		bala_ccode_function_add_expression (_tmp56_, (BalaCCodeExpression*) _tmp57_);
		_bala_ccode_node_unref0 (cclear);
	}
	_tmp58_ = bala_catch_clause_get_body (clause);
	_tmp59_ = _tmp58_;
	bala_code_node_emit ((BalaCodeNode*) _tmp59_, (BalaCodeGenerator*) self);
	_tmp60_ = bala_ccode_base_module_get_ccode ((BalaCCodeBaseModule*) self);
	_tmp61_ = _tmp60_;
	bala_ccode_function_close (_tmp61_);
	_bala_code_node_unref0 (error_type);
}

static void
bala_gerror_module_real_append_scope_free (BalaCCodeBaseModule* base,
                                           BalaSymbol* sym,
                                           BalaCodeNode* stop_at)
{
	BalaGErrorModule * self;
	gboolean _tmp0_ = FALSE;
	self = (BalaGErrorModule*) base;
	g_return_if_fail (sym != NULL);
	BALA_CCODE_BASE_MODULE_CLASS (bala_gerror_module_parent_class)->append_scope_free ((BalaCCodeBaseModule*) G_TYPE_CHECK_INSTANCE_CAST (self, BALA_TYPE_CCODE_DELEGATE_MODULE, BalaCCodeDelegateModule), sym, stop_at);
	if (G_TYPE_CHECK_INSTANCE_TYPE (stop_at, BALA_TYPE_TRY_STATEMENT)) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = G_TYPE_CHECK_INSTANCE_TYPE (stop_at, BALA_TYPE_CATCH_CLAUSE);
	}
	if (!_tmp0_) {
		BalaBlock* finally_block = NULL;
		BalaBlock* _tmp1_;
		BalaCodeNode* _tmp2_;
		BalaCodeNode* _tmp3_;
		gboolean _tmp18_ = FALSE;
		BalaBlock* _tmp19_;
		_tmp1_ = _bala_code_node_ref0 (G_TYPE_CHECK_INSTANCE_CAST (NULL, BALA_TYPE_BLOCK, BalaBlock));
		finally_block = _tmp1_;
		_tmp2_ = bala_code_node_get_parent_node ((BalaCodeNode*) sym);
		_tmp3_ = _tmp2_;
		if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp3_, BALA_TYPE_TRY_STATEMENT)) {
			BalaCodeNode* _tmp4_;
			BalaCodeNode* _tmp5_;
			BalaBlock* _tmp6_;
			BalaBlock* _tmp7_;
			BalaBlock* _tmp8_;
			_tmp4_ = bala_code_node_get_parent_node ((BalaCodeNode*) sym);
			_tmp5_ = _tmp4_;
			_tmp6_ = bala_try_statement_get_finally_body (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, BALA_TYPE_TRY_STATEMENT, BalaTryStatement));
			_tmp7_ = _tmp6_;
			_tmp8_ = _bala_code_node_ref0 (_tmp7_);
			_bala_code_node_unref0 (finally_block);
			finally_block = _tmp8_;
		} else {
			BalaCodeNode* _tmp9_;
			BalaCodeNode* _tmp10_;
			_tmp9_ = bala_code_node_get_parent_node ((BalaCodeNode*) sym);
			_tmp10_ = _tmp9_;
			if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp10_, BALA_TYPE_CATCH_CLAUSE)) {
				BalaCodeNode* _tmp11_;
				BalaCodeNode* _tmp12_;
				BalaCodeNode* _tmp13_;
				BalaCodeNode* _tmp14_;
				BalaBlock* _tmp15_;
				BalaBlock* _tmp16_;
				BalaBlock* _tmp17_;
				_tmp11_ = bala_code_node_get_parent_node ((BalaCodeNode*) sym);
				_tmp12_ = _tmp11_;
				_tmp13_ = bala_code_node_get_parent_node (_tmp12_);
				_tmp14_ = _tmp13_;
				_tmp15_ = bala_try_statement_get_finally_body (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, BALA_TYPE_TRY_STATEMENT, BalaTryStatement));
				_tmp16_ = _tmp15_;
				_tmp17_ = _bala_code_node_ref0 (_tmp16_);
				_bala_code_node_unref0 (finally_block);
				finally_block = _tmp17_;
			}
		}
		_tmp19_ = finally_block;
		if (_tmp19_ != NULL) {
			BalaBlock* _tmp20_;
			_tmp20_ = finally_block;
			_tmp18_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp20_, BALA_TYPE_SYMBOL, BalaSymbol) != sym;
		} else {
			_tmp18_ = FALSE;
		}
		if (_tmp18_) {
			BalaBlock* _tmp21_;
			_tmp21_ = finally_block;
			bala_code_node_emit ((BalaCodeNode*) _tmp21_, (BalaCodeGenerator*) self);
		}
		_bala_code_node_unref0 (finally_block);
	}
}

BalaGErrorModule*
bala_gerror_module_construct (GType object_type)
{
	BalaGErrorModule* self = NULL;
	self = (BalaGErrorModule*) bala_ccode_delegate_module_construct (object_type);
	return self;
}

BalaGErrorModule*
bala_gerror_module_new (void)
{
	return bala_gerror_module_construct (BALA_TYPE_GERROR_MODULE);
}

static void
bala_gerror_module_class_init (BalaGErrorModuleClass * klass,
                               gpointer klass_data)
{
	bala_gerror_module_parent_class = g_type_class_peek_parent (klass);
	((BalaCodeVisitorClass *) klass)->finalize = bala_gerror_module_finalize;
	g_type_class_adjust_private_offset (klass, &BalaGErrorModule_private_offset);
	((BalaCCodeBaseModuleClass *) klass)->generate_error_domain_declaration = (void (*) (BalaCCodeBaseModule*, BalaErrorDomain*, BalaCCodeFile*)) bala_gerror_module_real_generate_error_domain_declaration;
	((BalaCodeVisitorClass *) klass)->visit_error_domain = (void (*) (BalaCodeVisitor*, BalaErrorDomain*)) bala_gerror_module_real_visit_error_domain;
	((BalaCodeVisitorClass *) klass)->visit_throw_statement = (void (*) (BalaCodeVisitor*, BalaThrowStatement*)) bala_gerror_module_real_visit_throw_statement;
	((BalaGErrorModuleClass *) klass)->return_with_exception = (void (*) (BalaGErrorModule*, BalaCCodeExpression*)) bala_gerror_module_real_return_with_exception;
	((BalaCCodeBaseModuleClass *) klass)->add_simple_check = (void (*) (BalaCCodeBaseModule*, BalaCodeNode*, gboolean)) bala_gerror_module_real_add_simple_check;
	((BalaCodeVisitorClass *) klass)->visit_try_statement = (void (*) (BalaCodeVisitor*, BalaTryStatement*)) bala_gerror_module_real_visit_try_statement;
	((BalaCodeVisitorClass *) klass)->visit_catch_clause = (void (*) (BalaCodeVisitor*, BalaCatchClause*)) bala_gerror_module_real_visit_catch_clause;
	((BalaCCodeBaseModuleClass *) klass)->append_scope_free = (void (*) (BalaCCodeBaseModule*, BalaSymbol*, BalaCodeNode*)) bala_gerror_module_real_append_scope_free;
}

static void
bala_gerror_module_instance_init (BalaGErrorModule * self,
                                  gpointer klass)
{
	self->priv = bala_gerror_module_get_instance_private (self);
	self->priv->is_in_catch = FALSE;
}

static void
bala_gerror_module_finalize (BalaCodeVisitor * obj)
{
	BalaGErrorModule * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BALA_TYPE_GERROR_MODULE, BalaGErrorModule);
	BALA_CODE_VISITOR_CLASS (bala_gerror_module_parent_class)->finalize (obj);
}

static GType
bala_gerror_module_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (BalaGErrorModuleClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) bala_gerror_module_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BalaGErrorModule), 0, (GInstanceInitFunc) bala_gerror_module_instance_init, NULL };
	GType bala_gerror_module_type_id;
	bala_gerror_module_type_id = g_type_register_static (BALA_TYPE_CCODE_DELEGATE_MODULE, "BalaGErrorModule", &g_define_type_info, 0);
	BalaGErrorModule_private_offset = g_type_add_instance_private (bala_gerror_module_type_id, sizeof (BalaGErrorModulePrivate));
	return bala_gerror_module_type_id;
}

GType
bala_gerror_module_get_type (void)
{
	static volatile gsize bala_gerror_module_type_id__volatile = 0;
	if (g_once_init_enter (&bala_gerror_module_type_id__volatile)) {
		GType bala_gerror_module_type_id;
		bala_gerror_module_type_id = bala_gerror_module_get_type_once ();
		g_once_init_leave (&bala_gerror_module_type_id__volatile, bala_gerror_module_type_id);
	}
	return bala_gerror_module_type_id__volatile;
}

